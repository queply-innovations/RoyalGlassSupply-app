import{cp as u,j as e,r}from"./index-f76a421f.js";import{P as m}from"./PosTable-1ad3b0d1.js";import"./index-b11a2117.js";const x=({queue:t})=>{const{data:l,isLoading:c}=u();function i(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s)}const n=[{accessorKey:"quantity",header:()=>e.jsx("div",{className:"flex justify-center",children:"Quantity"}),cell:({row:s})=>e.jsx("div",{className:"flex justify-center ",children:e.jsx("div",{className:"flex flex-row border drop-shadow-sm",children:s.original.quantity||""})})},{accessorKey:"name",header:()=>e.jsx("div",{className:"justify-center",children:"Product Name"}),cell:({row:s})=>e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{className:"text-sm font-bold",children:s.original.product_id.name}),s.original.product_id.brand?e.jsxs("span",{className:"text-sm",children:["(",s.original.product_id.brand,")"]}):null,e.jsx("span",{className:"text-[12px]",children:s.original.product_id.size}),s.original.product_id.color]})},{accessorKey:"price",header:()=>e.jsx("div",{className:"justify-center",children:"Unit Cost"}),cell:({row:s})=>{const a=l.find(o=>o.product.id===s.original.product_id.id);return e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{children:i(s.original.product_price)}),a!=null&&a.sale_discount?e.jsxs("span",{className:"text-sm font-light",children:["(",i((a==null?void 0:a.sale_discount)??0),")"]}):null]})}},{id:"total_price",accessorKey:"total_price",header:()=>e.jsx("div",{className:"justify-center",children:"Price"}),cell:({row:s})=>e.jsx("div",{className:"",children:e.jsx("span",{children:i(s.original.total_price)})}),size:250}];return e.jsx(e.Fragment,{children:e.jsx(m,{data:t,columns:n,invoice:!0})})},j=({})=>{const[t,l]=r.useState(),[c,i]=r.useState(),[n,s]=r.useState(),[a,o]=r.useState();return console.log(window.api.receive()),r.useEffect(()=>{async function d(){i(await window.api.receive())}d()},[]),r.useEffect(()=>{c&&(l(c.fullData),s(new Date(c.fullData.updated_at)),o(c.invoiceItems))},[c]),e.jsx(e.Fragment,{children:t&&a&&n&&e.jsx("div",{className:"flex h-full w-screen flex-col p-3",children:e.jsxs("div",{className:"overflow-x-hidden",children:[e.jsxs("div",{className:"text-base",children:["Date: ",e.jsx("span",{className:"font-bold",children:n.toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"})}),e.jsx("br",{}),"Invoice number: ",e.jsxs("span",{className:"font-bold",children:[" ",t.code," "]}),e.jsx("br",{}),"Customer name: ",e.jsx("span",{className:"font-bold",children:t.customer.firstname+" "+t.customer.lastname})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-6 p-6",children:e.jsx(x,{queue:a})})]})})})};export{j as PrintForm};
