import{r as u,x as ne,j as e,ah as A,e as F,aj as C,ay as T,az as M,aA as L,aB as O,aC as W,ad as B,b9 as $,ai as P,aE as D,aF as E,a8 as le,a9 as ie,aa as de,ab as ce,ac as U,aH as I,B as w,bu as G,a_ as re,a$ as oe,b0 as X,b1 as xe,b2 as me,b3 as g,U as ue,V as pe,X as he,Y as fe,Z as je,_ as Y,b as ve,aG as Z,I as ge,bw as be,bx as ee,by as Ne,bz as J,bn as ye,bW as _e,av as Ce,f as Se,aM as ke,bX as Ae}from"./index-a53f4910.js";import{c as q,d as se,g as Ie,a as ze,P as Pe,e as Fe,C as Te,b as Me,M as Le,A as Oe,N as We}from"./useInventoryProductCalculations-19f6dde3.js";import{P as Be,D as $e,u as De}from"./FormatCurrency-429c7877.js";const te=u.createContext(void 0),Ee=({children:a})=>{const[r,x]=u.useState("main"),[c,p]=u.useState(),{data:f,isLoading:m}=ne(),j={inventories:f,isInventoriesLoading:m,selectedInventory:c,setSelectedInventory:p,activeTab:r,setActiveTab:x};return e.jsx(te.Provider,{value:j,children:a})};function z(){const a=u.useContext(te);if(!a)throw new Error("useAddProductPos hook must be used within AddProductPosProvider");return a}const K=({title:a,subtitle:r,icon:x,onClick:c})=>e.jsxs(A,{className:"flex h-fit flex-1 flex-col gap-8 rounded-xl bg-gray-300 p-16 pb-12 text-slate-800 hover:text-white",onClick:c||(()=>{}),children:[x&&x,e.jsxs("span",{children:[e.jsx("p",{className:"text-lg font-bold",children:a}),r&&e.jsx("p",{className:"text-sm opacity-70",children:r})]})]}),qe=()=>{const{auth:a}=F(),{inventories:r,isInventoriesLoading:x,selectedInventory:c,setSelectedInventory:p}=z(),m=r.filter(o=>{var l;return(a==null?void 0:a.role)!=="admin"&&(a==null?void 0:a.role)!=="super_admin"?o.warehouse.code.includes(((l=a==null?void 0:a.role)==null?void 0:l.split("_")[1])??""):r}).sort((o,l)=>new Date(l.updated_at??l.created_at).getTime()-new Date(o.updated_at??o.created_at).getTime()),[j,i]=u.useState(!1);return e.jsxs("div",{className:"flex flex-col justify-center gap-1",children:[e.jsx(C,{htmlFor:"inventory",className:"text-sm font-bold text-gray-600",children:"Inventory"}),e.jsxs(T,{open:j,onOpenChange:i,children:[e.jsx(M,{id:"inventory",name:"inventory",className:"relative w-full",asChild:!0,children:e.jsxs(A,{role:"combobox",className:"justify-between truncate bg-white text-sm font-bold text-slate-600",variant:"outline",children:[c?e.jsxs("div",{className:"flex items-center font-bold text-slate-600",children:[c.code,e.jsx("span",{className:"ml-1 text-xs opacity-80",children:" • "+c.type+" • "+c.date_received})]}):e.jsx("span",{children:"Select an inventory..."}),e.jsx(q,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(L,{className:"w-[calc(100vw-170px)] max-w-[974px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(O,{defaultValue:(c==null?void 0:c.code)||"",children:[e.jsx(W,{placeholder:"Inventory code..."}),x&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(B,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx($,{children:"No results found"}),e.jsx(P,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(D,{children:m&&m.map(o=>e.jsxs(E,{className:"cursor-pointer justify-between rounded-sm",value:o.code,onSelect:()=>{p(o),i(!1)},children:[e.jsx("span",{children:o.code}),e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:o.type+" • "+o.date_received})]},o.id))})})]})})]})]})},He=({setInventoryProductsQueue:a,inventoryId:r,products:x,productsLoading:c,suppliers:p,suppliersLoading:f,currentId:m,handleNavigation:j,selectedProduct:i})=>{var H,R,V,Q;const{auth:o}=F(),l=(H=o.role)==null?void 0:H.includes("admin"),{value:n,handleChange:d}=se(),[s,b]=u.useState(!1),[h,v]=u.useState(!1),[_,S]=u.useState(null);u.useEffect(()=>{d("inventory_id",r),d("unit","pcs"),l&&d("status",1),i&&(d("product_id",i.data.product_id),d("status",i.data.status),d("supplier_id",i.data.supplier_id),d("capital_price",i.data.capital_price),d("unit",i.data.unit),d("stocks_count",i.data.stocks_count),d("damage_count",i.data.damage_count),d("total_count",i.data.total_count)),!i&&!l&&d("capital_price",0)},[]);const[k,N]=u.useState();return u.useEffect(()=>{const t=Ie(n.stocks_count||0,n.damage_count||0);N(t),d("total_count",t)},[n.damage_count,n.stocks_count,k]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),n.product_id===void 0?S("Please select a product first."):n.supplier_id===void 0?S("Please select a supplier first."):(a(i?y=>[...y.filter(ae=>ae.id!==i.id),{id:i.id,data:n}]:y=>[...y,{id:m+1,data:n}]),j())},children:e.jsxs("div",{className:"flex w-full flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:`${l?"col-span-12":"col-span-8"} flex flex-col justify-center gap-1`,children:[e.jsx(C,{htmlFor:"product_id",className:"text-sm font-bold text-gray-600",children:"Product"}),e.jsxs(T,{open:s,onOpenChange:b,children:[e.jsx(M,{id:"product_id",className:"relative w-full",asChild:!0,autoFocus:!0,children:e.jsxs(A,{role:"combobox",className:"w-full justify-between text-sm font-bold text-slate-700",variant:"outline",children:[n.product_id?e.jsx(e.Fragment,{children:(()=>{const t=x.find(y=>y.id===n.product_id);return e.jsxs("div",{className:"flex w-full flex-row items-baseline gap-4",children:[e.jsx("span",{className:"max-w-[50%] truncate",children:t==null?void 0:t.name}),e.jsxs("div",{className:"flex max-w-[50%] gap-4 truncate text-xs font-semibold",children:[(t==null?void 0:t.brand)&&e.jsx("span",{children:`Brand: ${t==null?void 0:t.brand}`}),(t==null?void 0:t.size)&&e.jsx("span",{children:`Size: ${t==null?void 0:t.size}`}),(t==null?void 0:t.color)&&e.jsx("span",{children:`Color: ${t==null?void 0:t.color}`})]})]})})()}):e.jsx("span",{children:"Select a product..."}),e.jsx(q,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(L,{className:`${l?"max-w-[966px]":"max-w-[640px]"} w-[calc(100vw-170px)] p-0 text-sm font-medium text-slate-700`,children:e.jsxs(O,{children:[e.jsx(W,{placeholder:"Product name or serial number..."}),c&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(B,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx($,{children:"No match found"}),e.jsx(P,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(D,{children:x.map((t,y)=>e.jsx(E,{className:"cursor-pointer justify-between rounded-sm border-b",value:t.id+"_"+t.name+"_"+t.serial_no,onSelect:()=>{d("product_id",t.id),b(!1)},children:e.jsxs("div",{className:"flex w-full flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex max-w-[50%] flex-col",children:[e.jsx("span",{className:"max-w-full truncate font-semibold",children:t.name}),e.jsxs("span",{className:"max-w-full truncate text-xs font-medium",children:[t.brand,t.brand&&t.size&&" • ",t.size,t.size&&t.color&&" • ",t.color]})]}),e.jsx("div",{className:"flex max-w-[50%] flex-col text-right",children:e.jsx("span",{className:"max-w-full truncate",children:t.serial_no})})]})},y))})})]})})]})]}),e.jsxs("div",{className:`${l?"col-span-6":"col-span-4"} flex flex-col justify-center gap-1`,children:[e.jsx(C,{htmlFor:"supplier_id",className:"text-sm font-bold text-gray-600",children:"Supplier"}),e.jsxs(T,{open:h,onOpenChange:v,children:[e.jsx(M,{id:"supplier_id",className:"relative w-full",asChild:!0,children:e.jsxs(A,{role:"combobox",className:"w-full justify-between text-sm font-bold text-slate-700",variant:"outline",children:[n.supplier_id?e.jsx(e.Fragment,{children:(()=>{const t=p.find(y=>y.id===n.supplier_id);return e.jsxs("div",{className:"flex w-full items-baseline gap-4 capitalize",children:[e.jsx("span",{className:"max-w-full truncate",children:t==null?void 0:t.name}),e.jsx("span",{className:"font-baseline text-xs text-slate-700/50",children:t==null?void 0:t.address})]})})()}):e.jsx("span",{children:"Select a supplier..."}),e.jsx(q,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(L,{className:"min-w-[477px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(O,{children:[e.jsx(W,{placeholder:"Supplier name or address..."}),f&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(B,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx($,{children:"No match found"}),e.jsx(P,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(D,{children:p.map((t,y)=>e.jsxs(E,{className:"cursor-pointer justify-between rounded-sm",onSelect:()=>{d("supplier_id",t.id),v(!1)},children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"text-xs font-semibold text-slate-700/50",children:t.address})]},y))})})]})})]})]}),l&&e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(C,{htmlFor:"status",className:"text-sm font-bold text-gray-600",children:"Status"}),e.jsxs(le,{value:(R=n.status)==null?void 0:R.toString(),required:!0,onValueChange:t=>d("status",Number(t)),children:[e.jsx(ie,{name:"status",id:"status",className:"w-full px-4 text-sm font-bold text-slate-700",children:e.jsx(de,{placeholder:"Select status..."})}),e.jsxs(ce,{className:"text-sm font-medium",children:[e.jsx(U,{value:"1",children:"Approved"}),e.jsx(U,{value:"0",children:"Pending"})]})]})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:`relative flex flex-col justify-center gap-1 ${l?"col-span-6":"hidden"}`,children:[e.jsx(C,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(I,{id:"capital_price",name:"capital_price",type:"number",min:0,step:.01,required:!0,className:"pl-8",placeholder:"0.00",disabled:!l,value:n.capital_price||"",onBlur:t=>{n.capital_price!==void 0&&(t.target.value=Number(t.target.value).toFixed(2))},onChange:t=>{d("capital_price",Number(Number(t.target.value).toFixed(2)))}}),e.jsx("span",{className:"absolute bottom-0 left-0 pb-[0.65rem] pl-3 text-sm font-semibold text-gray-500",children:"₱"})]}),e.jsxs("div",{className:`flex flex-col justify-center gap-1 ${l?"col-span-6":"col-span-3"}`,children:[e.jsx(C,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(I,{id:"unit",name:"unit",type:"text",maxLength:40,required:!0,value:n.unit||"",onChange:t=>d("unit",t.target.value)})]}),e.jsxs("div",{className:`flex flex-col justify-center gap-1 ${l?"col-span-4":"col-span-3"}`,children:[e.jsx(C,{htmlFor:"stocks_count",className:"text-sm font-bold text-gray-600",children:"Stocks count"}),e.jsx(I,{id:"stocks_count",name:"stocks_count",type:"number",min:0,max:9999999,step:1,value:(V=n.stocks_count)==null?void 0:V.toFixed(0),required:!0,onChange:t=>{d("stocks_count",Number(Number(t.target.value).toFixed(0)))}})]}),e.jsxs("div",{className:`flex flex-col justify-center gap-1 ${l?"col-span-4":"col-span-3"}`,children:[e.jsx(C,{htmlFor:"damage_count",className:"text-sm font-bold text-gray-600",children:"Damage count"}),e.jsx(I,{id:"damage_count",name:"damage_count",type:"number",min:0,max:n.stocks_count??0,step:1,required:!0,value:(Q=n.damage_count)==null?void 0:Q.toFixed(0),onChange:t=>d("damage_count",Number(Number(t.target.value).toFixed(0)))})]}),e.jsxs("div",{className:`flex flex-col justify-center gap-1 ${l?"col-span-4":"col-span-3"}`,children:[e.jsx(C,{htmlFor:"total_count",className:"text-sm font-bold text-gray-600",children:"Total count"}),e.jsx(I,{id:"total_count",name:"total_count",type:"number",min:0,max:9999999,step:1,readOnly:!0,value:k??"0",className:`${k&&k<0&&"text-red-600"}`})]})]}),e.jsx("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:e.jsx("div",{className:"ml-auto flex flex-row gap-4",children:e.jsx(w,{type:"submit",fill:"green",disabled:n.product_id===void 0||n.supplier_id===void 0,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:i?"Save changes":"Add item to queue"})})}),_&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:_})})]})})})},Re=["","Name","Brand","Size","Color","Supplier","Status","Capital price","Unit","Stocks","Damaged","Total"],Ve=({data:a,products:r,suppliers:x,handleEditItem:c,handleRemoveItem:p,handleSubmit:f})=>{const{auth:m}=F(),{setSelectedInventory:j}=z(),[i,o]=u.useState(!1),[l,n]=u.useState(null),d=async()=>{o(!0);const s=await f({action:"batch-add",data:a.map(h=>h==null?void 0:h.data)}).then(h=>{Array.isArray(h)&&h.length>0&&(Z.success("Items added to inventory",{autoClose:5e3,closeButton:!0}),j(void 0))}).catch(()=>{Z.error("Error adding items to inventory",{autoClose:5e3,closeButton:!0})});(Array.isArray(s)?s.filter(h=>h!==201):[]).length>0?n("Error adding items to inventory"):o(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex h-full flex-col",children:[e.jsxs(P,{type:"always",className:"flex-1 rounded-md border border-gray-200 bg-white",style:{"--border":"216 12% 84%"},children:[a.length<=0&&e.jsx("div",{className:"absolute z-10 flex h-full w-full items-center justify-center",children:e.jsx("p",{className:"text-lg font-medium text-gray-500/50",children:"No items in queue"})}),e.jsx(G,{orientation:"horizontal",className:"z-50 h-3"}),e.jsx(G,{orientation:"vertical",className:"z-50 h-3",style:{"--border":"216 12% 84%"},asChild:!0}),e.jsxs(re,{children:[e.jsx(oe,{children:e.jsx(X,{id:"tHeaderRow",className:"hover:bg-white",children:Re.map(s=>{var b;if(s!=="Capital price"||(b=m==null?void 0:m.role)!=null&&b.includes("admin"))return e.jsx(xe,{className:"whitespace-nowrap px-5 py-3 text-xs font-bold uppercase",children:s},s+"_head")})},"tHeaderRow")}),e.jsx(me,{className:"[&>*:nth-child(even)]:bg-white [&>*:nth-child(odd)]:bg-gray-50",children:a.length>0&&a.map(s=>{var b,h,v,_,S,k;return e.jsxs(X,{className:"text-sm font-medium text-gray-700",children:[e.jsx(g,{className:"p-3 pr-0",children:e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(ue,{children:[e.jsx(pe,{className:"overflow-clip rounded-full bg-gray-200/70 p-1.5 hover:bg-gray-300",children:e.jsx(ze,{size:16,strokeWidth:2.25})}),e.jsxs(he,{className:"relative z-50 w-44 bg-white font-medium",children:[e.jsx(fe,{children:"Actions"}),e.jsx(je,{className:"bg-gray-200"}),e.jsxs(Y,{onClick:()=>{s!=null&&s.id&&c(s)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Pe,{size:16,strokeWidth:2})}),e.jsx("span",{children:"Edit"})]},(s==null?void 0:s.id)+"edit"),e.jsxs(Y,{onClick:()=>{s!=null&&s.id&&p(s.id)},className:"flex flex-row items-center gap-3 rounded-md p-2 focus:bg-red-50 focus:text-red-700",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Fe,{size:16,strokeWidth:2})}),e.jsx("span",{children:"Remove"})]},(s==null?void 0:s.id)+"remove")]})]})})},(s==null?void 0:s.id)+"action"),e.jsx(g,{className:"max-w-[200px] truncate px-5 py-3",children:s!=null&&s.data.product_id?(b=r.find(N=>N.id===s.data.product_id))==null?void 0:b.name:s==null?void 0:s.data.product_id},(s==null?void 0:s.id)+"product_id"),e.jsx(g,{className:"max-w-[200px] truncate px-5 py-3",children:s!=null&&s.data.product_id?(h=r.find(N=>N.id===s.data.product_id))==null?void 0:h.brand:"No brand"},(s==null?void 0:s.id)+"product_brand"),e.jsx(g,{className:"max-w-[200px] truncate px-5 py-3",children:s!=null&&s.data.product_id?(v=r.find(N=>N.id===s.data.product_id))==null?void 0:v.size:"No data"},(s==null?void 0:s.id)+"product_size"),e.jsx(g,{className:"max-w-[200px] truncate px-5 py-3",children:s!=null&&s.data.product_id?(_=r.find(N=>N.id===s.data.product_id))==null?void 0:_.color:"No data"},(s==null?void 0:s.id)+"product_color"),e.jsx(g,{className:"max-w-[200px] truncate px-5 py-3",children:s!=null&&s.data.supplier_id?(S=x.find(N=>N.id===s.data.supplier_id))==null?void 0:S.name:s==null?void 0:s.data.supplier_id},(s==null?void 0:s.id)+"supplier_id"),e.jsx(g,{className:"px-5 py-3",children:s!=null&&s.data.status?e.jsx(Te,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(ve,{size:20,strokeWidth:2,className:"text-gray-600"})},(s==null?void 0:s.id)+"status"),((k=m==null?void 0:m.role)==null?void 0:k.includes("admin"))&&e.jsx(g,{className:"px-5 py-3",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format((s==null?void 0:s.data.capital_price)||0)},(s==null?void 0:s.id)+"capital_price"),e.jsx(g,{className:"px-5 py-3",children:s==null?void 0:s.data.unit},(s==null?void 0:s.id)+"unit"),e.jsx(g,{className:"px-5 py-3",children:s==null?void 0:s.data.stocks_count},(s==null?void 0:s.id)+"stocks_count"),e.jsx(g,{className:"px-5 py-3",children:s==null?void 0:s.data.damage_count},(s==null?void 0:s.id)+"damage_count"),e.jsx(g,{className:"px-5 py-3",children:s==null?void 0:s.data.total_count},(s==null?void 0:s.id)+"total_count")]},(s==null?void 0:s.id)+"row")})})]})]}),e.jsxs("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:[l&&e.jsx("div",{className:"flex w-full flex-row items-center justify-start gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:l})}),e.jsx("div",{className:"ml-auto flex flex-row gap-4",children:e.jsx(w,{type:"submit",fill:"green",disabled:a.length<=0||i,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",onClick:s=>{s.preventDefault(),d()},children:a.length<=1?"Add item to inventory":`Add ${a.length} items to inventory`})})]})]})})},Qe={hidden:{opacity:0,x:"-100%"},animate:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}},exit:{opacity:0,x:"-100%",transition:{duration:.3,ease:"easeInOut"}}},Ue={hidden:{opacity:0,x:"100%"},animate:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}},exit:{opacity:0,x:"100%",transition:{duration:.3,ease:"easeInOut"}}},Ge=({inventoryId:a})=>{const{auth:r}=F(),{data:x,isLoading:c}=ge(),{suppliers:p,isFetching:f}=be(),{handleSubmit:m}=se(),[j,i]=u.useState([]),[o,l]=u.useState({});u.useEffect(()=>{i([])},[a]);const[n,d]=u.useState("main"),s=()=>{l({}),d(n==="main"?"form":"main")},b=v=>{l(v),d("form")},h=v=>{i(_=>_.filter(S=>S.id!==v))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:n==="main"?"ml-auto":"",children:e.jsx(A,{className:"flex flex-row items-center gap-2 bg-gray-200 text-sm font-bold text-gray-700 hover:bg-gray-300 hover:text-gray-700",onClick:()=>{s()},children:e.jsxs(e.Fragment,{children:[n==="main"?e.jsx(Be,{size:20,strokeWidth:2.5}):e.jsx(ee,{size:20,strokeWidth:2.5}),n==="main"?"Add an item":"Back"]})})}),e.jsx("div",{className:`relative max-h-[65vh] min-w-[650px] overflow-x-clip transition-all duration-300 
					${n==="form"?r.role==="admin"||r.role==="super_admin"?"h-[415px] min-h-[415px]":"h-[260px] min-h-[260px]":"h-[65vh] min-h-[415px]"}`,children:e.jsx(Ne,{initial:!1,children:n==="main"?e.jsx(J.div,{variants:Qe,initial:"hidden",animate:"animate",exit:"exit",className:"absolute h-full w-full overflow-x-auto antialiased",children:e.jsx(Ve,{data:j,products:x,suppliers:p,handleEditItem:b,handleRemoveItem:h,handleSubmit:m})},"main"):e.jsx(J.div,{variants:Ue,initial:"hidden",animate:"animate",exit:"exit",className:"absolute max-h-[642px] w-full p-1",children:e.jsx(He,{setInventoryProductsQueue:i,inventoryId:a,products:x,productsLoading:c,suppliers:p,suppliersLoading:f,currentId:j.reduce((v,_)=>_.id>v?_.id:v,0),handleNavigation:s,selectedProduct:Object.keys(o).length?o:void 0})},"form")})})]})})},Xe=()=>{const{selectedInventory:a}=z();return e.jsxs("div",{className:"w-full space-y-4 rounded-lg border bg-white p-6",children:[e.jsx(qe,{}),a&&e.jsx(Ge,{inventoryId:a.id})]})},Ye=()=>{const{setActiveTab:a}=z();return e.jsxs("div",{className:"mx-auto flex w-full flex-row items-center gap-4",children:[e.jsx(K,{title:"Register Product Item",subtitle:"Create new unique product...",icon:e.jsx(ye,{size:20,strokeWidth:1.5,className:"h-16 w-16"}),onClick:()=>a("add_product")}),e.jsx(K,{title:"Inventory Product",subtitle:"Add existing products to inventory...",icon:e.jsx(_e,{size:20,strokeWidth:1.5,className:"h-16 w-16"}),onClick:()=>a("select_inventory")})]})},Ze=({openModal:a})=>{const{data:r,isLoading:x}=Ce(),c=()=>{a({},"add")};return e.jsx("div",{className:"max-h-full w-full flex-1 rounded-lg border border-black/10 bg-white",children:e.jsx($e,{columns:Me,data:r.sort((p,f)=>f.id-p.id),filterWhat:"name",dataType:"Product",openModal:c,isLoading:x})})},Je=()=>{const{activeTab:a,setActiveTab:r}=z(),x=Se(),{isOpen:c,openModal:p,closeModal:f}=De(),[m,j]=u.useState(""),i=(o,l)=>{p(),j(l)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-row items-start justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add Product"}),e.jsxs(A,{className:"flex flex-row items-center gap-2 bg-gray-200 text-sm font-bold text-gray-700 hover:bg-gray-300 hover:text-gray-700",onClick:()=>{a==="main"?x("/pos/add-order"):r("main")},children:[e.jsx(ee,{size:20,strokeWidth:2.5}),a==="main"?"Go back":"Main menu"]})]}),(a==="main"||a===void 0)&&e.jsx(Ye,{}),a==="select_inventory"&&e.jsx(Xe,{})," ",a==="add_product"&&e.jsx(Ze,{openModal:i}),e.jsx("div",{children:e.jsx(Le,{isOpen:c,onClose:f,title:m==="add"?"Add Product":"Edit Product",children:e.jsx(e.Fragment,{children:m==="add"&&e.jsx(Oe,{onClose:f})})})})]})},ss=()=>e.jsxs("div",{className:"flex h-screen w-screen flex-row",children:[e.jsx(We,{}),e.jsx(Ee,{children:e.jsxs(ke,{children:[e.jsx("div",{className:"max-h-full w-full overflow-y-auto p-6 pt-12 text-slate-700",children:e.jsx("div",{className:"mx-auto max-w-[1024px] space-y-6",children:e.jsx(Je,{})})}),e.jsx(Ae,{})]})})]});export{ss as AddProductPOSPage};
