import{m as p,k as z,r as x,bN as L,bO as R,bP as T,bQ as V,bR as B,j as e,at as q,B as j,Z as h,a3 as y,b5 as K,b7 as v,b8 as C,b9 as N,aB as F,ba as w,e as A,bS as $,Q as Z,bT as O,bU as W,aj as b,bV as E,bW as U,bX as Y,bY as k,b4 as Q,bZ as X,b_ as G,Y as S,b$ as H}from"./index-657ef32a.js";import{a as f,A as P,b as M,c as I,f as J,l as ee}from"./FormatCurrency-1f54bf2e.js";/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=p("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=p("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=p("DatabaseBackup",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=p("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=p("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=p("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=p("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=p("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ye=()=>{const a=z(),[s,r]=x.useState({}),i=(n,d)=>{r(o=>({...o,[n]:d}))},u=async n=>{if(console.log("Submitting: ",n),n.action==="add")return await c(n.data);if(n.action==="batch-add")return await m(n.data);if(n.action==="update")return await t({id:n.id,data:n.data});{const d="No data to submit. Function requires at least one parameter.";return console.error(d),{status:400,data:d}}},l={onSuccess:async()=>{await a.invalidateQueries({queryKey:["inventoryProductById"]})},onError:n=>{console.error("Inventory Product Data failed",n)}},{mutateAsync:c}=f({mutationKey:["addInventoryProduct"],mutationFn:L,...l}),{mutateAsync:m}=f({mutationKey:["addInventoryProducts"],mutationFn:R,...l}),{mutateAsync:t}=f({mutationKey:["patchInventoryProduct"],mutationFn:T,...l});return{value:s,setValue:r,handleChange:i,handleSubmit:u}},re=()=>{const a=z(),[s,r]=x.useState({}),i=(t,n)=>{r(d=>({...d,[t]:n}))},u=async t=>{if(console.log("Submitting: ",t),t.action==="add")return await c(t.data);if(t.action==="update")return await m({id:t.id,data:t.data});{const n="No data to submit. Function requires at least one parameter.";return console.error(n),{status:400,data:n}}},l={onSuccess:async()=>{await a.invalidateQueries({queryKey:["products"]})},onError:t=>{console.error("Product Data failed",t)}},{mutateAsync:c}=f({mutationKey:["addProduct"],mutationFn:V,...l}),{mutateAsync:m}=f({mutationKey:["patchProduct"],mutationFn:B,...l});return{value:s,setValue:r,handleChange:i,handleSubmit:u,addProductMutation:c}},ge=({children:a,title:s,isOpen:r,onClose:i,closeOnOverlayClick:u})=>{const l=x.useRef(null),[c,m]=x.useState(!1),t=r?"animate-fade-in":"animate-fade-out";return x.useEffect(()=>{var n;if(r)m(!0);else{(n=l.current)==null||n.classList.add("fade-out");const d=setTimeout(()=>{m(!1),i()},300);return()=>clearTimeout(d)}},[r,i]),e.jsx(e.Fragment,{children:c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:l,className:`modal-content ${t} absolute left-1/2 top-1/2 z-50 flex -translate-x-1/2 -translate-y-1/2 transform flex-col gap-5 rounded-md bg-white stroke-1 p-5 pb-10 shadow-2xl`,children:[e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("span",{className:"text-lg font-bold uppercase tracking-tight text-gray-800",children:s}),e.jsx("span",{className:"close-button relative right-0 top-0 flex-none cursor-pointer justify-end",onClick:i,children:e.jsx(q,{strokeWidth:2,size:28})})]}),a]}),e.jsx("div",{className:`modal-overlay fixed left-0 top-0 z-30 h-full w-full bg-black bg-opacity-70 ${t}`,onClick:u?i:()=>{}})]})})},fe=[{id:"select",header:({table:a})=>e.jsx("input",{type:"checkbox",checked:a.getIsAllPageRowsSelected(),onChange:s=>a.toggleAllPageRowsSelected(!!s.target.checked),"aria-label":"Select all"}),cell:({row:a})=>e.jsx("input",{type:"checkbox",checked:a.getIsSelected(),onChange:s=>a.toggleSelected(!!s.target.checked),"aria-label":"Select row",className:"justify-center"})},{accessorKey:"serial_no",sortingFn:"text",enableSorting:!0,header:({column:a})=>e.jsx("div",{children:e.jsxs(j,{onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Serial Number"," ",a.getIsSorted()==="asc"?e.jsx(P,{size:18,strokeWidth:2}):a.getIsSorted()==="desc"?e.jsx(M,{size:18,strokeWidth:2}):e.jsx(I,{size:18,strokeWidth:2})]})})},{id:"name",accessorKey:"name",sortingFn:"text",enableSorting:!0,header:({column:a})=>e.jsx("div",{children:e.jsxs(j,{onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Name"," ",a.getIsSorted()==="asc"?e.jsx(P,{size:18,strokeWidth:2}):a.getIsSorted()==="desc"?e.jsx(M,{size:18,strokeWidth:2}):e.jsx(I,{size:18,strokeWidth:2})]})})},{accessorKey:"brand",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Brand"})},{accessorKey:"size",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Size"})},{accessorKey:"color",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Color"})},{accessorKey:"notes",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Notes"})}],je=({onClose:a})=>{const{value:s,handleChange:r,handleSubmit:i}=re(),[u,l]=x.useState(!1),[c,m]=x.useState(null),[t,n]=x.useState(),d=(o,g,D,_)=>{D.test(o.target.value)?(o.target.value=o.target.value,r(g,o.target.value),n(void 0)):n({type:g,error:_})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async o=>{l(!u),o.preventDefault();const g=await i({action:"add",data:s});(g==null?void 0:g.status)===201?(l(!u),a()):(l(!u),m("Failed to submit product"))},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-12 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"serial_no",className:"text-sm font-bold text-gray-600",children:"Serial number"}),e.jsx(y,{id:"serial_no",name:"serial_no",type:"text",maxLength:100,required:!0,placeholder:"Serial number...",value:s.serial_no||"",onChange:o=>{d(o,"serial_no",/^[a-zA-Z0-9-]{0,100}$/,"Must only contain A-Z, 0-9, and -")}}),e.jsx("span",{hidden:!(t&&t.type==="serial_no"),className:"text-xs font-bold text-red-600",children:t==null?void 0:t.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"name",className:"text-sm font-bold text-gray-600",children:"Name"}),e.jsx(y,{id:"name",name:"name",type:"text",maxLength:100,required:!0,placeholder:"Product name...",value:s.name||"",onChange:o=>{d(o,"name",/^[0-9a-zA-Z\s\-.,/+:_=]{0,100}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(t&&t.type==="name"),className:"max-w-[225px] text-xs font-bold text-red-600",children:t==null?void 0:t.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"brand",className:"text-sm font-bold text-gray-600",children:"Brand"}),e.jsx(y,{id:"brand",name:"brand",type:"text",maxLength:100,required:!0,placeholder:"Brand...",value:s.brand||"",onChange:o=>{d(o,"brand",/^[0-9a-zA-Z\s\-.,/+:_=]{0,100}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(t&&t.type==="brand"),className:"max-w-[225px] text-xs font-bold text-red-600",children:t==null?void 0:t.error})]}),e.jsx("hr",{className:"col-span-12 my-3 border-t border-slate-200"}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"size",className:"text-sm font-bold text-gray-600",children:"Size"}),e.jsx(y,{id:"size",name:"size",type:"text",maxLength:100,required:!0,placeholder:"e.g. medium...",value:s.size||"",onChange:o=>{d(o,"size",/^[0-9a-zA-Z\s\-.,/+:_="']{0,100}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(t&&t.type==="size"),className:"max-w-[225px] text-xs font-bold text-red-600",children:t==null?void 0:t.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"color",className:"text-sm font-bold text-gray-600",children:"Color"}),e.jsx(y,{id:"color",name:"color",type:"text",maxLength:40,required:!0,placeholder:"e.g. white...",value:s.color||"",onChange:o=>{d(o,"color",/^[0-9a-zA-Z\s\-.,/+:_="']{0,40}$/,"Must only contain alphanumeric and limited special characters")}})," ",e.jsx("span",{hidden:!(t&&t.type==="color"),className:"max-w-[225px] text-xs font-bold text-red-600",children:t==null?void 0:t.error})]}),e.jsxs("div",{className:"col-span-12 flex flex-col justify-start gap-1",children:[e.jsx(h,{htmlFor:"notes",className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(y,{id:"notes",name:"notes",type:"text",placeholder:"Type product notes here...",onBlur:o=>r("notes",o.target.value)})]})]}),e.jsxs("div",{className:"ml-auto flex flex-row gap-4 whitespace-nowrap",children:[e.jsx(j,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-gray-700 hover:text-white",onClick:a,children:"Cancel"}),e.jsx(j,{type:"submit",fill:"green",disabled:u||Object.keys(s).length===0||t!==void 0||s.name===""||s.serial_no==="",className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:u?"Submitting...":"Add product"})]}),c&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:c})})]})})})},ne=[{allowedRoles:["super_admin","admin","manager"],navbarProps:{displayText:"Dashboard",icon:e.jsx(ae,{className:"h-10 w-10 text-[#CCCCCC]"})},path:"/dashbard"},{allowedRoles:["super_admin","admin","manager","encoder","sales_person"],navbarProps:{displayText:"Add Order",icon:e.jsx(K,{className:"h-10 w-10 text-[#CCCCCC]"})},path:"/pos/add-order"},{allowedRoles:["super_admin","admin","manager","encoder","sales_person"],navbarProps:{displayText:"Add Product",icon:e.jsx(se,{className:"h-10 w-10 text-[#CCCCCC]"})},path:"/pos/add-product"}],le=({item:a})=>a.navbarProps&&a.path?e.jsx(e.Fragment,{children:e.jsx(v,{children:e.jsxs(C,{children:[e.jsx(N,{asChild:!0,children:e.jsx(F,{to:a.path,className:`flex w-full cursor-pointer flex-row justify-center  ${location.pathname===a.path?"bg-primary-background hover:bg-white":"hover:bg-white/5"}`,children:e.jsx("div",{className:"item-center flex justify-center gap-5 p-4",children:a.navbarProps.icon?e.jsx("div",{className:"flex items-center",children:a.navbarProps.icon}):null})})}),location.pathname===a.path?"":e.jsx(e.Fragment,{children:e.jsx(w,{align:"center",className:"bg-pos-primary-background",side:"right",sideOffset:0,children:e.jsx("span",{className:"p-2 text-white",children:a.navbarProps.displayText})})})]})})}):null,oe=()=>{const{logout:a}=A();return e.jsx(v,{children:e.jsxs(C,{children:[e.jsx(N,{asChild:!0,children:e.jsx("div",{onClick:()=>a(),className:"flex w-full cursor-pointer flex-row justify-center p-4 hover:bg-white/5",children:e.jsx($,{size:40,className:"text-[#CCCCCC]"})})}),e.jsx(w,{align:"center",className:"bg-pos-primary-background",side:"right",sideOffset:0,children:e.jsx("span",{className:"p-2 text-white",children:"Log out"})})]})})},ce=()=>{const[a,s]=x.useState(""),{selectedInvoiceCode:r,setSelectedInvoiceCode:i}=Z();async function u(){return await G(a).then(c=>(Object.keys(c).length>1&&(S.success("Invoice found"),i(c)),console.log(c),c)).catch(c=>{i(void 0),S.error(c.message)})}return e.jsx(e.Fragment,{children:e.jsx(v,{children:e.jsxs(C,{children:[e.jsx(N,{asChild:!0,children:e.jsx("div",{className:"",children:e.jsxs(O,{children:[e.jsx(W,{asChild:!0,children:e.jsx(b,{onClick:()=>{},variant:"ghost",className:" h-[72px] w-[72px] rounded-none hover:bg-white/5",children:e.jsx(te,{className:" text-[#CCCCCC]",size:32})})}),e.jsxs(E,{className:"rounded-sm",onPointerDownOutside:l=>l.preventDefault(),children:[e.jsxs(U,{className:"items-start",children:[e.jsx(Y,{children:"Search Invoice Code"}),e.jsx(k,{children:"Search for an invoice code to return items"})]}),e.jsxs("form",{className:"flex flex-row gap-2",onSubmit:l=>{l.preventDefault()},children:[e.jsx(y,{placeholder:"IVC-123123",onChange:l=>s(l.target.value),defaultValue:"IVC-",autoFocus:!0,pattern:"IVC-[0-9]*"}),e.jsx(b,{type:"submit",onClick:()=>{u()},children:e.jsx(Q,{})})]}),r&&Object.keys(r).length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(h,{children:["Customer:"," ",r.customer.firstname+" "+r.customer.lastname]}),e.jsxs(h,{children:["Paid Amount:"," ",J(r.paid_amount)]}),e.jsxs(h,{children:["Created at:"," ",ee(r.created_at)]})]}),e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsx("div",{className:"flex flex-col",children:e.jsx(k,{className:"text-sm",children:"Requires admin to confirm return items"})}),e.jsx(F,{to:`/pos/return/${r.code}`,state:{invoice:r},children:e.jsx(b,{children:"Proceed Return"})})]})]})]})]})})}),e.jsx(w,{align:"center",className:"bg-pos-primary-background",side:"right",sideOffset:0,children:e.jsx("span",{className:"p-2 text-white",children:"Return Items"})})]})})})},be=({})=>{const{auth:a}=A();return console.log(a.role),e.jsx(e.Fragment,{children:e.jsxs("nav",{id:"navbar",className:"bg-pos-primary-background flex h-screen min-w-[52px] max-w-[80px] flex-col",children:[e.jsx("div",{children:e.jsxs("ul",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex justify-center p-3",children:e.jsx("img",{src:H,alt:"RoyalGlassSupply-Logo",className:"h-11 w-11 rounded-full bg-white p-1"})}),ne.map((s,r)=>{if(a.role&&s.navbarProps){if(s.allowedRoles.find(i=>i.includes(a.role.split("_")[0])))return e.jsx(le,{item:s},r)}else return null}),e.jsx(ce,{})]})}),e.jsx("div",{className:"mt-auto",children:e.jsx(oe,{})})]})})};export{je as A,ue as C,ge as M,be as N,pe as P,xe as a,fe as b,he as c,ye as d,me as e,re as u};
