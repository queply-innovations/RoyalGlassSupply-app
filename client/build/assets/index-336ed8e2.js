import{k as Qe,m as Ur,r as f,n as Vi,o as $i,p as qi,u as gt,e as je,q as $t,t as Ki,v as Yi,w as Bi,x as xl,y as Gi,z as Qi,D as Zi,E as Xi,G as Ji,H as ec,I as hl,J as tc,K as ac,L as Ze,j as e,R as sc,B as A,M as $e,W as rc,O as lt,C as dt,b as kt,Q as vt,U as jt,V as yt,X as bt,Y as tt,Z as pe,_ as fl,$ as nc,a0 as lc,a1 as la,a2 as ic,h as gr,a3 as pl,a4 as gl,a5 as vl,a6 as jl,a7 as oe,a8 as de,a9 as ue,aa as me,ab as V,ac as se,ad as ne,ae as Ut,af as T,ag as ft,ah as yl,ai as bl,aj as cc,ak as oc,al as dc,am as le,an as ba,ao as sa,ap as Ms,aq as ra,ar as ms,as as Pa,at as xs,au as Dt,av as Pt,aw as Tt,ax as Sa,ay as ia,az as uc,aA as ea,aB as St,aC as et,aD as R,aE as Hr,aF as Vr,aG as Ua,aH as Os,aI as Nl,aJ as wl,aK as ys,aL as _,aM as ot,aN as j,aO as vr,aP as hs,aQ as _l,T as Sl,aR as $r,aS as qr,aT as Na,aU as Kr,aV as Yr,aW as Me,aX as Br,aY as mc,aZ as Ws,a_ as xc,a$ as Cl,b0 as Ca,b1 as hc,b2 as fc,b3 as pc,b4 as gc,b5 as vc,b6 as jc,b7 as kl,b8 as Xa,b9 as bs,ba as Dl,bb as yc,bc,bd as Pl,be as Nc,bf as Gr,f as Qr,bg as Zr,bh as Xr,bi as wc,bj as _c,bk as kn,bl as Dn,bm as Pn,bn as Sc,bo as Tl,bp as Ol,bq as Cc,br as Tn,bs as kc,bt as Dc,bu as Pc,bv as Jr,bw as Tc,bx as Oc,by as Ac,bz as Al,bA as El,bB as Fl,bC as Il,bD as Ll,bE as Ec,bF as Fc,bG as Ic,bH as Lc,bI as en,bJ as Mc}from"./index-0960822e.js";import{bK as Sf}from"./index-0960822e.js";import{M as Ve,a as Nt,P as Ot,C as ka,b as Wc,c as Ha,u as zc,A as Rc,N as Ml,d as zs,g as Wl,e as Uc}from"./useInventoryProductCalculations-0cffd962.js";import{a as ge,I as Z,D as qe,A as ee,b as te,c as ae,u as Ee,f as Ct,d as Hc,e as Ae,h as Vc,i as $c,j as On,P as qc,k as Kc}from"./FormatCurrency-9342c788.js";import{F as tn,B as Ht,S as Yc,G as Bc}from"./GrossandNetProfit-f08bf563.js";const Gc=()=>{const t=Qe(),{warehouses:a}=Ur(),[r,s]=f.useState({id:a.length+1||0,code:"",name:"",location:""}),n=u=>{const{name:c,value:m}=u.target;s(x=>({...x,[c]:m}))},l={onSuccess:async()=>{await t.invalidateQueries({queryKey:["warehouses"]}),s({id:a.length+1||0,code:"",name:"",location:""})},onError:u=>{console.error("Warehouse Data failed",u)}},{mutateAsync:i}=ge({mutationKey:["removeWarehouse"],mutationFn:Vi,...l}),{mutateAsync:d}=ge({mutationKey:["addWarehouse"],mutationFn:$i,...l}),{mutateAsync:o}=ge({mutationKey:["updateWarehouse"],mutationFn:qi,...l});return{value:r,setValue:s,handleChange:n,removeWarehouseMutation:i,addWarehouseMutation:d,updateWarehouseMutation:o}},Qc=()=>{const t=Qe(),{transfers:a}=gt(),{auth:r}=je(),{warehouses:s}=$t(),n=a[0]?a[a.length-1].id+1:1,[l,i]=f.useState(!1),[d,o]=f.useState(!1),[u,c]=f.useState(null),[m,x]=f.useState(null),[h,g]=f.useState(null),[b,y]=f.useState(),[v,p]=f.useState(),[S,O]=f.useState(),[w,P]=f.useState({});f.useEffect(()=>{P(Y=>({...Y,approval_status:"pending",created_by:r.user.id,transfer_schedule:""}))},[]);const I=()=>{const Y=Object.keys(w).map(N=>({text:N})),H=Y.length===6||Y.length>6;if(H){const N=w.source!==w.destination;if(N){const B=w.transfer_schedule!=="";return B?[B,""]:[B,"Please fill up transfer schedule"]}else return[N,"You cannot have the same source and destination"]}else return[H,"Please fill up all fields"]},k=Y=>{i(!0),x(null),c(null),P(H=>({...H,[Y.target.name]:Y.target.value}))},C=(Y,H)=>{i(!0),x(null),c(null),g(H);const N=H.getMonth()+1<10?"0"+(H.getMonth()+1).toString():H.getMonth()+1,B=H.getDate()<10?"0"+H.getDate().toString():H.getDate();O(H.getFullYear()+""+N+B);const ie=H.getFullYear()+"-"+(H.getMonth()+1)+"-"+H.getDate()+" "+H.getHours()+":"+H.getMinutes()+":"+H.getSeconds();P(M=>({...M,transfer_schedule:ie}))},F=(Y,H)=>{var N,B;i(!0),x(null),c(null),P(ie=>({...ie,[Y]:H})),Y==="source"?y((N=s.find(ie=>ie.id===H))==null?void 0:N.code):p((B=s.find(ie=>ie.id===H))==null?void 0:B.code)},L=async()=>{if(b&&v&&S){const Y="TRF-"+b+"-"+v+"-"+S+"-"+n;P(H=>({...H,code:Y}))}};f.useEffect(()=>{async function Y(){if(w.code){const H=I();if(o(!0),H[0])return $(w);c(H[1]),o(!1)}}Y()},[w.code]);const W={onSuccess:async()=>{await t.invalidateQueries({queryKey:["transfers"]}),o(!1),i(!1),x("Transfer info has been added")},onError:Y=>{console.error(Y),c(Y.message),o(!1)}},{mutateAsync:$}=ge({mutationKey:["addTransfer"],mutationFn:Ki,...W});return{transfer:w,lastId:n,isChanged:l,isSubmitting:d,error:u,success:m,dateDisplay:h,handleSubmit:L,handleChange:k,handleChangeSelect:F,handleChangeDateTime:C,addTransferMutation:$}},zl=()=>{const t=Qe(),[a,r]=f.useState({}),s=(o,u)=>{r(c=>({...c,[o]:u}))},n=async o=>{if(console.log("Submitting: ",o),o.action==="add")return await i(o.data);if(o.action==="update")return await d({id:o.id,data:o.data});{const u="No data to submit. Function requires at least one parameter.";return console.error(u),{status:400,data:u}}},l={onSuccess:async()=>{await t.invalidateQueries({queryKey:["inventory"]})},onError:o=>{console.error("Inventory Data failed",o)}},{mutateAsync:i}=ge({mutationKey:["addInventory"],mutationFn:Yi,...l}),{mutateAsync:d}=ge({mutationKey:["patchInventory"],mutationFn:Bi,...l});return{value:a,setValue:r,handleChange:s,handleSubmit:n}},Rl=()=>{const t=Qe(),{transfers:a,transferProducts:r,selectedTransfer:s}=gt(),n=r.filter(q=>q.transfer_id===s.id),{auth:l}=je(),{warehouses:i}=$t(),[d,o]=f.useState(!1),[u,c]=f.useState(!1);f.useState(!1);const[m,x]=f.useState(!1);f.useState(!1);const[h,g]=f.useState(!1),{data:b}=xl(),[y,v]=f.useState(0),[p,S]=f.useState(!1),[O,w]=f.useState(!1),[P,I]=f.useState(null),[k,C]=f.useState(null),[F,L]=f.useState(new Date),[W,$]=f.useState(new Date),[Y,H]=f.useState(""),[N,B]=f.useState(),ie=a[a.length-1].id+1,[M,Q]=f.useState({});if(f.useEffect(()=>{s&&(Q({id:s.id,code:s.code,created_by:s.created_by.id,source:s.source.id,destination:s.destination.id,transfer_schedule:s.transfer_schedule,approval_status:s.approval_status,approved_by:s.approved_by?s.approved_by.id:null,transfer_status:s.transfer_status,date_received:s.date_received,received_by:s.received_by?s.received_by.id:null,notes:s.notes}),L(new Date(s.transfer_schedule)),s.date_received?$(new Date(s.date_received)):$(new Date(s.transfer_schedule)))},[s]),M.code==""){const q=M.transfer_schedule.split(" ")[0].split("-").join(""),G="TRF-"+s.source.code+"-"+s.destination.code+"-"+q+"-"+ie;Q(ye=>({...ye,code:G}))}const xe=()=>{const q=M.source!==M.destination;if(q){const G=M.transfer_status==="arrived"?!!(M.received_by&&M.date_received):!0;if(G)return[G,""];{const ye=`Fields you need to fill: ${M.received_by?"":"received by"} 
									${!M.date_received&&!M.received_by?" and ":""}
									${M.date_received?"":"date received"}`;return[G,ye]}}else return[q,"You cannot have the same source and destination"]},he=q=>{S(!0),C(null),I(null),Q(G=>({...G,[q.target.name]:q.target.value}))},fe=(q,G)=>{S(!0),C(null),I(null),H(q),B(G),q==="transfer_schedule"?L(G):$(G)};f.useEffect(()=>{async function q(){if(Y&&N){const G=N.getFullYear()+"-"+(N.getMonth()+1)+"-"+N.getDate()+" "+N.getHours()+":"+N.getMinutes()+":"+N.getSeconds();Q(ye=>({...ye,[Y]:G}))}}q()},[F,W]);const X=(q,G)=>{S(!0),C(null),I(null),Q(ye=>({...ye,[q]:G}))};f.useEffect(()=>{M.approval_status==="approved"?Q(q=>({...q,approved_by:l.user.id})):M.approval_status==="rejected"&&g(!0)},[M.approval_status]),f.useEffect(()=>{M.transfer_status==="arrived"?o(!0):o(!1)},[M.transfer_status]),f.useEffect(()=>{if(u){async function q(){const ye={code:"INV-"+i.filter(ut=>ut.id===M.destination)[0].code+"-TRA-"+s.code.split("-")[3]+"-"+(Number(b.length)+1).toString(),warehouse_id:M.destination,created_by:M.created_by,date_received:M.date_received,type:"transfer",transfer_id:M.id,notes:M.notes},Ne=await Ke(ye);v(Ne.data.data.id)}q()}},[u]);async function Te(){await Xi(n,y).then(async q=>{w(!1),S(!1),C("Transfer info has been edited")}).catch(q=>{throw console.error("Error updating inventory products:",q),q})}f.useEffect(()=>{y!=0&&Te()},[y]);const We=async()=>{const q=xe();if(w(!0),q[0])if(d)await Fe(M);else return await Fe(M);else I(q[1]),w(!1)},ze={onSuccess:async()=>{if(await t.invalidateQueries({queryKey:["transfers"]}),d)c(!0);else{if(h)return await be(n);w(!1),S(!1),C("Transfer info has been edited")}},onError:q=>{console.error(q),I(q.message),w(!1)}},{mutateAsync:Fe}=ge({mutationKey:["editTransfer"],mutationFn:Gi,...ze}),Pe={onSuccess:async()=>{await t.invalidateQueries({queryKey:["inventory"]}),x(!0)},onError:q=>{console.error(q),I(q.message),w(!1)}},{mutateAsync:Ke}=ge({mutationKey:["addInventory"],mutationFn:Qi,...Pe}),_e={onSuccess:async()=>{await t.invalidateQueries({queryKey:["transfer_products"]}),w(!1),S(!1),C("Transfer info has been edited")},onError:q=>{console.error(q),I(q.message),w(!1)}},{mutateAsync:be}=ge({mutationKey:["initInventoryProduct"],mutationFn:Zi,..._e});return{transfer:M,selectedTransfer:s,lastId:ie,isChanged:p,isSubmitting:O,error:P,success:k,dateDisplay:F,dateDisplayArrived:W,handleSubmit:We,handleChange:he,handleChangeSelect:X,handleChangeDateTime:fe,editTransferMutation:Fe}},fs=()=>{const t=Qe(),[a,r]=f.useState({}),s=(o,u)=>{r(c=>({...c,[o]:u}))},n=async o=>{if(console.log("Submitting: ",o),o.action==="add")return await i(o.data);if(o.action==="update")return await d({id:o.id,data:o.data});{const u="No data to submit. Function requires at least one parameter.";return console.error(u),{status:400,data:u}}},l={onSuccess:async()=>{await t.invalidateQueries({predicate:o=>["productPrices","productPricesTEST"].includes(o.queryKey[0])}),r({})},onError:o=>{console.error("Product Prices Data failed",o)}},{mutateAsync:i}=ge({mutationKey:["addProductListing"],mutationFn:Ji,...l}),{mutateAsync:d}=ge({mutationKey:["patchProductListing"],mutationFn:ec,...l});return{value:a,setValue:r,handleChange:s,handleSubmit:n,addProductPricesMutation:i,patchProductPricesMutation:d}},Zc=()=>{const t=Qe(),{transfers:a,transferProducts:r,selectedProduct:s,selectedTransfer:n}=gt();je();const{data:l}=hl(),{data:i}=tc(),{data:d}=xl(),o=d.filter(N=>N.warehouse.id===n.source.id),u=i.filter(N=>o.map(B=>B.id).includes(N.inventory_id)&&N.capital_price>0&&N.remaining_stocks_count&&N.remaining_stocks_count>0),[c,m]=f.useState(0),[x,h]=f.useState(0),[g,b]=f.useState(0),[y,v]=f.useState(!1),[p,S]=f.useState(!1),[O,w]=f.useState(null),[P,I]=f.useState(null),[k,C]=f.useState({});f.useEffect(()=>{C(N=>({...N,id:r.length+1,transfer_id:n.id}))},[]);const F=N=>{v(!0),I(null),w(null),C(B=>({...B,[N.target.name]:Number(N.target.value)}))},L=(N,B,ie)=>{v(!0),I(null),w(null);const M=u[ie],Q=M.id,xe=M.capital_price,he=M.bundles_unit,fe=M.unit,X=M.quantity_per_bundle;C(Te=>({...Te,[N]:B,capital_price:xe,bundles_unit:he,unit:fe,quantity_per_bundle:X,source_inventory:Q})),m(M.remaining_stocks_count?M.remaining_stocks_count/M.quantity_per_bundle:0),h(M.remaining_stocks_count?M.remaining_stocks_count:0),b(M.damage_count)};f.useEffect(()=>{k.bundles_count&&k.quantity_per_bundle?C(N=>({...N,total_quantity:k.bundles_count*k.quantity_per_bundle})):C(N=>({...N,total_quantity:0}))},[k]);const W=()=>{const B=Object.keys(k).map(ie=>({text:ie})).length===10;return B?k.bundles_count>c?[!1,"Bundles count input is greater than the current stock quantity."]:[!0,""]:[B,"Please fill up all fields"]},$=async()=>{S(!0);const N=W();if(N[0])return await H(k);w(N[1]),S(!1)},Y={onSuccess:async()=>{await t.invalidateQueries({queryKey:["transfer_products"]}),S(!1),v(!1),I("Transfer product has been added")},onError:N=>{console.error(N),w(N.message),S(!1)}},{mutateAsync:H}=ge({mutationKey:["addTransferProduct"],mutationFn:ac,...Y});return{product:k,allProducts:l,allInventoryProducts:i,filteredProductsSrc:u,bundlesLimit:c,quantityLimit:x,damagedCount:g,isChanged:y,isSubmitting:p,error:O,success:P,handleSubmit:$,handleChange:F,handleChangeSelect:L,addProductMutation:H}};/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Ze("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Ze("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Ze("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Ze("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Ze("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Ze("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Ze("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Ze("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Ze("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Ze("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Ze("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Ze("UserRoundPlus",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]),qt=t=>e.jsx(sc,{className:"flex loading",type:"spin",color:"#16A116",height:t.height,width:t.width}),io=({isUpdate:t=!1,onClose:a,isDelete:r})=>{const{warehouseSelected:s}=Ur(),{value:n,setValue:l,handleChange:i,addWarehouseMutation:d,updateWarehouseMutation:o,removeWarehouseMutation:u}=Gc();f.useEffect(()=>{(t||r)&&l(s)},[t,r,s,l]);const c=async()=>{console.log("warehouseForm:",n);try{await new Promise(m=>setTimeout(m,1e3)),t&&(console.log("Update Warehouse:",n.id),await o(n),a()),r?(console.log("Remove Warehouse:",n.id),await u(n.id),a()):!t&&!r&&(console.log("Add Warehouse:",n.id),await d(n),a())}catch(m){console.error("Warehouse Data submission failed",m)}};return e.jsx(e.Fragment,{children:r?e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:m=>{m.preventDefault(),c()},children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx(A,{type:"submit",fill:"red",children:r?"Delete Warehouse":"Add Warehouse"})})})}):e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:m=>{m.preventDefault(),c()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Warehouse ID"}),e.jsx(Z,{name:"id",value:(n==null?void 0:n.id)||0,type:"number",disabled:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Warehouse Code"}),e.jsx(Z,{name:"code",placeholder:"Warehouse Code",value:(n==null?void 0:n.code)||"",onChange:i,maxLength:3})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Warehouse Name"}),e.jsx(Z,{name:"name",placeholder:"Warehouse Name",value:(n==null?void 0:n.name)||"",onChange:i,required:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Warehouse Location"}),e.jsx(Z,{name:"location",placeholder:"Warehouse Location",type:"string",value:(n==null?void 0:n.location)||"",onChange:i,required:!0})]}),e.jsxs("div",{className:"flex flex-row justify-center gap-1",children:[e.jsx(A,{fill:"green",className:"",type:"submit",children:t?"Update Warehouse":"Add Warehouse"}),e.jsx(A,{fill:"red",className:"",onClick:a,type:"reset",children:"Cancel"}),e.jsx(A,{onClick:()=>console.log(n),type:"button",children:"console form"})]})]})})})})},co=({openModal:t})=>{const{warehouses:a,setWarehouseSelected:r,isFetching:s,progress:n}=Ur(),l=[{id:"select",header:({table:d})=>e.jsx("input",{type:"checkbox",checked:d.getIsAllPageRowsSelected(),onChange:o=>d.toggleAllPageRowsSelected(!!o.target.checked),"aria-label":"Select all"}),cell:({row:d})=>e.jsx("input",{type:"checkbox",checked:d.getIsSelected(),onChange:o=>d.toggleSelected(!!o.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"WAREHOUSE ID"}),cell:({row:d})=>e.jsx("div",{className:"text-center",children:d.original.id})},{accessorKey:"name",sortingFn:"text",enableSorting:!0,header:({column:d})=>e.jsx("div",{className:"items-center",children:e.jsxs(A,{onClick:()=>d.toggleSorting(d.getIsSorted()==="asc"),className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["WAREHOUSE NAME ",d.getIsSorted()==="asc"?e.jsx(ee,{}):d.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:d})=>e.jsx("div",{className:"text-center",children:d.original.name})},{accessorKey:"code",header:()=>e.jsx("div",{className:"text-center",children:"code"}),cell:({row:d})=>e.jsx("div",{className:"text-center",children:d.original.code})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-center",children:"LOCATION"}),cell:({row:d})=>e.jsx("div",{className:"text-center",children:d.original.location})},{id:"actions",header:()=>e.jsx("div",{className:"flex flex-row justify-center",children:"ACTIONS"}),cell:({row:d})=>{const o=d.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(A,{fill:"empty",textColor:"black",onClick:()=>i(o),className:"flex flex-row items-center gap-2",children:[e.jsx(tn,{})," Edit"]})})}}],i=d=>{r(d),t(d,"edit")};return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:l,filterWhat:"location",dataType:"",isLoading:s,openModal:void 0})})},rf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d),console.log("action",d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Warehouse",children:e.jsxs(rc,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(co,{openModal:l})})}),e.jsx(Ve,{isOpen:t,onClose:r,title:s==="edit"?"Edit Warehouse":s==="remove"?"Remove Warehouse":"Add Warehouse",children:e.jsx(io,{onClose:r,isUpdate:s==="edit",isDelete:s==="remove"})})]})})})},oo=({openModal:t})=>{const{invoices:a}=lt(),r=[{accessorKey:"code",sortingFn:"text",enableSorting:!0,header:({column:s})=>e.jsx(e.Fragment,{children:e.jsxs(A,{onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Code"," ",s.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):s.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"warehouse.code",sortingFn:"text",enableSorting:!0,header:({column:s})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Type"," ",s.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):s.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"type",sortingFn:"text",enableSorting:!0,header:({column:s})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Type"," ",s.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):s.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"status",sortingFn:"text",enableSorting:!0,enableResizing:!0,header:({column:s})=>e.jsx("div",{className:"mx-auto flex",children:e.jsxs(A,{onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Discount Status"," ",s.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):s.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})}),cell:({row:s})=>{const n=s.original.status;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"group relative flex w-fit items-center justify-center",children:[n==="approved"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):n==="rejected"?e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"}),e.jsx("span",{className:"absolute left-1/2 mx-auto -translate-x-1/2 -translate-y-7 rounded-md bg-gray-800 px-1 text-sm capitalize text-gray-100 opacity-0 transition-opacity group-hover:opacity-100",children:n})]})})}},{accessorKey:"total_amount_due",header:({column:s})=>e.jsx("span",{children:"Total Amount"}),cell:({row:s})=>Ct(s.original.total_amount_due)},{id:"actions",cell:({row:s})=>e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>{},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Hl,{size:16,strokeWidth:2})}),e.jsx("span",{children:"View Invoice Items"})]}),e.jsxs(pe,{onClick:()=>{},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]}),e.jsxs(pe,{onClick:()=>{},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]})]})]})}),enableGlobalFilter:!1}];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full rounded-lg border bg-white",children:e.jsx(qe,{columns:r,data:a,filterWhat:"code",dataType:"Invoices"})})})},nf=({})=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d),console.log("modalAction:",s)};return console.log(Hc()),e.jsx(e.Fragment,{children:e.jsx($e,{title:"Transactions",children:e.jsx(fl,{children:e.jsx(nc,{children:e.jsx("div",{className:"flex h-full max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"text-primary-dark-gray flex flex-row items-center gap-6 text-sm font-medium",children:e.jsx(oo,{openModal:l})})})})})})})},uo=(t,a)=>{const r=Qe(),[s,n]=f.useState({firstname:t.firstname,lastname:t.lastname,username:t.username,email:t.email,contact_no:t.contact_no,position:t.position,user_id:t.id,role_id:0});f.useEffect(()=>{a&&n(p=>{var S;return{...p,role_id:(S=a.find(O=>O.title===t.position))==null?void 0:S.id}})},[a]);const[l,i]=f.useState(!1),[d,o]=f.useState(!1),[u,c]=f.useState(null),[m,x]=f.useState(null),h=(p,S)=>{i(!0),x(null),c(null),n(O=>({...O,[p]:S}))},g=p=>{i(!0),x(null),n(S=>({...S,[p.target.name]:p.target.value})),p.target.name==="position"&&n(S=>{var O;return{...S,role_id:(O=a.find(w=>w.title===p.target.value))==null?void 0:O.id}})},b=async()=>{var p,S;if(o(!0),((p=s.contact_no)==null?void 0:p.length)>11||((S=s.contact_no)==null?void 0:S.length)<11)c("Contact number must be 11 digits"),o(!1);else return await v(s)},y={onSuccess:async()=>{await r.invalidateQueries({queryKey:["users"]}),o(!1),i(!1),x("User info has been updated")},onError:p=>{console.error(p),c(p.message),o(!1)}},{mutateAsync:v}=ge({mutationKey:["editUser"],mutationFn:lc,...y});return{user:s,isChanged:l,isSubmitting:d,error:u,success:m,handleSubmit:b,handleChangeSelect:h,handleChange:g,editUserMutation:v}},mo=()=>{const t=Qe(),{users:a}=la(),{roles:r}=la(),s=a[a.length-1].id+1,[n,l]=f.useState({});f.useEffect(()=>{l(S=>({...S,active_status:"active",id:s}))},[]);const[i,d]=f.useState(!1),[o,u]=f.useState(!1),[c,m]=f.useState(null),[x,h]=f.useState(null),g=()=>{var w,P;const O=Object.keys(n).map(I=>({text:I})).length===11;if(O){const I=n.password===n.password_confirmation;if(!I)return[I,"Passwords do not match"];const k=!(((w=n.contact_no)==null?void 0:w.length)>11||((P=n.contact_no)==null?void 0:P.length)<11);return k?[O&&I&&k,""]:[k,"Please input a valid contact number"]}else{const I=!!n.position;return I?[O,"Please correctly fill up all fields"]:[I,"Please choose a position"]}},b=S=>{d(!0),h(null),m(null),l(O=>({...O,[S.target.name]:S.target.value})),S.target.name==="position"&&l(O=>{var w;return{...O,role_id:(w=r.find(P=>P.title===S.target.value))==null?void 0:w.id}})},y=async()=>{const S=g();if(u(!0),S[0])return await p(n);m(S[1]),u(!1)},v={onSuccess:async()=>{await t.invalidateQueries({queryKey:["users"]}),u(!1),d(!1),h("User info has been added")},onError:S=>{console.error(S),m(S.message),u(!1)}},{mutateAsync:p}=ge({mutationKey:["addUser"],mutationFn:ic,...v});return{user:n,isChanged:i,isSubmitting:o,error:c,success:x,handleSubmit:y,handleChange:b,addUserMutation:p}},xo=()=>{const t=Qe(),{roles:a,selectedUser:r}=la(),s=a.filter(F=>F.title===r.position),[n,l]=f.useState([]),[i,d]=f.useState([]),[o,u]=f.useState([]),{data:c}=gr({queryKey:["all-permissions"],queryFn:()=>vl(),refetchOnWindowFocus:!1});f.useEffect(()=>{const F=c;F&&d(F)},[c]);const{isFetching:m,data:x}=gr({queryKey:["permissions"],queryFn:()=>jl(s[0].id),refetchOnWindowFocus:!1});f.useEffect(()=>{const F=x;F&&(l(F),u(F))},[x]);const[h,g]=f.useState(!1),[b,y]=f.useState(!1),[v,p]=f.useState(null),[S,O]=f.useState(null),w=(F,L)=>{g(!0),O(null),p(null),u(F?[...o,{id:null,role_id:s,permission_id:L}]:o.filter(W=>W.permission_id!==L))},P=async()=>{if(y(!0),o.length>n.length){const F=o.filter(L=>L.id===null);if(F.length>1)F.forEach(async L=>{await k(L)});else return await k(F)}else if(o.length<n.length){const F=n.filter(L=>o.find(W=>W.permission_id===L.permission_id)===void 0);if(F.length>1)F.forEach(async L=>{await C(L)});else return await C(F[0])}else y(!1),g(!1),O("No changes made")},I={onSuccess:async()=>{await t.invalidateQueries({queryKey:["all-permissions"]}),y(!1),g(!1),O("Role permissions have been updated")},onError:F=>{console.error(F),p(F.message),y(!1)}},{mutateAsync:k}=ge({mutationKey:["addpermission"],mutationFn:pl,...I}),{mutateAsync:C}=ge({mutationKey:["deletepermission"],mutationFn:gl,...I});return{permissions:n,allPermissions:i,permissionChange:o,isChanged:h,isSubmitting:b,error:v,success:S,handleSubmit:P,handleChange:w}},ho=()=>{const t=Qe(),{roles:a}=la(),[r,s]=f.useState(),[n,l]=f.useState(0);f.useState();const[i,d]=f.useState([]),[o,u]=f.useState([]),[c,m]=f.useState([]),{data:x}=gr({queryKey:["all-permissions"],queryFn:()=>vl(),refetchOnWindowFocus:!1});f.useEffect(()=>{const L=x;L&&u(L)},[x]);const[h,g]=f.useState(!1),[b,y]=f.useState(!1),[v,p]=f.useState(null),[S,O]=f.useState(null),w=(L,W)=>{O(null),p(null),s(a.find($=>$.title===W)),l(a.find($=>$.title===W).id)};f.useEffect(()=>{async function L(){const W=await jl(n);d(W),m(W)}L()},[n]);const P=(L,W)=>{g(!0),O(null),p(null),m(L?[...c,{id:null,role_id:n,permission_id:W}]:c.filter($=>$.permission_id!==W))},I=async()=>{if(y(!0),c.length>i.length){const L=c.filter(W=>W.id===null);if(L.length>1)L.forEach(async W=>{await C(W)});else return await C(L[0])}else if(c.length<i.length){const L=i.filter(W=>c.find($=>$.permission_id===W.permission_id)===void 0);if(L.length>1)L.forEach(async W=>{await F(W)});else return await F(L[0])}else y(!1),g(!1),O("No changes made")},k={onSuccess:async()=>{await t.invalidateQueries({queryKey:["all-permissions"]}),y(!1),g(!1),O("Role permissions have been updated")},onError:L=>{console.error(L),p(L.message),y(!1)}},{mutateAsync:C}=ge({mutationKey:["addpermission"],mutationFn:pl,...k}),{mutateAsync:F}=ge({mutationKey:["deletepermission"],mutationFn:gl,...k});return{roles:a,roleSelect:r,permissions:i,allPermissions:o,permissionChange:c,roleId:n,isChanged:h,isSubmitting:b,error:v,success:S,handleSubmit:I,handleChange:P,handleChangeSelect:w}},fo=({openModal:t})=>{const{users:a,isFetching:r,progress:s,progress2:n,setSelectedUser:l}=la(),i=c=>{l(c),t(c,"edit")},d=c=>{l(c),t(c,"editPerms")},o=()=>{t({},"add")},u=[{id:"select",header:({table:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsAllPageRowsSelected(),onChange:m=>c.toggleAllPageRowsSelected(!!m.target.checked),"aria-label":"Select all"}),cell:({row:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsSelected(),onChange:m=>c.toggleSelected(!!m.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"lastname",sortingFn:"text",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{c.toggleSorting(c.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["LAST NAME ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.lastname})},{accessorKey:"firstname",sortingFn:"text",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["FIRST NAME ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.firstname})},{accessorKey:"position",sortingFn:"text",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["ROLE ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.position})},{accessorKey:"username",header:()=>e.jsx("div",{className:"text-center",children:"USERNAME"}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.username})},{accessorKey:"email",header:()=>e.jsx("div",{className:"text-center",children:"EMAIL ADDRESS"}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.email})},{id:"actions",header:()=>e.jsx("div",{}),cell:({row:c})=>{const m=c.original;return e.jsx("div",{className:"flex flex-row text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>i(m),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit User"})]}),e.jsxs(pe,{onClick:()=>d(m),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit User Permission"})]})]})]})})}}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:u,filterWhat:"username",dataType:"User",openModal:o,isLoading:r})})},po=({onClose:t})=>{const{user:a,isChanged:r,isSubmitting:s,error:n,success:l,handleSubmit:i,handleChange:d}=mo(),{roles:o}=la(),u=o?o.map(c=>c.title):[];return l&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:c=>{c.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User ID"}),e.jsx(Z,{name:"id",value:a.id,type:"number",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User First Name"}),e.jsx(Z,{name:"firstname",placeholder:"User First Name",value:a.firstname||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Last Name"}),e.jsx(Z,{name:"lastname",placeholder:"User Last Name",value:a.lastname||"",onChange:d,required:!0})]})]}),e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Email Address"}),e.jsx(Z,{name:"email",placeholder:"User Email Address",type:"email",value:a.email||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Contact Number"}),e.jsx(Z,{name:"contact_no",placeholder:"User Contact Number",type:"number",value:a.contact_no||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Position"}),e.jsx(Yc,{name:"position",className:"text-lg",placeholder:"---Select Position---",onChange:d,options:u,required:!0})]})]}),e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Username"}),e.jsx(Z,{name:"username",placeholder:"User Username",type:"string",value:a.username||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"User Password"}),e.jsx(Z,{name:"password",placeholder:"User Password",type:"password",value:a.password||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Confirm Password"}),e.jsx(Z,{name:"password_confirmation",placeholder:"Confirm Password",type:"password",value:a.password_confirmation||"",onChange:d,required:!0})]})]}),e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-10 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:r?"green":null,disabled:!r,onClick:i,children:s?"Submitting":"Add User"})}),e.jsxs("div",{className:"flex flex-col col-span-5 items-start",children:[l&&e.jsx("div",{className:"font-bold text-green-700",children:l}),n&&e.jsx("div",{className:"font-bold text-red-700",children:n}),s?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})]})})})},go=({onClose:t})=>{const{selectedUser:a,roles:r}=la(),{auth:s}=je(),{user:n,isChanged:l,isSubmitting:i,error:d,success:o,handleSubmit:u,handleChange:c,handleChangeSelect:m}=uo(a,r);return o&&setTimeout(()=>{t()},1e3),e.jsxs(e.Fragment,{children:[a.id===s.user.id&&e.jsx("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-6 gap-4",children:e.jsxs("div",{className:"flex flex-col col-span-6 font-bold text-red-700 text-start",children:["Warning: Be careful! You are editing your own account.",e.jsx("br",{}),"You are at risk of locking yourself out."]})}),e.jsx("form",{onSubmit:async x=>{x.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"flex flex-col col-span-3 gap-3",children:[e.jsx("label",{htmlFor:"id",children:"User ID"}),e.jsx(Z,{type:"text",name:"id",placeholder:"User ID",className:"inputbox",value:n.user_id,disabled:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-3 gap-3",children:[e.jsx("label",{htmlFor:"firstname",children:"First name"}),e.jsx(Z,{type:"text",name:"firstname",placeholder:"First name",className:"inputbox rounded-md bg-slate-100",value:n.firstname,onChange:c})]}),e.jsxs("div",{className:"flex flex-col col-span-3 gap-3",children:[e.jsx("label",{htmlFor:"lastname",children:"Last name"}),e.jsx(Z,{type:"text",name:"lastname",placeholder:"Last name",className:"inputbox rounded-md bg-slate-100",value:n.lastname,onChange:c})]}),e.jsxs("div",{className:"flex flex-col col-span-3 gap-3",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx(Z,{type:"text",name:"username",placeholder:"Username",className:"inputbox rounded-md bg-slate-100",value:n.username,onChange:c})]})]}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Email address"}),e.jsx(Z,{type:"email",name:"email",placeholder:"Email address",className:"inputbox rounded-md bg-slate-100",value:n.email,onChange:c})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Contact number"}),e.jsx(Z,{type:"number",name:"contact_no",placeholder:"09XXXXXXXXX",className:"inputbox rounded-md bg-slate-100",value:n.contact_no,onChange:c})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"position",children:"Position"}),e.jsxs(oe,{onValueChange:x=>m("position",x),required:!0,children:[e.jsx(de,{name:"position",className:"flex flex-row items-center gap-3 truncate text-md rounded-md bg-slate-100",children:e.jsx(ue,{placeholder:n.position?n.position.charAt(0).toUpperCase()+n.position.slice(1):"Choose position..."})}),e.jsx(me,{className:"bg-white font-medium text-md",children:r.length>0?r.map(x=>{if(x.title!=="super_admin")return e.jsx(V,{value:x.title,children:x.title.charAt(0).toUpperCase()+x.title.slice(1)},x.id)}):e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})})})]})]})]}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-8 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:l?"green":null,disabled:!l,onClick:u,children:i?"Submitting":"Edit User"})}),e.jsxs("div",{className:"flex flex-col col-span-3 items-start",children:[o&&e.jsx("div",{className:"font-bold text-green-700",children:o}),d&&e.jsx("div",{className:"font-bold text-red-700",children:d}),i?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})]})})]})},vo=({onClose:t})=>{const{selectedUser:a}=la(),{permissions:r,allPermissions:s,permissionChange:n,isChanged:l,isSubmitting:i,error:d,success:o,handleChange:u,handleSubmit:c}=xo(),{auth:m}=je(),x=s.filter(y=>Object.keys(y).some(v=>!y.title.includes("view".toLowerCase())&&y.title.includes("users".toLowerCase()))),h=s.filter(y=>Object.keys(y).some(v=>!y.title.includes("view".toLowerCase())&&!y.title.includes("transfer".toLowerCase())&&y.title.includes("product".toLowerCase())||y.title.includes("catalog".toLowerCase()))),g=s.filter(y=>Object.keys(y).some(v=>!y.title.includes("view".toLowerCase())&&y.title.includes("transfer".toLowerCase()))),b=s.filter(y=>Object.keys(y).some(v=>y.title.includes("view".toLowerCase())));return o&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-auto flex h-72 w-full flex-row divide-x",children:[e.jsxs("div",{className:"flex w-60 flex-none flex-col p-2 pt-8",children:[e.jsx("h3",{className:"ml-4 pb-1 text-xs font-semibold text-slate-500/80",children:"Roles"}),e.jsx("div",{className:"w-full",children:e.jsx(ne,{variant:"ghost",className:"w-full justify-start capitalize text-slate-700 bg-slate-300/40",children:a.position.split("_").join(" ")},a.id+a.position)}),e.jsx("p",{className:"ml-4 pt-6 text-xs font-semibold text-slate-500/80",children:"After saving changes, affected users must log out and log back in to apply the changes."}),a.position===m.role&&e.jsx("p",{className:"ml-4 pt-6 text-xs font-semibold text-red-500/80",children:"You are editing your current role. Review your changes carefully."}),e.jsxs("div",{className:"mt-auto w-full space-y-3",children:[e.jsxs("div",{className:"text-sm font-semibold",children:[o&&e.jsx("p",{className:"text-green-600",children:o}),d&&e.jsx("p",{className:"text-red-600",children:d})]}),l&&e.jsx(ne,{type:"submit",className:"w-full disabled:cursor-not-allowed",disabled:!!i,onClick:c,children:i?"Saving...":"Save changes"})]})]}),e.jsx(Ut,{className:"w-full",type:"auto",style:{"--border":"216 12% 84%"},children:e.jsxs("div",{className:`mx-auto flex w-full max-w-[700px] flex-1 flex-col gap-8 p-6 pt-8 ${i?"pointer-events-none opacity-50":null}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"User Management"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:x.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):x.map(y=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:y.title,className:`${a.position!=="admin"&&"cursor-pointer"} text-sm capitalize text-slate-700`,children:y.title.split("_").join(" ")}),e.jsx(ft,{id:y.title,name:y.title,value:y.id,disabled:a.position==="admin",className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(v=>v.permission_id===y.id),onCheckedChange:v=>u(v,y.id)})]},y.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Products"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:h.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):h.map(y=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:y.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:y.title.split("_").join(" ")}),e.jsx(ft,{id:y.title,name:y.title,value:y.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(v=>v.permission_id===y.id),onCheckedChange:v=>u(v,y.id)})]},y.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Transfers"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:g.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):g.map(y=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:y.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:y.title.split("_").join(" ")}),e.jsx(ft,{id:y.title,name:y.title,value:y.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(v=>v.permission_id===y.id),onCheckedChange:v=>u(v,y.id)})]},y.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Views"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:b.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):b.map(y=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:y.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:y.title.split("_").join(" ")}),e.jsx(ft,{id:y.title,name:y.title,value:y.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(v=>v.permission_id===y.id),onCheckedChange:v=>u(v,y.id)})]},y.id))})]})]})})]})})},lf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"User Information",children:e.jsxs(yl,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(fo,{openModal:l})})}),e.jsx(Ve,{isOpen:t,onClose:r,title:s==="edit"?"Edit User":s==="add"?"Add User":"Edit User Role Permissions",children:e.jsxs(e.Fragment,{children:[s==="add"&&e.jsx(po,{onClose:r}),s==="edit"&&e.jsx(go,{onClose:r}),s==="editPerms"&&e.jsx(vo,{onClose:r})]})})]})})})},jo=()=>{const t=Qe(),{selectedSupplier:a,setSelectedSupplier:r}=bl(),[s,n]=f.useState({});f.useEffect(()=>{a&&n(a)},[a]);const[l,i]=f.useState({}),[d,o]=f.useState(!1),[u,c]=f.useState(!1),[m,x]=f.useState(null),[h,g]=f.useState(null),b=P=>{var I,k,C,F;if(P){const L=Object.keys(s).map($=>({text:$})),W=L.length===3||L.length>3;if(W){const $=!(((I=s.contact_no)==null?void 0:I.length)>11||((k=s.contact_no)==null?void 0:k.length)<11);return $?[$,""]:[$,"Contact number must be 11 digits"]}else return[W,"Please fill up all fields"]}else{const L=Object.keys(l).map($=>({text:$})),W=L.length===3||L.length>3;if(W){const $=!(((C=l.contact_no)==null?void 0:C.length)>11||((F=l.contact_no)==null?void 0:F.length)<11);return $?[$,""]:[$,"Contact number must be 11 digits"]}else return[W,"Please fill up all fields"]}},y=(P,I)=>{o(!0),g(null),x(null),I?n(k=>({...k,[P.target.name]:P.target.value})):i(k=>({...k,[P.target.name]:P.target.value}))},v=async P=>{const I=b(P);if(c(!0),I[0])return P?await S(s):await w(l);x(I[1]),c(!1),console.log(l)},p={onSuccess:async()=>{await t.invalidateQueries({queryKey:["supplier"]}),c(!1),o(!1),g("Supplier info has been edited")},onError:P=>{console.error(P),x(P.message),c(!1)}},{mutateAsync:S}=ge({mutationKey:["updateSupplier"],mutationFn:cc,...p}),O={onSuccess:async()=>{await t.invalidateQueries({queryKey:["supplier"]}),c(!1),o(!1),g("Supplier info has been added")},onError:P=>{console.error(P),x(P.message),c(!1)}},{mutateAsync:w}=ge({mutationKey:["addSupplier"],mutationFn:oc,...O});return{supplier:s,selectedSupplier:a,newSupplier:l,isChanged:d,isSubmitting:u,error:m,success:h,handleSubmit:v,handleChange:y,editSupplierMutation:S}},yo=({onClose:t,isUpdate:a})=>{const{supplier:r,newSupplier:s,isSubmitting:n,error:l,success:i,isChanged:d,handleChange:o,handleSubmit:u}=jo();return i&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:c=>{c.preventDefault()},children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:"name",children:"Supplier Name"}),e.jsx(Z,{type:"text",name:"name",placeholder:"Supplier Name",value:a?r.name||"":s.name||"",className:"inputbox rounded-md bg-slate-100",onChange:c=>o(c,a),required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:"contact_no",children:"Supplier Contact Number"}),e.jsx(Z,{type:"text",name:"contact_no",placeholder:"Supplier Contact Number",className:"inputbox rounded-md bg-slate-100",value:a?r.contact_no||"":s.contact_no||"",onChange:c=>o(c,a),required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:"address",children:"Supplier Address"}),e.jsx(Z,{type:"text",name:"address",placeholder:"Supplier Address",className:"inputbox rounded-md bg-slate-100",value:a?r.address||"":s.address||"",onChange:c=>o(c,a),required:!0})]})]}),e.jsx("div",{className:"flex flex-col mt-4 gap-5",children:e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-8 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:d?"green":null,disabled:!d,onClick:()=>u(a),children:n?"Submitting":a?"Edit Supplier":"Add Supplier"})}),e.jsxs("div",{className:"flex flex-col col-span-4 items-start",children:[i&&e.jsx("div",{className:"font-bold text-green-700",children:i}),l&&e.jsx("div",{className:"font-bold text-red-700",children:l}),n?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-2 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})})]})})},bo=({openModal:t})=>{const{suppliers:a,isFetching:r,progress:s,setSelectedSupplier:n}=bl(),l=()=>{t({},"add")},i=o=>{n(o),t(o,"edit")},d=[{id:"select",header:({table:o})=>e.jsx("input",{type:"checkbox",checked:o.getIsAllPageRowsSelected(),onChange:u=>o.toggleAllPageRowsSelected(!!u.target.checked),"aria-label":"Select all"}),cell:({row:o})=>e.jsx("input",{type:"checkbox",checked:o.getIsSelected(),onChange:u=>o.toggleSelected(!!u.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",sortingFn:"text",enableSorting:!0,header:({column:o})=>e.jsx("div",{className:"text-center",children:e.jsxs(A,{onClick:()=>o.toggleSorting(o.getIsSorted()==="asc"),className:"bg-transparent text-black flex flex-row ml-auto mr-auto items-center",children:["NAME ",o.getIsSorted()==="asc"?e.jsx(ee,{}):o.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:o})=>e.jsx("div",{className:"text-center",children:o.original.name})},{accessorKey:"contact_no",header:()=>e.jsx("div",{className:"text-center",children:"CONTACT NUMBER"}),cell:({row:o})=>e.jsx("div",{className:"text-center",children:o.original.contact_no})},{accessorKey:"address",header:()=>e.jsx("div",{className:"text-center",children:"ADDRESS"}),cell:({row:o})=>e.jsx("div",{className:"text-center",children:o.original.address})},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"ACTION"}),cell:({row:o})=>{const u=o.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(A,{fill:"empty",textColor:"black",onClick:()=>i(u),className:"flex flex-row items-center gap-2",children:[e.jsx(tn,{})," Edit"]})})}}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:d,filterWhat:"address",dataType:"Supplier",openModal:l,isLoading:r})})},cf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d),console.log("action",d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Supplier",children:e.jsxs(dc,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(bo,{openModal:l})})}),e.jsx(Ve,{isOpen:t,onClose:r,title:s==="edit"?"Edit Supplier":"Add Supplier",children:e.jsx(e.Fragment,{children:e.jsx(yo,{onClose:r,isUpdate:s==="edit"})})})]})})})},No=({handleEditProduct:t})=>[{id:"select",header:({table:r})=>e.jsx("input",{type:"checkbox",checked:r.getIsAllPageRowsSelected(),onChange:s=>r.toggleAllPageRowsSelected(!!s.target.checked),"aria-label":"Select all"}),cell:({row:r})=>e.jsx("input",{type:"checkbox",checked:r.getIsSelected(),onChange:s=>r.toggleSelected(!!s.target.checked),"aria-label":"Select row",className:"justify-center"})},{accessorKey:"serial_no",sortingFn:"text",enableSorting:!0,header:({column:r})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Serial Number"," ",r.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):r.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{id:"name",accessorKey:"name",sortingFn:"text",enableSorting:!0,header:({column:r})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Name"," ",r.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):r.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"brand",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Brand"})},{accessorKey:"size",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Size"})},{accessorKey:"color",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Color"})},{accessorKey:"notes",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Notes"})},{id:"actions",cell:({row:r})=>{const s=r.original;return e.jsx("div",{className:"flex flex-row justify-end text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>t(s),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{className:"font-medium",children:"Edit"})]})]})]})})},enableGlobalFilter:!1}],wo=({handleProdPriceDetails:t,handleEditProdPrice:a,handleToggleActiveStatus:r})=>[{id:"select",header:({table:n})=>e.jsx("input",{type:"checkbox",checked:n.getIsAllPageRowsSelected(),onChange:l=>n.toggleAllPageRowsSelected(!!l.target.checked),"aria-label":"Select all"}),cell:({row:n})=>e.jsx("input",{type:"checkbox",checked:n.getIsSelected(),onChange:l=>n.toggleSelected(!!l.target.checked),"aria-label":"Select row",className:"justify-center"})},{id:"name",accessorKey:"product.name",sortingFn:"text",enableSorting:!0,header:({column:n})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Name"," ",n.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):n.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"warehouse.code",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"WHS"})},{accessorKey:"unit",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Unit"})},{accessorKey:"capital_price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Capital"}),cell:({row:n})=>{const l=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n.original.capital_price);return e.jsx("div",{className:"flex items-center uppercase",children:e.jsx("span",{children:n.original.capital_price?l:""})})}},{accessorKey:"markup_price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Markup"}),cell:({row:n})=>{const l=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n.original.markup_price||0),i=le(n.original.markup_price/n.original.capital_price*100,{precision:3}).value;return e.jsxs("div",{className:"flex items-center uppercase",children:[e.jsx("span",{children:l}),e.jsxs("span",{className:"text-gray-500",children:["(",i,"%)"]})]})}},{accessorKey:"sale_discount",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Discount"}),cell:({row:n})=>{const l=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n.original.sale_discount||0);return e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:n.original.on_sale?l:e.jsx("div",{className:"group relative flex w-fit items-center",children:e.jsxs(ba,{children:[e.jsx(sa,{children:e.jsx(Ms,{size:20,strokeWidth:2,className:"text-gray-700"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium normal-case",children:"Not on sale"})})]})})})})}},{accessorKey:"price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Price"}),cell:({row:n})=>{const l=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n.original.price);return e.jsx("div",{className:"flex items-center uppercase",children:e.jsx("span",{children:n.original.price?l:""})})}},{accessorKey:"approval_status",sortingFn:"basic",enableSorting:!0,header:({column:n})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Approval"," ",n.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):n.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})}),cell:({row:n})=>{const l=n.original.approval_status;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"group relative mx-auto flex w-fit items-center justify-center",children:e.jsxs(ba,{children:[e.jsx(sa,{children:l==="approved"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):l==="rejected"?e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium capitalize",children:l})})]})})})}},{accessorKey:"active_status",sortingFn:"basic",enableSorting:!0,header:({column:n})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Active"," ",n.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):n.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})}),cell:({row:n})=>{const l=n.original.active_status;return e.jsx("div",{className:"group relative mx-auto flex w-fit items-center justify-center",children:e.jsxs(ba,{children:[e.jsx(sa,{children:l==="active"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(ss,{size:20,strokeWidth:2,className:"text-gray-600"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium capitalize",children:l})})]})})},enableGlobalFilter:!1},{id:"actions",cell:({row:n})=>{const l=n.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>t(l),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]}),e.jsxs(pe,{onClick:()=>a(l),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]}),e.jsx(tt,{className:"bg-gray-200"}),e.jsx(pe,{onClick:()=>r(l),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:l.active_status?l.active_status==="active"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(ss,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Set inactive"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(ka,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Set active"})]}):e.jsx("div",{})})]})]})})},enableGlobalFilter:!1}],_o=({openModal:t})=>{const{auth:a}=je(),{data:r,isLoading:s,setSelectedProduct:n}=ms(),l=()=>{t({},"add")},i=d=>{n(d),t(d,"edit")};return e.jsx(e.Fragment,{children:e.jsx(qe,{columns:(a==null?void 0:a.role)==="super_admin"||(a==null?void 0:a.role)==="admin"?No({handleEditProduct:i}):Wc,data:r,filterWhat:"name",dataType:"Product",openModal:l,isLoading:s})})},So=({openModal:t,isModalOpen:a,filterWarehouse:r})=>{const{data:s,isLoading:n,setSelectedProductPrice:l}=Pa(),i=()=>{t({},"add")},d=c=>{l(c),t(c,"details")},o=c=>{l(c),t(c,"edit")},u=c=>{l(c),t(c,"toggle_active_stat")};return e.jsx(e.Fragment,{children:e.jsx(xs,{children:e.jsx(qe,{columns:wo({handleProdPriceDetails:d,handleEditProdPrice:o,handleToggleActiveStatus:u}),data:r?s.filter(c=>c.warehouse.id===r):s,filterWhat:"name",dataType:"Listing",openModal:i,isLoading:n})})})},Co=()=>{const{selectedProductPrice:t}=Pa();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-4 font-medium",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Brand"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.brand||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Serial number"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.serial_no})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Unit"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.unit})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Size"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.size})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Color"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.color})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Warehouse"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.warehouse.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Capital price"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.capital_price)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Markup percent"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[le(t.markup_price/t.capital_price*100,{precision:3}).value,"%"]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Markup price"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.markup_price)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Cost"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.cost)})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Sale discount"}),e.jsx("p",{className:"text-sm",children:t.on_sale===1?Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.sale_discount):""}),e.jsxs("div",{className:"absolute bottom-0 right-0 flex flex-none flex-row items-center justify-end gap-1 pb-[0.1rem] pr-1",children:[t.on_sale===1?e.jsx(dt,{size:14,strokeWidth:3.5,className:"text-green-600"}):e.jsx(Ms,{size:14,strokeWidth:3.5,className:"text-gray-600"}),e.jsx("div",{className:"text-xs font-semibold leading-4 text-gray-900",children:"On Sale"})]})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Price"}),e.jsx("p",{className:"text-sm",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.price)})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Active status"}),e.jsxs("span",{className:"flex flex-row items-center gap-2",children:[t.active_status==="active"?e.jsx(ka,{size:16,strokeWidth:2.5,className:"text-green-600"}):e.jsx(ss,{size:16,strokeWidth:2.5,className:"text-gray-600"}),e.jsx("p",{className:"text-sm capitalize text-gray-800",children:t.active_status})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created by"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.created_by.firstname+" "+t.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(t.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approval status"}),e.jsx("p",{className:"text-sm capitalize",children:t.approval_status})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approved by"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.approved_by?t.approved_by.firstname+" "+t.approved_by.firstname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Updated at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(t.updated_at)})]})]})]})})},ko=({onClose:t})=>{const{patchProductPricesMutation:a}=fs(),{selectedProductPrice:r}=Pa(),[s,n]=f.useState(!1),[l,i]=f.useState(null),d=async()=>(n(!s),a({id:r.id,data:{active_status:r.active_status==="active"?"inactive":"active"}}));return e.jsxs("div",{className:"flex min-w-max flex-col gap-3",children:[e.jsxs("h2",{className:"text-sm text-gray-800",children:["Are you sure you'd like to set this listing to"," ",e.jsx("strong",{children:r.active_status==="active"?"inactive":"active"}),"?"]}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Name"}),e.jsx("p",{className:"text-sm",children:r.product.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Product ID"}),e.jsx("p",{className:"text-sm",children:r.product.id})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Listing ID"}),e.jsx("p",{className:"text-sm",children:r.id})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Size"}),e.jsx("p",{className:"text-sm",children:r.product.size})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Color"}),e.jsx("p",{className:"text-sm",children:r.product.color})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsx("p",{className:"text-sm",children:r.warehouse.code})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Type"}),e.jsx("p",{className:"text-sm capitalize",children:r.type})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx("p",{className:"text-sm",children:r.unit})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Stocks quantity"}),e.jsx("p",{className:"text-sm",children:r.stocks_quantity})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Stocks unit"}),e.jsx("p",{className:"text-sm",children:r.stocks_unit})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Price"}),e.jsx("p",{className:"text-sm",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(r.price)})]})]}),e.jsx("div",{className:"flex w-full flex-row justify-between pt-4",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4 whitespace-nowrap",children:[e.jsx(A,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-gray-700 hover:text-white",onClick:t,children:"Cancel"}),e.jsx(A,{fill:"green",onClick:async()=>{(await d()).status===200?t():i("Failed to update active status")},disabled:s,className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:s?"Applying...":`Set to ${r.active_status==="active"?"inactive":"active"}`})]})}),l&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:l})})]})},Do=({warehouses:t,selectedWarehouse:a,setSelectedWarehouse:r,setOpenedTab:s,onClose:n})=>{const{data:l,selectedProduct:i,setSelectedProduct:d,isLoading:o}=ms(),{data:u}=Pa(),[c,m]=f.useState(!1),[x,h]=f.useState();return f.useEffect(()=>{if(a){const g=u.filter(y=>y.warehouse.id===(a==null?void 0:a.id)),b=[...new Set(g.map(y=>y.product.id))];h(l==null?void 0:l.filter(y=>!b.includes(y.id)))}},[a]),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"warehouse",className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsxs(oe,{required:!0,value:a==null?void 0:a.id.toString(),onValueChange:g=>{r(t==null?void 0:t.find(b=>b.id===Number(g))),d(void 0)},children:[e.jsx(de,{id:"warehouse",name:"warehouse",className:"flex flex-row items-center gap-3 truncate bg-white text-sm font-bold text-slate-600",children:e.jsx(ue,{placeholder:"Choose warehouse..."})}),e.jsx(me,{className:"bg-white font-medium",children:t?t.map(g=>e.jsx(V,{value:g.id.toString(),className:"text-sm font-medium text-slate-700",children:g.name},g.code)):e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})})})]})]}),e.jsxs("div",{className:"col-span-8 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"product",className:"text-sm font-bold text-gray-600",children:"Product"}),e.jsxs(Dt,{open:c,onOpenChange:m,children:[e.jsx(Pt,{id:"product",name:"product",className:"relative w-full",disabled:!a,asChild:!0,children:e.jsxs(ne,{role:"combobox",className:"justify-between truncate bg-white text-sm font-bold text-slate-600",variant:"outline",children:[i?e.jsx("div",{className:"font-bold text-slate-600",children:i.name}):e.jsx("span",{children:"Select a product..."}),e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"w-[442px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{value:i?i.id+i.name+i.serial_no:"",children:[e.jsx(ia,{placeholder:"Product name..."}),o&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsxs(Ut,{className:"max-h-[200px] overflow-y-scroll",children:[(x==null?void 0:x.length)===0&&e.jsxs("div",{className:"flex h-16 w-full items-center justify-center pt-2",children:["No products.",e.jsx(uc,{to:"/products",className:"underline",children:"Add a product"})]}),e.jsx(ea,{children:x&&x.map(g=>e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",value:g.id+g.name+g.serial_no,onSelect:()=>{d(g),m(!1)},children:[e.jsxs("span",{children:[g.name,g.brand&&e.jsxs("span",{children:[" (",g.brand,")"]})]}),e.jsx("span",{className:"text-xs font-semibold text-slate-700/50",children:g.serial_no})]},g.id+g.name+g.serial_no))})]})]})})]})]}),i&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-span-12 grid grid-flow-row grid-cols-12 gap-4 text-sm text-slate-700",children:[e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Serial Number"}),e.jsx("p",{className:"font-medium",children:i.serial_no})]}),e.jsxs("div",{className:"col-span-3 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Brand"}),e.jsx("p",{className:"font-medium",children:(i==null?void 0:i.brand)||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-2 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Size"}),e.jsx("p",{className:"font-medium",children:i.size})]}),e.jsxs("div",{className:"col-span-2 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Color"}),e.jsx("p",{className:"font-medium",children:i.color})]}),e.jsxs("div",{className:"col-span-12 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Notes"}),e.jsx("p",{className:"font-medium",children:i.notes||e.jsx("span",{className:"opacity-70",children:"No notes provided"})})]})]})}),e.jsx("hr",{className:"col-span-12 border-t border-slate-200"}),e.jsx("p",{className:"col-span-12 text-sm font-medium text-slate-700",children:"You can only add a product price/listing to a warehouse once. If the product is not in the list, it is likely that it already has a listing for that warehouse."}),e.jsx("div",{className:"col-span-12 flex w-full justify-between whitespace-nowrap pt-4",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{fill:"default",onClick:()=>{n(),d(void 0)},className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",children:"Cancel"}),e.jsx(A,{fill:"green",disabled:!i,onClick:()=>s("listings"),className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:"Proceed"})]})})]})},rs=(t,a,r=2)=>le(a/t*100,{precision:r}).value,Va=(t,a,r=2)=>le(le(t).multiply(a/100),{precision:r}).value,$a=(t,a,r=2)=>le(le(t).add(a),{precision:r}).value,rn=(t,a,r=2)=>le(le(t).subtract(a),{precision:r}).value,Po=({selectedWarehouse:t,setOpenedTab:a,onClose:r})=>{var I;const{auth:s}=je(),{selectedProduct:n,setSelectedProduct:l}=ms(),{value:i,setValue:d,handleChange:o,handleSubmit:u}=fs(),[c,m]=f.useState(!1),[x,h]=f.useState(null);f.useEffect(()=>{d(k=>({...k,product_id:n==null?void 0:n.id,warehouse_id:t.id,unit:"pcs",active_status:"active",approval_status:"pending",created_by:s.user.id,on_sale:0,sale_discount:0}))},[]);const[g,b]=f.useState(0),[y,v]=f.useState(10),[p,S]=f.useState(0),O=k=>{const C=k.target.value;b(le(C).value),o("capital_price",le(C).value),S(Va(le(C).value,y))},w=k=>{const C=Number(k.target.value);v(C),S(Va(g,C))},P=k=>{const C=le(k.target.value).value;S(C),v(rs(g,C,3))};return f.useEffect(()=>{o("capital_price",g),o("markup_price",p),o("cost",$a(g,p))},[g,y,p]),f.useEffect(()=>{o("price",rn(i.cost??0,i.sale_discount??0))},[i.cost,i.sale_discount]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:k=>{m(!c),k.preventDefault(),u({action:"add",data:i}).then(()=>{m(!c),l(void 0),et.success("Product listing added successfully"),r()}).catch(()=>{m(!c),h("Failed to add product listing"),et.error("Failed to add product listing")})},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3 font-medium",children:[e.jsx("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-x-3 gap-y-5",children:e.jsxs("div",{className:"col-span-12 grid grid-flow-row grid-cols-12 gap-4 text-sm text-slate-700",children:[e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Name"}),e.jsx("p",{className:"font-medium",children:n==null?void 0:n.name})]}),e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Serial Number"}),e.jsx("p",{className:"font-medium",children:n==null?void 0:n.serial_no})]}),e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Brand"}),e.jsx("p",{className:"font-medium",children:(n==null?void 0:n.brand)||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(R,{id:"unit",name:"unit",type:"text",maxLength:20,required:!0,value:i.unit||"",onChange:k=>{o("unit",k.target.value)}})]}),e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Size"}),e.jsx("p",{className:"font-medium",children:n==null?void 0:n.size})]}),e.jsxs("div",{className:"col-span-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Color"}),e.jsx("p",{className:"font-medium",children:n==null?void 0:n.color})]})]})}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-3",children:[e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(R,{id:"capital_price",name:"capital_price",type:"number",inputMode:"numeric",min:0,step:.01,required:!0,autoFocus:!0,className:"pl-7",value:g||"",onChange:O,onBlur:k=>{k.target.value=Number(g||0).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_percent",className:"text-sm font-bold text-gray-600",children:"Markup percent"}),e.jsx(R,{id:"markup_percent",name:"markup_percent",type:"number",inputMode:"numeric",min:0,max:1e3,step:.001,required:!0,value:y||"",onChange:w,onBlur:k=>{k.target.value=le(y,{precision:3}).value.toString()}}),e.jsx("span",{className:"absolute bottom-0 right-0 mr-2 -translate-y-1/2 text-sm font-semibold text-gray-500",children:"%"})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_price",className:"text-sm font-bold text-gray-600",children:"Markup price"}),e.jsx(R,{id:"markup_price",name:"markup_price",type:"number",min:0,step:.01,className:"pl-7",value:p||"",onChange:P,onBlur:k=>{k.target.value=Number(p).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"cost",className:"text-sm font-bold text-gray-600",children:"Cost"}),e.jsx(R,{id:"cost",name:"cost",type:"number",min:0,required:!0,className:"pl-7",readOnly:!0,value:$a(g,p).toFixed(2)||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"sale_discount",className:"text-sm font-bold text-gray-600",children:"Sale discount"}),e.jsx(R,{id:"sale_discount",name:"sale_discount",type:"number",inputMode:"numeric",min:0,max:i.cost||0,step:.01,disabled:i.on_sale===void 0?!0:i.on_sale===0,required:!0,className:"pl-7",value:i.sale_discount||"",onChange:k=>{o("sale_discount",le(k.target.value).value)},onBlur:k=>{k.target.value=Number(i.sale_discount).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""}),e.jsxs("div",{className:"absolute right-0 top-1/2 mr-2 flex flex-none translate-y-1/4 flex-row items-center justify-start gap-2",children:[e.jsx(R,{name:"on_sale",id:"on_sale",type:"checkbox",className:"h-4 w-fit",checked:!!i.on_sale,onChange:k=>{o("on_sale",k.target.checked?1:0),o("sale_discount",0)}}),e.jsx(T,{htmlFor:"on_sale",className:"text-xs font-bold text-slate-700",children:"On Sale"})]})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"price",className:"text-sm font-bold text-gray-600",children:"Price"}),e.jsx(R,{id:"price",name:"price",type:"number",min:0,step:.01,required:!0,readOnly:!0,className:"pl-7",value:((I=i.price)==null?void 0:I.toFixed(2))||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4 flex flex-row items-center justify-start gap-3",children:[e.jsx(ft,{id:"active_status",name:"active_status",className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:i.active_status==="active"||!1,onCheckedChange:k=>{o("active_status",k?"active":"inactive")}}),e.jsx(T,{htmlFor:"active_status",className:"text-sm font-bold text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"approval_status",className:"text-sm font-bold text-gray-600",children:"Approval status"}),e.jsxs(oe,{defaultValue:"pending",value:i.approval_status||"",onValueChange:k=>{o("approval_status",k),k==="approved"&&o("approved_by",s.user.id)},required:!0,children:[e.jsx(de,{name:"approval_status",className:"flex flex-row items-center gap-3 bg-white text-sm capitalize",children:e.jsx(ue,{placeholder:"pending"})}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{className:"rounded-md",value:"pending",children:"Pending"},"pending"),e.jsx(V,{className:"rounded-md",value:"approved",children:"Approved"},"approved")]})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"created_by",className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsx(R,{name:"created_by",className:"text-sm disabled:pointer-events-none",readOnly:!0,disabled:!0,value:s.user?s.user.firstname+" "+s.user.lastname:""})]})]}),e.jsxs("div",{className:"flex w-full flex-row justify-between whitespace-nowrap pt-4",children:[e.jsx(A,{fill:"default",onClick:()=>a("product"),className:"flex-0 py-2 text-sm font-bold text-slate-700 hover:text-white",children:"Go back"}),e.jsx(A,{type:"submit",fill:"green",disabled:c,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:c?"Submitting...":"Add listing"})]}),x&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:x})})]})})})},To=({onClose:t})=>{const{warehouses:a}=$t(),[r,s]=f.useState(),{selectedProduct:n}=ms(),[l,i]=f.useState("product");return e.jsx(e.Fragment,{children:e.jsxs(Hr,{defaultValue:"product",className:"min-w-[42rem] max-w-2xl space-y-4",value:l,onValueChange:d=>i(d),children:[e.jsxs(Vr,{className:"grid h-fit w-full grid-flow-row grid-cols-2 rounded-md bg-slate-200/50",children:[e.jsx(Ua,{value:"product",className:"rounded-md py-1 text-sm font-semibold text-slate-700",children:"Product"}),e.jsx(Ua,{disabled:!n,value:"listings",className:"rounded-md py-1 text-sm font-semibold text-slate-700 disabled:cursor-not-allowed disabled:opacity-50",children:"Listing"})]}),e.jsx(Os,{value:"product",children:e.jsx(Do,{warehouses:a,selectedWarehouse:r,setSelectedWarehouse:s,setOpenedTab:i,onClose:t})}),e.jsx(Os,{value:"listings",children:n&&e.jsx(Po,{selectedWarehouse:r||{},setOpenedTab:i,onClose:t})})]})})},Oo=({onClose:t})=>{const{value:a,handleChange:r,handleSubmit:s}=zc(),{selectedProduct:n}=ms(),[l,i]=f.useState(!1),[d,o]=f.useState(null),[u,c]=f.useState(),m=(x,h,g,b)=>{g.test(x.target.value)?(x.target.value=x.target.value,r(h,x.target.value),c(void 0)):c({type:h,error:b})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async x=>{i(!l),x.preventDefault();const h=await s({action:"update",id:n.id,data:a});(h==null?void 0:h.status)===200?(i(!l),t()):(i(!l),o("Failed to update product"))},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-12 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"serial_no",className:"text-sm font-bold text-gray-600",children:"Serial number"}),e.jsx(R,{id:"serial_no",name:"serial_no",type:"text",maxLength:100,required:!0,placeholder:"Serial number...",value:a.serial_no!==void 0?a.serial_no:n.serial_no||"",onChange:x=>{m(x,"serial_no",/^[a-zA-Z0-9-]{0,100}$/,"Must only contain A-Z, 0-9, and -")}}),e.jsx("span",{hidden:!(u&&u.type==="serial_no"),className:"text-xs font-bold text-red-600",children:u==null?void 0:u.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"name",className:"text-sm font-bold text-gray-600",children:"Name"}),e.jsx(R,{id:"name",name:"name",type:"text",maxLength:100,required:!0,placeholder:"Product name...",value:a.name!==void 0?a.name:n.name||"",onChange:x=>{m(x,"name",/^[0-9a-zA-Z\s\-.,/+:_=]{0,100}$/,"Must only contain alphanumeric and limited special characters")}})," ",e.jsx("span",{hidden:!(u&&u.type==="name"),className:"max-w-[225px] text-xs font-bold text-red-600",children:u==null?void 0:u.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"brand",className:"text-sm font-bold text-gray-600",children:"Brand"}),e.jsx(R,{id:"brand",name:"brand",type:"text",maxLength:100,required:!0,placeholder:"Brand...",value:a.brand!==void 0?a.brand:n.brand||"",onChange:x=>{m(x,"brand",/^[0-9a-zA-Z\s\-.,/+:_=]{0,100}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(u&&u.type==="brand"),className:"max-w-[225px] text-xs font-bold text-red-600",children:u==null?void 0:u.error})]}),e.jsx("hr",{className:"col-span-12 my-3 border-t border-slate-200"}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"size",className:"text-sm font-bold text-gray-600",children:"Size"}),e.jsx(R,{id:"size",name:"size",type:"text",maxLength:100,required:!0,placeholder:"e.g. medium...",value:a.size!==void 0?a.size:n.size||"",onChange:x=>{m(x,"size",/^[0-9a-zA-Z\s\-.,/+:_="']{0,100}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(u&&u.type==="size"),className:"max-w-[225px] text-xs font-bold text-red-600",children:u==null?void 0:u.error})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"color",className:"text-sm font-bold text-gray-600",children:"Color"}),e.jsx(R,{id:"color",name:"color",type:"text",maxLength:40,required:!0,placeholder:"e.g. white...",value:a.color!==void 0?a.color:n.color||"",onChange:x=>{m(x,"color",/^[0-9a-zA-Z\s\-.,/+:_="']{0,40}$/,"Must only contain alphanumeric and limited special characters")}}),e.jsx("span",{hidden:!(u&&u.type==="color"),className:"max-w-[225px] text-xs font-bold text-red-600",children:u==null?void 0:u.error})]}),e.jsxs("div",{className:"col-span-12 flex flex-col justify-start gap-1",children:[e.jsx(T,{htmlFor:"notes",className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(R,{id:"notes",name:"notes",type:"text",placeholder:"Type product notes here...",defaultValue:a.notes!==void 0?a.notes:n.notes||"",onBlur:x=>r("notes",x.target.value)})]})]}),e.jsxs("div",{className:"ml-auto flex flex-row gap-4 whitespace-nowrap",children:[e.jsx(A,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-gray-700 hover:text-white",onClick:t,children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:l||Object.keys(a).length===0||u!==void 0||a.name===""||a.serial_no==="",className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:l?"Applying...":"Apply changes"})]}),d&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:d})})]})})})},of=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Products",children:e.jsxs(Nl,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(_o,{openModal:l})})}),e.jsx(Ve,{isOpen:t,onClose:r,title:s==="add"?"Add Product":"Edit Product",children:e.jsxs(e.Fragment,{children:[s==="add"&&e.jsx(Rc,{onClose:r}),s==="edit"&&e.jsx(Oo,{onClose:r})]})})]})})})},Ao=({onClose:t})=>{var S,O;const{auth:a}=je(),{selectedProductPrice:r}=Pa(),{value:s,handleChange:n,handleSubmit:l}=fs(),[i,d]=f.useState(!1),[o,u]=f.useState(null),[c,m]=f.useState(r.capital_price),[x,h]=f.useState(rs(r.capital_price,r.markup_price,3)),[g,b]=f.useState(r.markup_price),y=w=>{const P=w.target.value;m(le(P).value),n("capital_price",le(P).value),b(Va(le(P).value,x||0))},v=w=>{const P=Number(w.target.value);h(P),b(Va(c,P))},p=w=>{const P=le(w.target.value).value;b(P),h(rs(c,P,3))};return f.useEffect(()=>{n("capital_price",c),n("markup_price",g),n("cost",$a(c,g))},[c,x,g]),f.useEffect(()=>{n("price",rn(s.cost??r.cost,s.sale_discount??r.sale_discount))},[s.cost,s.sale_discount]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async w=>{d(!i),w.preventDefault(),l({action:"update",id:r.id,data:s}).then(()=>{d(!i),et.success("Product price edited successfully"),t()}).catch(()=>{d(!i),u("Failed to add product listing"),et.error("Failed to add product listing")})},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-x-4 gap-y-5 font-medium text-gray-700",children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Name"}),e.jsx("p",{className:"text-sm",children:r.product.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Brand"}),e.jsx("p",{className:"text-sm",children:r.product.brand||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Serial Number"}),e.jsx("p",{className:"text-sm",children:r.product.serial_no})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(R,{id:"unit",name:"unit",type:"text",maxLength:20,required:!0,value:s.unit||r.unit,onChange:w=>{n("unit",w.target.value)}})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Size"}),e.jsx("p",{className:"text-sm",children:r.product.size})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Color"}),e.jsx("p",{className:"text-sm",children:r.product.color})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsx("p",{className:"text-sm",children:r.warehouse.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-3",children:[e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(R,{id:"capital_price",name:"capital_price",type:"number",inputMode:"numeric",min:0,step:.01,required:!0,className:"pl-7",value:c||"",onChange:y,onBlur:w=>{w.target.value=Number(c).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_percent",className:"text-sm font-bold text-gray-600",children:"Markup percent"}),e.jsx(R,{id:"markup_percent",name:"markup_percent",type:"number",inputMode:"numeric",min:0,max:1e3,step:.001,required:!0,value:x||"",onChange:v,onBlur:w=>{w.target.value=le(x,{precision:3}).value.toString()}}),e.jsx("span",{className:"absolute bottom-0 right-0 mr-2 -translate-y-1/2 text-sm font-semibold text-gray-500",children:"%"})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_price",className:"text-sm font-bold text-gray-600",children:"Markup price"}),e.jsx(R,{id:"markup_price",name:"markup_price",type:"number",min:0,max:1e3,step:.01,className:"pl-7",value:g||"",onChange:p,onBlur:w=>{w.target.value=Number(g).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"cost",className:"text-sm font-bold text-gray-600",children:"Cost"}),e.jsx(R,{id:"cost",name:"cost",type:"number",min:0,required:!0,className:"pl-7",readOnly:!0,value:$a(c,g).toFixed(2)||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 pb-[0.65rem] pl-3 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"sale_discount",className:"text-sm font-bold text-gray-600",children:"Sale discount"}),e.jsx(R,{id:"sale_discount",name:"sale_discount",type:"number",inputMode:"numeric",min:0,step:.01,max:s.cost!==void 0?s.cost:r.cost,disabled:s.on_sale===void 0?r.on_sale===0:s.on_sale===0,required:!0,className:"pl-7",value:s.sale_discount??((S=r.sale_discount)==null?void 0:S.toFixed(2))??"",onChange:w=>{n("sale_discount",le(w.target.value).value)},onBlur:w=>{w.target.value=Number(s.sale_discount!==void 0?s.sale_discount:r.sale_discount).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""}),e.jsxs("div",{className:"absolute right-0 top-1/2 mr-2 flex flex-none translate-y-1/4 flex-row items-center justify-start gap-2",children:[e.jsx(R,{name:"on_sale",id:"on_sale",type:"checkbox",checked:s.on_sale===void 0?r.on_sale===1:s.on_sale===1,className:"h-4 w-fit",onChange:w=>{const P=document.getElementById("sale_discount");n("on_sale",w.target.checked?1:0),!w.target.checked&&(n("sale_discount",0),P&&(P.value="0.00"))}}),e.jsx(T,{htmlFor:"on_sale",className:"text-xs font-bold text-slate-700",children:"On Sale"})]})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"price",className:"text-sm font-bold text-gray-600",children:"Price"}),e.jsx(R,{id:"price",name:"price",type:"number",min:0,step:.01,required:!0,readOnly:!0,className:"pl-7",value:((O=s.price)==null?void 0:O.toFixed(2))||r.price.toFixed(2)||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4 flex flex-row items-center justify-start	gap-3",children:[e.jsx(ft,{id:"active_status",name:"active_status",checked:s.active_status?s.active_status==="active":r.active_status==="active",className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",onCheckedChange:w=>{n("active_status",w?"active":"inactive")}}),e.jsx(T,{htmlFor:"active_status",className:"text-sm font-bold text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsx("p",{className:"text-sm",children:r.created_by.firstname+" "+r.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created at"}),e.jsx("p",{className:"text-sm",children:Ae(r.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"approval_status",className:"text-sm font-bold text-gray-600",children:"Approval status"}),e.jsxs(oe,{onValueChange:w=>{n("approval_status",w),w==="approved"?n("approved_by",a.user.id):n("approved_by","")},value:s.approval_status||r.approval_status||"",required:!0,children:[e.jsx(de,{name:"approval_status",className:"flex flex-row items-center gap-3 bg-white text-sm capitalize",children:e.jsx(ue,{placeholder:s.approval_status||r.approval_status||"Select status..."})}),e.jsxs(me,{className:"bg-white",children:[e.jsx(V,{className:"rounded-md",value:"pending",children:"Pending"},"pending"),e.jsx(V,{className:"rounded-md",value:"approved",children:"Approved"},"approved"),e.jsx(V,{className:"rounded-md",value:"rejected",children:"Rejected"},"rejected")]})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Approved by"}),e.jsx("p",{className:"text-sm",children:r.approved_by?r.approved_by.firstname+" "+r.approved_by.lastname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Updated at"}),e.jsx("p",{className:"text-sm",children:Ae(r.updated_at)})]})]}),e.jsx("div",{className:"col-span-12 flex w-full justify-between whitespace-nowrap pt-4",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",onClick:t,children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:i,className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:i?"Applying changes...":"Apply changes"})]})}),o&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:o})})]})})})},df=()=>{const{warehouses:t}=$t(),[a,r]=f.useState(0),{isOpen:s,openModal:n,closeModal:l}=Ee(),[i,d]=f.useState(""),o=(u,c)=>{d(c),n()};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Product Listings",children:e.jsx(Nl,{children:e.jsxs(fl,{children:[e.jsxs("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:[e.jsxs("div",{className:"ml-auto flex flex-row items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Filter warehouse:"," "]}),e.jsxs(oe,{defaultValue:"0",onValueChange:u=>r(Number(u)),children:[e.jsx(de,{className:"w-[300px] text-sm font-medium",children:e.jsx(ue,{placeholder:"All"})}),e.jsxs(me,{className:"text-sm font-medium capitalize",children:[e.jsx(V,{value:"0",children:"All"},"all"),t.map(u=>e.jsxs(V,{value:u.id.toString(),children:[u.name," (",u.code,")"]},u.id))]})]})]}),e.jsx("div",{className:"w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(So,{openModal:o,isModalOpen:s,filterWarehouse:a>0?a:void 0})})]}),e.jsx(Ve,{title:i==="add"?"Add Listing":i==="details"?"Listing Details":i==="edit"?"Edit Listing":i==="toggle_active_stat"?"Toggle Active Status":"",isOpen:s,onClose:l,closeOnOverlayClick:i==="details"||i==="toggle_active_stat",children:e.jsxs(e.Fragment,{children:[i==="add"&&e.jsx(To,{onClose:l}),i==="details"&&e.jsx(Co,{}),i==="edit"&&e.jsx(Ao,{onClose:l}),i==="toggle_active_stat"&&e.jsx(ko,{onClose:l})]})})]})})})})},Eo=({openModal:t})=>{const{transfers:a,transferProducts:r,isFetching:s,setSelectedTransfer:n}=gt();je();const l=c=>{n(c),t(c,"details")},i=c=>{n(c),t(c,"edit")},d=c=>{n(c),t(c,"products")},o=()=>{t({},"add")},u=[{id:"select",header:({table:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsAllPageRowsSelected(),onChange:m=>c.toggleAllPageRowsSelected(!!m.target.checked),"aria-label":"Select all"}),cell:({row:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsSelected(),onChange:m=>c.toggleSelected(!!m.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"code",sortingFn:"alphanumeric",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["TRANSFER CODE ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.code?c.original.code:"N/A"})},{accessorKey:"source",header:()=>e.jsx("div",{className:"text-center",children:"SOURCE-DESTINATION"}),cell:({row:c})=>{const m=c.original.source,x=c.original.destination;return e.jsxs("div",{className:"text-center",children:[m.code,"-",x.code]})}},{id:"transfer_products",header:()=>e.jsx("div",{className:"text-center",children:"PRODUCTS ADDED?"}),cell:({row:c})=>e.jsx("div",{className:"flex justify-center",children:r.filter(m=>m.transfer_id===c.original.id).length>0?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"})})},{accessorKey:"transfer_status",sortingFn:"text",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["TRANSFER STATUS ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.transfer_status?c.original.transfer_status:"N/A"})},{accessorKey:"transfer_schedule",sortingFn:"datetime",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["SCHEDULE ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>{const m=c.getValue("transfer_schedule");if(m.toString()!=="0000-00-00 00:00:00"){const x={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},h=new Date(m).toLocaleDateString([],x);return e.jsx("div",{className:"text-center",children:h})}else return e.jsx("div",{className:"text-center",children:"N/A"})}},{accessorKey:"date_received",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["DATE RECEIVED ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>{const m=c.getValue("date_received");if(m){const x={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},h=new Date(m).toLocaleDateString([],x);return e.jsx("div",{className:"text-center",children:h})}else return e.jsx("div",{className:"text-center",children:"N/A"})}},{accessorKey:"approval_status",header:()=>e.jsx("div",{className:"text-center",children:"APPROVAL STATUS"}),cell:({row:c})=>e.jsx("div",{className:"flex mx-auto items-center justify-center",children:c.original.approval_status.toLowerCase()==="approved"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):c.original.approval_status.toLowerCase()==="rejected"?e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})})},{id:"actions",header:()=>e.jsx("div",{}),cell:({row:c})=>{const m=c.original;return e.jsx("div",{className:"flex flex-row text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>l(m),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Transfer Details"})]}),e.jsxs(pe,{onClick:()=>i(m),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit Transfer"})]}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>d(m),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:m.transfer_status!="arrived"&&m.approval_status!="rejected"?e.jsx(Ot,{size:16,strokeWidth:2.25}):e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Transfer Products"})]})]})]})})}}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:u,filterWhat:"approval_status",dataType:"Transfer",openModal:o,isLoading:s})})},Fo=({onClose:t})=>{const{selectedTransfer:a}=gt();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-4xl flex-col gap-4",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer Code"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.code?a.code:"N/A"})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Source"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.source.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Destination"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.destination.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer status"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.transfer_status?a.transfer_status.charAt(0).toUpperCase()+a.transfer_status.slice(1):"N/A"})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer schedule"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.transfer_schedule.toString()==="0000-00-00 00:00:00"?"N/A":Ae(a.transfer_schedule)})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Received by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.received_by?a.received_by.firstname+" "+a.received_by.lastname:"N/A"})]}),e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Date received"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.date_received?Ae(a.date_received):"N/A"})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.created_by.firstname+" "+a.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(a.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approval status"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approved by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.approved_by?a.approved_by.firstname+" "+a.approved_by.firstname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Updated at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(a.updated_at)})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsx("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.notes?a.notes:"N/A"})]})})]})})};var Oe=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))},Io=["onCopy","onCut","onPaste"],Lo=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Mo=["onFocus","onBlur"],Wo=["onInput","onInvalid","onReset","onSubmit"],zo=["onLoad","onError"],Ro=["onKeyDown","onKeyPress","onKeyUp"],Uo=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Ho=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Vo=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],$o=["onSelect"],qo=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Ko=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Yo=["onScroll"],Bo=["onWheel"],Go=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Qo=["onTransitionEnd"],Zo=["onToggle"],Xo=["onChange"],Jo=Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe(Oe([],Io,!0),Lo,!0),Mo,!0),Wo,!0),zo,!0),Ro,!0),Uo,!0),Ho,!0),Vo,!0),$o,!0),qo,!0),Ko,!0),Yo,!0),Bo,!0),Go,!0),Qo,!0),Xo,!0),Zo,!0);function ed(t,a){var r={};return Jo.forEach(function(s){var n=t[s];n&&(a?r[s]=function(l){return n(l,a(s))}:r[s]=n)}),r}var td="Expected a function",Vl="__lodash_hash_undefined__",ad="[object Function]",sd="[object GeneratorFunction]",rd=/[\\^$.*+?()[\]{}|]/g,nd=/^\[object .+?Constructor\]$/,ld=typeof ys=="object"&&ys&&ys.Object===Object&&ys,id=typeof self=="object"&&self&&self.Object===Object&&self,$l=ld||id||Function("return this")();function cd(t,a){return t==null?void 0:t[a]}function od(t){var a=!1;if(t!=null&&typeof t.toString!="function")try{a=!!(t+"")}catch{}return a}var dd=Array.prototype,ud=Function.prototype,ql=Object.prototype,tr=$l["__core-js_shared__"],An=function(){var t=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Kl=ud.toString,nn=ql.hasOwnProperty,md=ql.toString,xd=RegExp("^"+Kl.call(nn).replace(rd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hd=dd.splice,fd=Yl($l,"Map"),ns=Yl(Object,"create");function Da(t){var a=-1,r=t?t.length:0;for(this.clear();++a<r;){var s=t[a];this.set(s[0],s[1])}}function pd(){this.__data__=ns?ns(null):{}}function gd(t){return this.has(t)&&delete this.__data__[t]}function vd(t){var a=this.__data__;if(ns){var r=a[t];return r===Vl?void 0:r}return nn.call(a,t)?a[t]:void 0}function jd(t){var a=this.__data__;return ns?a[t]!==void 0:nn.call(a,t)}function yd(t,a){var r=this.__data__;return r[t]=ns&&a===void 0?Vl:a,this}Da.prototype.clear=pd;Da.prototype.delete=gd;Da.prototype.get=vd;Da.prototype.has=jd;Da.prototype.set=yd;function qa(t){var a=-1,r=t?t.length:0;for(this.clear();++a<r;){var s=t[a];this.set(s[0],s[1])}}function bd(){this.__data__=[]}function Nd(t){var a=this.__data__,r=Rs(a,t);if(r<0)return!1;var s=a.length-1;return r==s?a.pop():hd.call(a,r,1),!0}function wd(t){var a=this.__data__,r=Rs(a,t);return r<0?void 0:a[r][1]}function _d(t){return Rs(this.__data__,t)>-1}function Sd(t,a){var r=this.__data__,s=Rs(r,t);return s<0?r.push([t,a]):r[s][1]=a,this}qa.prototype.clear=bd;qa.prototype.delete=Nd;qa.prototype.get=wd;qa.prototype.has=_d;qa.prototype.set=Sd;function Ta(t){var a=-1,r=t?t.length:0;for(this.clear();++a<r;){var s=t[a];this.set(s[0],s[1])}}function Cd(){this.__data__={hash:new Da,map:new(fd||qa),string:new Da}}function kd(t){return Us(this,t).delete(t)}function Dd(t){return Us(this,t).get(t)}function Pd(t){return Us(this,t).has(t)}function Td(t,a){return Us(this,t).set(t,a),this}Ta.prototype.clear=Cd;Ta.prototype.delete=kd;Ta.prototype.get=Dd;Ta.prototype.has=Pd;Ta.prototype.set=Td;function Rs(t,a){for(var r=t.length;r--;)if(Id(t[r][0],a))return r;return-1}function Od(t){if(!Bl(t)||Ed(t))return!1;var a=Ld(t)||od(t)?xd:nd;return a.test(Fd(t))}function Us(t,a){var r=t.__data__;return Ad(a)?r[typeof a=="string"?"string":"hash"]:r.map}function Yl(t,a){var r=cd(t,a);return Od(r)?r:void 0}function Ad(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}function Ed(t){return!!An&&An in t}function Fd(t){if(t!=null){try{return Kl.call(t)}catch{}try{return t+""}catch{}}return""}function ln(t,a){if(typeof t!="function"||a&&typeof a!="function")throw new TypeError(td);var r=function(){var s=arguments,n=a?a.apply(this,s):s[0],l=r.cache;if(l.has(n))return l.get(n);var i=t.apply(this,s);return r.cache=l.set(n,i),i};return r.cache=new(ln.Cache||Ta),r}ln.Cache=Ta;function Id(t,a){return t===a||t!==t&&a!==a}function Ld(t){var a=Bl(t)?md.call(t):"";return a==ad||a==sd}function Bl(t){var a=typeof t;return!!t&&(a=="object"||a=="function")}var Md=ln;const Gl=wl(Md);function Ql(t){return JSON.stringify(t)}function Wd(t){return typeof t=="string"}function zd(t,a,r){return r.indexOf(t)===a}function Rd(t){return t.toLowerCase()===t}function En(t){return t.indexOf(",")===-1?t:t.split(",")}function jr(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var a=t.split(".")[0],r=a===void 0?"":a;return jr(r)}if(t.indexOf("@")!==-1){var s=t.split("@")[0],r=s===void 0?"":s;return jr(r)}if(t.indexOf("-")===-1||!Rd(t))return t;var n=t.split("-"),l=n[0],i=n[1],d=i===void 0?"":i;return"".concat(l,"-").concat(d.toUpperCase())}function Ud(t){var a=t===void 0?{}:t,r=a.useFallbackLocale,s=r===void 0?!0:r,n=a.fallbackLocale,l=n===void 0?"en-US":n,i=[];if(typeof navigator<"u"){for(var d=navigator.languages||[],o=[],u=0,c=d;u<c.length;u++){var m=c[u];o=o.concat(En(m))}var x=navigator.language,h=x&&En(x);i=i.concat(o,h)}return s&&i.push(l),i.filter(Wd).map(jr).filter(zd)}var Hd=Gl(Ud,Ql);function Vd(t){return Hd(t)[0]||null}var Zl=Gl(Vd,Ql);const Ka=Zl;function Kt(t,a,r){return function(n,l){l===void 0&&(l=r);var i=t(n)+l;return a(i)}}function ps(t){return function(r){return new Date(t(r).getTime()-1)}}function gs(t,a){return function(s){return[t(s),a(s)]}}function re(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var a=parseInt(t,10);if(typeof t=="string"&&!isNaN(a))return a;throw new Error("Failed to get year from date: ".concat(t,"."))}function oa(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function zt(t){if(t instanceof Date)return t.getMonth()+1;throw new Error("Failed to get human-readable month from date: ".concat(t,"."))}function Vt(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function Ge(t){if(t instanceof Date)return t.getHours();if(typeof t=="string"){var a=t.split(":");if(a.length>=2){var r=a[0];if(r){var s=parseInt(r,10);if(!isNaN(s))return s}}}throw new Error("Failed to get hours from date: ".concat(t,"."))}function Rt(t){if(t instanceof Date)return t.getMinutes();if(typeof t=="string"){var a=t.split(":");if(a.length>=2){var r=a[1]||"0",s=parseInt(r,10);if(!isNaN(s))return s}}throw new Error("Failed to get minutes from date: ".concat(t,"."))}function wa(t){if(t instanceof Date)return t.getSeconds();if(typeof t=="string"){var a=t.split(":");if(a.length>=2){var r=a[2]||"0",s=parseInt(r,10);if(!isNaN(s))return s}}throw new Error("Failed to get seconds from date: ".concat(t,"."))}function ar(t){if(t instanceof Date)return t.getMilliseconds();if(typeof t=="string"){var a=t.split(":");if(a.length>=2){var r=a[2]||"0",s=r.split(".")[1]||"0",n=parseInt(s,10);if(!isNaN(n))return n}}throw new Error("Failed to get seconds from date: ".concat(t,"."))}function Ya(t){var a=re(t),r=a+(-a+1)%100,s=new Date;return s.setFullYear(r,0,1),s.setHours(0,0,0,0),s}var $d=Kt(re,Ya,-100),Xl=Kt(re,Ya,100),cn=ps(Xl),qd=Kt(re,cn,-100),Jl=gs(Ya,cn);function da(t){var a=re(t),r=a+(-a+1)%10,s=new Date;return s.setFullYear(r,0,1),s.setHours(0,0,0,0),s}var ei=Kt(re,da,-10),on=Kt(re,da,10),Hs=ps(on),ti=Kt(re,Hs,-10),ai=gs(da,Hs);function Ba(t){var a=re(t),r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var si=Kt(re,Ba,-1),dn=Kt(re,Ba,1),Vs=ps(dn),ri=Kt(re,Vs,-1),Kd=gs(Ba,Vs);function un(t,a){return function(s,n){n===void 0&&(n=a);var l=re(s),i=oa(s)+n,d=new Date;return d.setFullYear(l,i,1),d.setHours(0,0,0,0),t(d)}}function Oa(t){var a=re(t),r=oa(t),s=new Date;return s.setFullYear(a,r,1),s.setHours(0,0,0,0),s}var ni=un(Oa,-1),mn=un(Oa,1),vs=ps(mn),li=un(vs,-1),Yd=gs(Oa,vs);function Bd(t,a){return function(s,n){n===void 0&&(n=a);var l=re(s),i=oa(s),d=Vt(s)+n,o=new Date;return o.setFullYear(l,i,d),o.setHours(0,0,0,0),t(o)}}function js(t){var a=re(t),r=oa(t),s=Vt(t),n=new Date;return n.setFullYear(a,r,s),n.setHours(0,0,0,0),n}var Gd=Bd(js,1),xn=ps(Gd),Qd=gs(js,xn);function hn(t){return Vt(vs(t))}function na(t,a){a===void 0&&(a=2);var r="".concat(t);return r.length>=a?t:"0000".concat(r).slice(-a)}function Zd(t){var a=na(Ge(t)),r=na(Rt(t));return"".concat(a,":").concat(r)}function yr(t){var a=na(Ge(t)),r=na(Rt(t)),s=na(wa(t));return"".concat(a,":").concat(r,":").concat(s)}function br(t){var a=na(re(t),4),r=na(zt(t)),s=na(Vt(t));return"".concat(a,"-").concat(r,"-").concat(s)}function Xd(t){return"".concat(br(t),"T").concat(yr(t))}var Ja,ve={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Ma={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},Jd=(Ja={},Ja[ve.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],Ja[ve.HEBREW]=["he","he-IL"],Ja[ve.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],Ja),fn=[0,1,2,3,4,5,6],sr=new Map;function eu(t){return function(r,s){var n=r||Ka();sr.has(n)||sr.set(n,new Map);var l=sr.get(n);return l.has(t)||l.set(t,new Intl.DateTimeFormat(n||void 0,t).format),l.get(t)(s)}}function tu(t){var a=new Date(t);return new Date(a.setHours(12))}function Aa(t){return function(a,r){return eu(t)(a,tu(r))}}var au={day:"numeric"},su={day:"numeric",month:"long",year:"numeric"},ru={month:"long"},nu={month:"long",year:"numeric"},lu={weekday:"short"},iu={weekday:"long"},cu={year:"numeric"},ou=Aa(au),du=Aa(su),uu=Aa(ru),ii=Aa(nu),mu=Aa(lu),xu=Aa(iu),$s=Aa(cu),hu=fn[0],fu=fn[5],Fn=fn[6];function ls(t,a){a===void 0&&(a=ve.ISO_8601);var r=t.getDay();switch(a){case ve.ISO_8601:return(r+6)%7;case ve.ISLAMIC:return(r+1)%7;case ve.HEBREW:case ve.GREGORY:return r;default:throw new Error("Unsupported calendar type.")}}function pu(t){var a=Ya(t);return re(a)}function gu(t){var a=da(t);return re(a)}function Nr(t,a){a===void 0&&(a=ve.ISO_8601);var r=re(t),s=oa(t),n=t.getDate()-ls(t,a);return new Date(r,s,n)}function vu(t,a){a===void 0&&(a=ve.ISO_8601);var r=a===ve.GREGORY?ve.GREGORY:ve.ISO_8601,s=Nr(t,a),n=re(t)+1,l,i;do l=new Date(n,0,r===ve.ISO_8601?4:1),i=Nr(l,a),n-=1;while(t<i);return Math.round((s.getTime()-i.getTime())/(864e5*7))+1}function _a(t,a){switch(t){case"century":return Ya(a);case"decade":return da(a);case"year":return Ba(a);case"month":return Oa(a);case"day":return js(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function ju(t,a){switch(t){case"century":return $d(a);case"decade":return ei(a);case"year":return si(a);case"month":return ni(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function ci(t,a){switch(t){case"century":return Xl(a);case"decade":return on(a);case"year":return dn(a);case"month":return mn(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function yu(t,a){switch(t){case"decade":return ei(a,-100);case"year":return si(a,-10);case"month":return ni(a,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function bu(t,a){switch(t){case"decade":return on(a,100);case"year":return dn(a,10);case"month":return mn(a,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function oi(t,a){switch(t){case"century":return cn(a);case"decade":return Hs(a);case"year":return Vs(a);case"month":return vs(a);case"day":return xn(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function Nu(t,a){switch(t){case"century":return qd(a);case"decade":return ti(a);case"year":return ri(a);case"month":return li(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function wu(t,a){switch(t){case"decade":return ti(a,-100);case"year":return ri(a,-10);case"month":return li(a,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function In(t,a){switch(t){case"century":return Jl(a);case"decade":return ai(a);case"year":return Kd(a);case"month":return Yd(a);case"day":return Qd(a);default:throw new Error("Invalid rangeType: ".concat(t))}}function _u(t,a,r){var s=[a,r].sort(function(n,l){return n.getTime()-l.getTime()});return[_a(t,s[0]),oi(t,s[1])]}function di(t,a,r){return a===void 0&&(a=$s),r.map(function(s){return a(t,s)}).join("  ")}function Su(t,a,r){return di(t,a,Jl(r))}function ui(t,a,r){return di(t,a,ai(r))}function Cu(t){return t.getDay()===new Date().getDay()}function mi(t,a){a===void 0&&(a=ve.ISO_8601);var r=t.getDay();switch(a){case ve.ISLAMIC:case ve.HEBREW:return r===fu||r===Fn;case ve.ISO_8601:case ve.GREGORY:return r===Fn||r===hu;default:throw new Error("Unsupported calendar type.")}}var _t="react-calendar__navigation";function ku(t){var a=t.activeStartDate,r=t.drillUp,s=t.formatMonthYear,n=s===void 0?ii:s,l=t.formatYear,i=l===void 0?$s:l,d=t.locale,o=t.maxDate,u=t.minDate,c=t.navigationAriaLabel,m=c===void 0?"":c,x=t.navigationAriaLive,h=t.navigationLabel,g=t.next2AriaLabel,b=g===void 0?"":g,y=t.next2Label,v=y===void 0?"":y,p=t.nextAriaLabel,S=p===void 0?"":p,O=t.nextLabel,w=O===void 0?"":O,P=t.prev2AriaLabel,I=P===void 0?"":P,k=t.prev2Label,C=k===void 0?"":k,F=t.prevAriaLabel,L=F===void 0?"":F,W=t.prevLabel,$=W===void 0?"":W,Y=t.setActiveStartDate,H=t.showDoubleView,N=t.view,B=t.views,ie=B.indexOf(N)>0,M=N!=="century",Q=ju(N,a),xe=M?yu(N,a):void 0,he=ci(N,a),fe=M?bu(N,a):void 0,X=function(){if(Q.getFullYear()<0)return!0;var G=Nu(N,a);return u&&u>=G}(),Te=M&&function(){if(xe.getFullYear()<0)return!0;var G=wu(N,a);return u&&u>=G}(),We=o&&o<he,ze=M&&o&&o<fe;function Fe(){Y(Q,"prev")}function Pe(){Y(xe,"prev2")}function Ke(){Y(he,"next")}function _e(){Y(fe,"next2")}function be(G){var ye=function(){switch(N){case"century":return Su(d,i,G);case"decade":return ui(d,i,G);case"year":return i(d,G);case"month":return n(d,G);default:throw new Error("Invalid view: ".concat(N,"."))}}();return h?h({date:G,label:ye,locale:d||Zl()||void 0,view:N}):ye}function q(){var G="".concat(_t,"__label");return _.createElement("button",{"aria-label":m,"aria-live":x,className:G,disabled:!ie,onClick:r,style:{flexGrow:1},type:"button"},_.createElement("span",{className:"".concat(G,"__labelText ").concat(G,"__labelText--from")},be(a)),H?_.createElement(_.Fragment,null,_.createElement("span",{className:"".concat(G,"__divider")},"  "),_.createElement("span",{className:"".concat(G,"__labelText ").concat(G,"__labelText--to")},be(he))):null)}return _.createElement("div",{className:_t},C!==null&&M?_.createElement("button",{"aria-label":I,className:"".concat(_t,"__arrow ").concat(_t,"__prev2-button"),disabled:Te,onClick:Pe,type:"button"},C):null,$!==null&&_.createElement("button",{"aria-label":L,className:"".concat(_t,"__arrow ").concat(_t,"__prev-button"),disabled:X,onClick:Fe,type:"button"},$),q(),w!==null&&_.createElement("button",{"aria-label":S,className:"".concat(_t,"__arrow ").concat(_t,"__next-button"),disabled:We,onClick:Ke,type:"button"},w),v!==null&&M?_.createElement("button",{"aria-label":b,className:"".concat(_t,"__arrow ").concat(_t,"__next2-button"),disabled:ze,onClick:_e,type:"button"},v):null)}var Wa=globalThis&&globalThis.__assign||function(){return Wa=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Wa.apply(this,arguments)},Du=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function Ln(t){return"".concat(t,"%")}function pn(t){var a=t.children,r=t.className,s=t.count,n=t.direction,l=t.offset,i=t.style,d=t.wrap,o=Du(t,["children","className","count","direction","offset","style","wrap"]);return _.createElement("div",Wa({className:r,style:Wa({display:"flex",flexDirection:n,flexWrap:d?"wrap":"nowrap"},i)},o),_.Children.map(a,function(u,c){var m=l&&c===0?Ln(100*l/s):null;return _.cloneElement(u,Wa(Wa({},u.props),{style:{flexBasis:Ln(100/s),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:m,marginInlineStart:m,marginInlineEnd:0}}))}))}var Pu=function(){},Tu=Pu;const Ou=wl(Tu);var La;function Au(t,a,r){return a&&a>t?a:r&&r<t?r:t}function is(t,a){return a[0]<=t&&a[1]>=t}function Eu(t,a){return t[0]<=a[0]&&t[1]>=a[1]}function xi(t,a){return is(t[0],a)||is(t[1],a)}function Mn(t,a,r){var s=xi(a,t),n=[];if(s){n.push(r);var l=is(t[0],a),i=is(t[1],a);l&&n.push("".concat(r,"Start")),i&&n.push("".concat(r,"End")),l&&i&&n.push("".concat(r,"BothEnds"))}return n}function Fu(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function Iu(t){if(!t)throw new Error("args is required");var a=t.value,r=t.date,s=t.hover,n="react-calendar__tile",l=[n];if(!r)return l;var i=new Date,d=function(){if(Array.isArray(r))return r;var h=t.dateType;if(!h)throw new Error("dateType is required when date is not an array of two dates");return In(h,r)}();if(is(i,d)&&l.push("".concat(n,"--now")),!a||!Fu(a))return l;var o=function(){if(Array.isArray(a))return a;var h=t.valueType;if(!h)throw new Error("valueType is required when value is not an array of two dates");return In(h,a)}();Eu(o,d)?l.push("".concat(n,"--active")):xi(o,d)&&l.push("".concat(n,"--hasActive"));var u=Mn(o,d,"".concat(n,"--range"));l.push.apply(l,u);var c=Array.isArray(a)?a:[a];if(s&&c.length===1){var m=s>o[0]?[o[0],s]:[s,o[0]],x=Mn(m,d,"".concat(n,"--hover"));l.push.apply(l,x)}return l}var Lu=(La={},La[Ma.ARABIC]=ve.ISLAMIC,La[Ma.HEBREW]=ve.HEBREW,La[Ma.ISO_8601]=ve.ISO_8601,La[Ma.US]=ve.GREGORY,La);function Mu(t){return t!==void 0&&t in Ma}var Wn=!1;function qs(t){if(Mu(t)){var a=Lu[t];return Ou(Wn,'Specifying calendarType="'.concat(t,'" is deprecated. Use calendarType="').concat(a,'" instead.')),Wn=!0,a}return t}function Ks(t){for(var a=t.className,r=t.count,s=r===void 0?3:r,n=t.dateTransform,l=t.dateType,i=t.end,d=t.hover,o=t.offset,u=t.renderTile,c=t.start,m=t.step,x=m===void 0?1:m,h=t.value,g=t.valueType,b=[],y=c;y<=i;y+=x){var v=n(y);b.push(u({classes:Iu({date:v,dateType:l,hover:d,value:h,valueType:g}),date:v}))}return _.createElement(pn,{className:a,count:s,offset:o,wrap:!0},b)}function Ys(t){var a=t.activeStartDate,r=t.children,s=t.classes,n=t.date,l=t.formatAbbr,i=t.locale,d=t.maxDate,o=t.maxDateTransform,u=t.minDate,c=t.minDateTransform,m=t.onClick,x=t.onMouseOver,h=t.style,g=t.tileClassName,b=t.tileContent,y=t.tileDisabled,v=t.view,p=f.useMemo(function(){var O={activeStartDate:a,date:n,view:v};return typeof g=="function"?g(O):g},[a,n,g,v]),S=f.useMemo(function(){var O={activeStartDate:a,date:n,view:v};return typeof b=="function"?b(O):b},[a,n,b,v]);return _.createElement("button",{className:ot(s,p),disabled:u&&c(u)>n||d&&o(d)<n||y&&y({activeStartDate:a,date:n,view:v}),onClick:m?function(O){return m(n,O)}:void 0,onFocus:x?function(){return x(n)}:void 0,onMouseOver:x?function(){return x(n)}:void 0,style:h,type:"button"},l?_.createElement("abbr",{"aria-label":l(i,n)},r):r,S)}var wr=globalThis&&globalThis.__assign||function(){return wr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},wr.apply(this,arguments)},Wu=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},rr="react-calendar__century-view__decades__decade";function zu(t){var a=t.classes,r=a===void 0?[]:a,s=t.currentCentury,n=t.formatYear,l=n===void 0?$s:n,i=Wu(t,["classes","currentCentury","formatYear"]),d=i.date,o=i.locale,u=[];return r&&u.push.apply(u,r),rr&&u.push(rr),Ya(d).getFullYear()!==s&&u.push("".concat(rr,"--neighboringCentury")),_.createElement(Ys,wr({},i,{classes:u,maxDateTransform:Hs,minDateTransform:da,view:"century"}),ui(o,l,d))}var _r=globalThis&&globalThis.__assign||function(){return _r=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},_r.apply(this,arguments)},zn=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function Ru(t){var a=t.activeStartDate,r=t.hover,s=t.showNeighboringCentury,n=t.value,l=t.valueType,i=zn(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),d=pu(a),o=d+(s?119:99);return _.createElement(Ks,{className:"react-calendar__century-view__decades",dateTransform:da,dateType:"decade",end:o,hover:r,renderTile:function(u){var c=u.date,m=zn(u,["date"]);return _.createElement(zu,_r({key:c.getTime()},i,m,{activeStartDate:a,currentCentury:d,date:c}))},start:d,step:10,value:n,valueType:l})}var Rn=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))},Uu=Object.values(ve),Hu=Object.values(Ma),Sr=["century","decade","year","month"],hi=j.oneOf(Rn(Rn([],Uu,!0),Hu,!0)),As=j.oneOfType([j.string,j.arrayOf(j.string)]),gn=function(a,r,s){var n=a,l=r,i=n[l];if(!i)return null;if(!(i instanceof Date))return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, expected instance of `Date`."));var d=a.maxDate;return d&&i>d?new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, minDate cannot be larger than maxDate.")):null},vn=function(a,r,s){var n=a,l=r,i=n[l];if(!i)return null;if(!(i instanceof Date))return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, expected instance of `Date`."));var d=a.minDate;return d&&i<d?new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, maxDate cannot be smaller than minDate.")):null},Vu=j.oneOfType([j.func,j.exact({current:j.any})]),$u=j.arrayOf(j.oneOfType([j.instanceOf(Date),j.oneOf([null])]).isRequired),qu=j.oneOfType([j.instanceOf(Date),j.oneOf([null]),$u]);j.arrayOf(j.oneOf(Sr));var Es=function(a,r,s){var n=a,l=r,i=n[l];return i!==void 0&&(typeof i!="string"||Sr.indexOf(i)===-1)?new Error("Invalid prop `".concat(r,"` of value `").concat(i,"` supplied to `").concat(s,"`, expected one of [").concat(Sr.map(function(d){return'"'.concat(d,'"')}).join(", "),"].")):null};Es.isRequired=function(a,r,s,n,l){var i=a,d=r,o=i[d];return o?Es(a,r,s):new Error("The prop `".concat(r,"` is marked as required in `").concat(s,"`, but its value is `").concat(o,"`."))};var Ku=function(t){return j.arrayOf(t)},Bs={activeStartDate:j.instanceOf(Date).isRequired,hover:j.instanceOf(Date),locale:j.string,maxDate:vn,minDate:gn,onClick:j.func,onMouseOver:j.func,tileClassName:j.oneOfType([j.func,As]),tileContent:j.oneOfType([j.func,j.node]),value:qu,valueType:j.oneOf(["century","decade","year","month","day"]).isRequired};j.instanceOf(Date).isRequired,j.arrayOf(j.string.isRequired).isRequired,j.instanceOf(Date).isRequired,j.string,j.func,j.func,j.objectOf(j.oneOfType([j.string,j.number])),j.oneOfType([j.func,As]),j.oneOfType([j.func,j.node]),j.func;var cs=globalThis&&globalThis.__assign||function(){return cs=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},cs.apply(this,arguments)},fi=function(a){function r(){return _.createElement(Ru,cs({},a))}return _.createElement("div",{className:"react-calendar__century-view"},r())};fi.propTypes=cs(cs({},Bs),{showNeighboringCentury:j.bool});const Yu=fi;var Cr=globalThis&&globalThis.__assign||function(){return Cr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Cr.apply(this,arguments)},Bu=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},nr="react-calendar__decade-view__years__year";function Gu(t){var a=t.classes,r=a===void 0?[]:a,s=t.currentDecade,n=t.formatYear,l=n===void 0?$s:n,i=Bu(t,["classes","currentDecade","formatYear"]),d=i.date,o=i.locale,u=[];return r&&u.push.apply(u,r),nr&&u.push(nr),da(d).getFullYear()!==s&&u.push("".concat(nr,"--neighboringDecade")),_.createElement(Ys,Cr({},i,{classes:u,maxDateTransform:Vs,minDateTransform:Ba,view:"decade"}),l(o,d))}var kr=globalThis&&globalThis.__assign||function(){return kr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},kr.apply(this,arguments)},Un=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function Qu(t){var a=t.activeStartDate,r=t.hover,s=t.showNeighboringDecade,n=t.value,l=t.valueType,i=Un(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),d=gu(a),o=d+(s?11:9);return _.createElement(Ks,{className:"react-calendar__decade-view__years",dateTransform:Ba,dateType:"year",end:o,hover:r,renderTile:function(u){var c=u.date,m=Un(u,["date"]);return _.createElement(Gu,kr({key:c.getTime()},i,m,{activeStartDate:a,currentDecade:d,date:c}))},start:d,value:n,valueType:l})}var os=globalThis&&globalThis.__assign||function(){return os=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},os.apply(this,arguments)},pi=function(a){function r(){return _.createElement(Qu,os({},a))}return _.createElement("div",{className:"react-calendar__decade-view"},r())};pi.propTypes=os(os({},Bs),{showNeighboringDecade:j.bool});const Zu=pi;var Dr=globalThis&&globalThis.__assign||function(){return Dr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Dr.apply(this,arguments)},Xu=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},Hn=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))},Ju="react-calendar__year-view__months__month";function em(t){var a=t.classes,r=a===void 0?[]:a,s=t.formatMonth,n=s===void 0?uu:s,l=t.formatMonthYear,i=l===void 0?ii:l,d=Xu(t,["classes","formatMonth","formatMonthYear"]),o=d.date,u=d.locale;return _.createElement(Ys,Dr({},d,{classes:Hn(Hn([],r,!0),[Ju],!1),formatAbbr:i,maxDateTransform:vs,minDateTransform:Oa,view:"year"}),n(u,o))}var Pr=globalThis&&globalThis.__assign||function(){return Pr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Pr.apply(this,arguments)},Vn=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function tm(t){var a=t.activeStartDate,r=t.hover,s=t.value,n=t.valueType,l=Vn(t,["activeStartDate","hover","value","valueType"]),i=0,d=11,o=re(a);return _.createElement(Ks,{className:"react-calendar__year-view__months",dateTransform:function(u){var c=new Date;return c.setFullYear(o,u,1),Oa(c)},dateType:"month",end:d,hover:r,renderTile:function(u){var c=u.date,m=Vn(u,["date"]);return _.createElement(em,Pr({key:c.getTime()},l,m,{activeStartDate:a,date:c}))},start:i,value:s,valueType:n})}var Fs=globalThis&&globalThis.__assign||function(){return Fs=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Fs.apply(this,arguments)},gi=function(a){function r(){return _.createElement(tm,Fs({},a))}return _.createElement("div",{className:"react-calendar__year-view"},r())};gi.propTypes=Fs({},Bs);const am=gi;var Tr=globalThis&&globalThis.__assign||function(){return Tr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Tr.apply(this,arguments)},sm=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},Ns="react-calendar__month-view__days__day";function rm(t){var a=t.calendarType,r=t.classes,s=r===void 0?[]:r,n=t.currentMonthIndex,l=t.formatDay,i=l===void 0?ou:l,d=t.formatLongDate,o=d===void 0?du:d,u=sm(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),c=qs(a),m=u.date,x=u.locale,h=[];return s&&h.push.apply(h,s),Ns&&h.push(Ns),mi(m,c)&&h.push("".concat(Ns,"--weekend")),m.getMonth()!==n&&h.push("".concat(Ns,"--neighboringMonth")),_.createElement(Ys,Tr({},u,{classes:h,formatAbbr:o,maxDateTransform:xn,minDateTransform:js,view:"month"}),i(x,m))}var Or=globalThis&&globalThis.__assign||function(){return Or=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Or.apply(this,arguments)},$n=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function nm(t){var a=t.activeStartDate,r=t.calendarType,s=t.hover,n=t.showFixedNumberOfWeeks,l=t.showNeighboringMonth,i=t.value,d=t.valueType,o=$n(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),u=qs(r),c=re(a),m=oa(a),x=n||l,h=ls(a,u),g=x?0:h,b=(x?-h:0)+1,y=function(){if(n)return b+6*7-1;var v=hn(a);if(l){var p=new Date;p.setFullYear(c,m,v),p.setHours(0,0,0,0);var S=7-ls(p,u)-1;return v+S}return v}();return _.createElement(Ks,{className:"react-calendar__month-view__days",count:7,dateTransform:function(v){var p=new Date;return p.setFullYear(c,m,v),js(p)},dateType:"day",hover:s,end:y,renderTile:function(v){var p=v.date,S=$n(v,["date"]);return _.createElement(rm,Or({key:p.getTime()},o,S,{activeStartDate:a,calendarType:r,currentMonthIndex:m,date:p}))},offset:g,start:b,value:i,valueType:d})}var vi="react-calendar__month-view__weekdays",lr="".concat(vi,"__weekday");function lm(t){for(var a=t.calendarType,r=t.formatShortWeekday,s=r===void 0?mu:r,n=t.formatWeekday,l=n===void 0?xu:n,i=t.locale,d=t.onMouseLeave,o=qs(a),u=new Date,c=Oa(u),m=re(c),x=oa(c),h=[],g=1;g<=7;g+=1){var b=new Date(m,x,g-ls(c,o)),y=l(i,b);h.push(_.createElement("div",{key:g,className:ot(lr,Cu(b)&&"".concat(lr,"--current"),mi(b,o)&&"".concat(lr,"--weekend"))},_.createElement("abbr",{"aria-label":y,title:y},s(i,b).replace(".",""))))}return _.createElement(pn,{className:vi,count:7,onFocus:d,onMouseOver:d},h)}var Is=globalThis&&globalThis.__assign||function(){return Is=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Is.apply(this,arguments)},qn=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},Kn="react-calendar__tile";function im(t){var a=t.onClickWeekNumber,r=t.weekNumber,s=_.createElement("span",null,r);if(a){var n=t.date,l=t.onClickWeekNumber,i=t.weekNumber,d=qn(t,["date","onClickWeekNumber","weekNumber"]);return _.createElement("button",Is({},d,{className:Kn,onClick:function(o){return l(i,n,o)},type:"button"}),s)}else{t.date,t.onClickWeekNumber,t.weekNumber;var d=qn(t,["date","onClickWeekNumber","weekNumber"]);return _.createElement("div",Is({},d,{className:Kn}),s)}}function cm(t){var a=t.activeStartDate,r=t.calendarType,s=t.onClickWeekNumber,n=t.onMouseLeave,l=t.showFixedNumberOfWeeks,i=qs(r),d=function(){if(l)return 6;var c=hn(a),m=ls(a,i),x=c-(7-m);return 1+Math.ceil(x/7)}(),o=function(){for(var c=re(a),m=oa(a),x=Vt(a),h=[],g=0;g<d;g+=1)h.push(Nr(new Date(c,m,x+g*7),i));return h}(),u=o.map(function(c){return vu(c,i)});return _.createElement(pn,{className:"react-calendar__month-view__weekNumbers",count:d,direction:"column",onFocus:n,onMouseOver:n,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},u.map(function(c,m){var x=o[m];if(!x)throw new Error("date is not defined");return _.createElement(im,{key:c,date:x,onClickWeekNumber:s,weekNumber:c})}))}var ds=globalThis&&globalThis.__assign||function(){return ds=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ds.apply(this,arguments)},om=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function dm(t){if(t)for(var a=0,r=Object.entries(Jd);a<r.length;a++){var s=r[a],n=s[0],l=s[1];if(l.includes(t))return n}return ve.ISO_8601}var ji=function(a){var r=a.activeStartDate,s=a.locale,n=a.onMouseLeave,l=a.showFixedNumberOfWeeks,i=a.calendarType,d=i===void 0?dm(s):i,o=a.formatShortWeekday,u=a.formatWeekday,c=a.onClickWeekNumber,m=a.showWeekNumbers,x=om(a,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function h(){return _.createElement(lm,{calendarType:d,formatShortWeekday:o,formatWeekday:u,locale:s,onMouseLeave:n})}function g(){return m?_.createElement(cm,{activeStartDate:r,calendarType:d,onClickWeekNumber:c,onMouseLeave:n,showFixedNumberOfWeeks:l}):null}function b(){return _.createElement(nm,ds({calendarType:d},x))}var y="react-calendar__month-view";return _.createElement("div",{className:ot(y,m?"".concat(y,"--weekNumbers"):"")},_.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},g(),_.createElement("div",{style:{flexGrow:1,width:"100%"}},h(),b())))};ji.propTypes=ds(ds({},Bs),{calendarType:hi,formatDay:j.func,formatLongDate:j.func,formatShortWeekday:j.func,formatWeekday:j.func,onClickWeekNumber:j.func,onMouseLeave:j.func,showFixedNumberOfWeeks:j.bool,showNeighboringMonth:j.bool,showWeekNumbers:j.bool});const um=ji;var za=globalThis&&globalThis.__assign||function(){return za=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},za.apply(this,arguments)},ws="react-calendar",Ra=["century","decade","year","month"],mm=["decade","year","month","day"],jn=new Date;jn.setFullYear(1,0,1);jn.setHours(0,0,0,0);var xm=new Date(864e13);function es(t){return t instanceof Date?t:new Date(t)}function yi(t,a){return Ra.slice(Ra.indexOf(t),Ra.indexOf(a)+1)}function hm(t,a,r){var s=yi(a,r);return s.indexOf(t)!==-1}function yn(t,a,r){return t&&hm(t,a,r)?t:r}function bi(t){var a=Ra.indexOf(t);return mm[a]}function fm(t,a){var r=Array.isArray(t)?t[a]:t;if(!r)return null;var s=es(r);if(isNaN(s.getTime()))throw new Error("Invalid date: ".concat(t));return s}function Ni(t,a){var r=t.value,s=t.minDate,n=t.maxDate,l=t.maxDetail,i=fm(r,a);if(!i)return null;var d=bi(l),o=function(){switch(a){case 0:return _a(d,i);case 1:return oi(d,i);default:throw new Error("Invalid index value: ".concat(a))}}();return Au(o,s,n)}var bn=function(t){return Ni(t,0)},wi=function(t){return Ni(t,1)},pm=function(t){return[bn,wi].map(function(a){return a(t)})};function _i(t){var a=t.maxDate,r=t.maxDetail,s=t.minDate,n=t.minDetail,l=t.value,i=t.view,d=yn(i,n,r),o=bn({value:l,minDate:s,maxDate:a,maxDetail:r})||new Date;return _a(d,o)}function gm(t){var a=t.activeStartDate,r=t.defaultActiveStartDate,s=t.defaultValue,n=t.defaultView,l=t.maxDate,i=t.maxDetail,d=t.minDate,o=t.minDetail,u=t.value,c=t.view,m=yn(c,o,i),x=a||r;return x?_a(m,x):_i({maxDate:l,maxDetail:i,minDate:d,minDetail:o,value:u||s,view:c||n})}function ir(t){return t&&(!Array.isArray(t)||t.length===1)}function _s(t,a){return t instanceof Date&&a instanceof Date&&t.getTime()===a.getTime()}var Si=f.forwardRef(function(a,r){var s=a.activeStartDate,n=a.allowPartialRange,l=a.calendarType,i=a.className,d=a.defaultActiveStartDate,o=a.defaultValue,u=a.defaultView,c=a.formatDay,m=a.formatLongDate,x=a.formatMonth,h=a.formatMonthYear,g=a.formatShortWeekday,b=a.formatWeekday,y=a.formatYear,v=a.goToRangeStartOnSelect,p=v===void 0?!0:v,S=a.inputRef,O=a.locale,w=a.maxDate,P=w===void 0?xm:w,I=a.maxDetail,k=I===void 0?"month":I,C=a.minDate,F=C===void 0?jn:C,L=a.minDetail,W=L===void 0?"century":L,$=a.navigationAriaLabel,Y=a.navigationAriaLive,H=a.navigationLabel,N=a.next2AriaLabel,B=a.next2Label,ie=a.nextAriaLabel,M=a.nextLabel,Q=a.onActiveStartDateChange,xe=a.onChange,he=a.onClickDay,fe=a.onClickDecade,X=a.onClickMonth,Te=a.onClickWeekNumber,We=a.onClickYear,ze=a.onDrillDown,Fe=a.onDrillUp,Pe=a.onViewChange,Ke=a.prev2AriaLabel,_e=a.prev2Label,be=a.prevAriaLabel,q=a.prevLabel,G=a.returnValue,ye=G===void 0?"start":G,Ne=a.selectRange,ut=a.showDoubleView,mt=a.showFixedNumberOfWeeks,ua=a.showNavigation,Ea=ua===void 0?!0:ua,ma=a.showNeighboringCentury,xa=a.showNeighboringDecade,Ie=a.showNeighboringMonth,At=Ie===void 0?!0:Ie,ha=a.showWeekNumbers,Ye=a.tileClassName,Et=a.tileContent,Yt=a.tileDisabled,wt=a.value,Ft=a.view,fa=f.useState(d),Bt=fa[0],Gt=fa[1],Fa=f.useState(null),pa=Fa[0],xt=Fa[1],It=f.useState(Array.isArray(o)?o.map(function(E){return E!==null?es(E):null}):o!=null?es(o):null),ga=It[0],Ga=It[1],Qt=f.useState(u),Qa=Qt[0],va=Qt[1],ke=s||Bt||gm({activeStartDate:s,defaultActiveStartDate:d,defaultValue:o,defaultView:u,maxDate:P,maxDetail:k,minDate:F,minDetail:W,value:wt,view:Ft}),De=function(){var E=function(){return Ne&&ir(ga)?ga:wt!==void 0?wt:ga}();return E?Array.isArray(E)?E.map(function(z){return z!==null?es(z):null}):E!==null?es(E):null:null}(),Zt=bi(k),ce=yn(Ft||Qa,W,k),Xe=yi(W,k),at=Ne?pa:null,K=Xe.indexOf(ce)<Xe.length-1,J=Xe.indexOf(ce)>0,Le=f.useCallback(function(E){var z=function(){switch(ye){case"start":return bn;case"end":return wi;case"range":return pm;default:throw new Error("Invalid returnValue.")}}();return z({maxDate:P,maxDetail:k,minDate:F,value:E})},[P,k,F,ye]),Re=f.useCallback(function(E,z){Gt(E);var U={action:z,activeStartDate:E,value:De,view:ce};Q&&!_s(ke,E)&&Q(U)},[ke,Q,De,ce]),we=f.useCallback(function(E,z){var U=function(){switch(ce){case"century":return fe;case"decade":return We;case"year":return X;case"month":return he;default:throw new Error("Invalid view: ".concat(ce,"."))}}();U&&U(E,z)},[he,fe,X,We,ce]),st=f.useCallback(function(E,z){if(K){we(E,z);var U=Xe[Xe.indexOf(ce)+1];if(!U)throw new Error("Attempted to drill down from the lowest view.");Gt(E),va(U);var Se={action:"drillDown",activeStartDate:E,value:De,view:U};Q&&!_s(ke,E)&&Q(Se),Pe&&ce!==U&&Pe(Se),ze&&ze(Se)}},[ke,K,Q,we,ze,Pe,De,ce,Xe]),it=f.useCallback(function(){if(J){var E=Xe[Xe.indexOf(ce)-1];if(!E)throw new Error("Attempted to drill up from the highest view.");var z=_a(E,ke);Gt(z),va(E);var U={action:"drillUp",activeStartDate:z,value:De,view:E};Q&&!_s(ke,z)&&Q(U),Pe&&ce!==E&&Pe(U),Fe&&Fe(U)}},[ke,J,Q,Fe,Pe,De,ce,Xe]),rt=f.useCallback(function(E,z){var U=De;we(E,z);var Se=Ne&&!ir(U),Ce;if(Ne)if(Se)Ce=_a(Zt,E);else{if(!U)throw new Error("previousValue is required");if(Array.isArray(U))throw new Error("previousValue must not be an array");Ce=_u(Zt,U,E)}else Ce=Le(E);var Je=!Ne||Se||p?_i({maxDate:P,maxDetail:k,minDate:F,minDetail:W,value:Ce,view:ce}):null;z.persist(),Gt(Je),Ga(Ce);var Lt={action:"onChange",activeStartDate:Je,value:Ce,view:ce};if(Q&&!_s(ke,Je)&&Q(Lt),xe)if(Ne){var nt=ir(Ce);if(!nt)xe(Ce||null,z);else if(n){if(Array.isArray(Ce))throw new Error("value must not be an array");xe([Ce||null,null],z)}}else xe(Ce||null,z)},[ke,n,Le,p,P,k,F,W,Q,xe,we,Ne,De,Zt,ce]);function Za(E){xt(E)}function Xt(){xt(null)}f.useImperativeHandle(r,function(){return{activeStartDate:ke,drillDown:st,drillUp:it,onChange:rt,setActiveStartDate:Re,value:De,view:ce}},[ke,st,it,rt,Re,De,ce]);function ja(E){var z=E?ci(ce,ke):_a(ce,ke),U=K?st:rt,Se={activeStartDate:z,hover:at,locale:O,maxDate:P,minDate:F,onClick:U,onMouseOver:Ne?Za:void 0,tileClassName:Ye,tileContent:Et,tileDisabled:Yt,value:De,valueType:Zt};switch(ce){case"century":return _.createElement(Yu,za({formatYear:y,showNeighboringCentury:ma},Se));case"decade":return _.createElement(Zu,za({formatYear:y,showNeighboringDecade:xa},Se));case"year":return _.createElement(am,za({formatMonth:x,formatMonthYear:h},Se));case"month":return _.createElement(um,za({calendarType:l,formatDay:c,formatLongDate:m,formatShortWeekday:g,formatWeekday:b,onClickWeekNumber:Te,onMouseLeave:Ne?Xt:void 0,showFixedNumberOfWeeks:typeof mt<"u"?mt:ut,showNeighboringMonth:At,showWeekNumbers:ha},Se));default:throw new Error("Invalid view: ".concat(ce,"."))}}function Ia(){return Ea?_.createElement(ku,{activeStartDate:ke,drillUp:it,formatMonthYear:h,formatYear:y,locale:O,maxDate:P,minDate:F,navigationAriaLabel:$,navigationAriaLive:Y,navigationLabel:H,next2AriaLabel:N,next2Label:B,nextAriaLabel:ie,nextLabel:M,prev2AriaLabel:Ke,prev2Label:_e,prevAriaLabel:be,prevLabel:q,setActiveStartDate:Re,showDoubleView:ut,view:ce,views:Xe}):null}var D=Array.isArray(De)?De:[De];return _.createElement("div",{className:ot(ws,Ne&&D.length===1&&"".concat(ws,"--selectRange"),ut&&"".concat(ws,"--doubleView"),i),ref:S},Ia(),_.createElement("div",{className:"".concat(ws,"__viewContainer"),onBlur:Ne?Xt:void 0,onMouseLeave:Ne?Xt:void 0},ja(),ut?ja(!0):null))}),Yn=j.instanceOf(Date),Bn=j.oneOfType([j.string,j.instanceOf(Date)]),Gn=j.oneOfType([Bn,Ku(Bn)]);Si.propTypes={activeStartDate:Yn,allowPartialRange:j.bool,calendarType:hi,className:As,defaultActiveStartDate:Yn,defaultValue:Gn,defaultView:Es,formatDay:j.func,formatLongDate:j.func,formatMonth:j.func,formatMonthYear:j.func,formatShortWeekday:j.func,formatWeekday:j.func,formatYear:j.func,goToRangeStartOnSelect:j.bool,inputRef:Vu,locale:j.string,maxDate:vn,maxDetail:j.oneOf(Ra),minDate:gn,minDetail:j.oneOf(Ra),navigationAriaLabel:j.string,navigationAriaLive:j.oneOf(["off","polite","assertive"]),navigationLabel:j.func,next2AriaLabel:j.string,next2Label:j.node,nextAriaLabel:j.string,nextLabel:j.node,onActiveStartDateChange:j.func,onChange:j.func,onClickDay:j.func,onClickDecade:j.func,onClickMonth:j.func,onClickWeekNumber:j.func,onClickYear:j.func,onDrillDown:j.func,onDrillUp:j.func,onViewChange:j.func,prev2AriaLabel:j.string,prev2Label:j.node,prevAriaLabel:j.string,prevLabel:j.node,returnValue:j.oneOf(["start","end","range"]),selectRange:j.bool,showDoubleView:j.bool,showFixedNumberOfWeeks:j.bool,showNavigation:j.bool,showNeighboringCentury:j.bool,showNeighboringDecade:j.bool,showNeighboringMonth:j.bool,showWeekNumbers:j.bool,tileClassName:j.oneOfType([j.func,As]),tileContent:j.oneOfType([j.func,j.node]),tileDisabled:j.func,value:Gn,view:Es};const vm=Si;function cr(t){var a=t.angle,r=a===void 0?0:a,s=t.name,n=t.length,l=n===void 0?100:n,i=t.oppositeLength,d=i===void 0?10:i,o=t.width,u=o===void 0?1:o;return _.createElement("div",{className:"react-clock__hand react-clock__".concat(s,"-hand"),style:{transform:"rotate(".concat(r,"deg)")}},_.createElement("div",{className:"react-clock__hand__body react-clock__".concat(s,"-hand__body"),style:{width:"".concat(u,"px"),top:"".concat(50-l/2,"%"),bottom:"".concat(50-d/2,"%")}}))}function Ci(t){var a=t.angle,r=a===void 0?0:a,s=t.length,n=s===void 0?10:s,l=t.name,i=t.width,d=i===void 0?1:i,o=t.number;return _.createElement("div",{className:"react-clock__mark react-clock__".concat(l,"-mark"),style:{transform:"rotate(".concat(r,"deg)")}},_.createElement("div",{className:"react-clock__mark__body react-clock__".concat(l,"-mark__body"),style:{width:"".concat(d,"px"),top:0,bottom:"".concat(100-n/2,"%")}}),o?_.createElement("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(r,"deg)"),top:"".concat(n/2,"%")}},o):null)}var Ar=globalThis&&globalThis.__assign||function(){return Ar=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Ar.apply(this,arguments)},jm=f.memo(function(a){return _.createElement(Ci,Ar({},a))});const ym=jm;function bm(t,a){return a.toLocaleString(t||Ka()||void 0)}var Er=globalThis&&globalThis.__assign||function(){return Er=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Er.apply(this,arguments)},Nm=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},wm=f.memo(function(a){var r=a.formatHour,s=r===void 0?bm:r,n=a.locale,l=a.number,i=Nm(a,["formatHour","locale","number"]);return _.createElement(Ci,Er({number:l?s(n,l):null},i))});const _m=wm;function ki(t,a){return function(r,s,n){var l=r,i=s,d=l[i];if(typeof d<"u"){if(typeof d!="number")return new Error("Invalid prop `".concat(s,"` of type `").concat(typeof d,"` supplied to `").concat(n,"`, expected `number`."));if(d<t||d>a)return new Error("Invalid prop `".concat(s,"` of type `").concat(typeof d,"` supplied to `").concat(n,"`, length must be between ").concat(t," and ").concat(a,"."))}return null}}var Ps=ki(0,100),or=ki(-100,100),Ts=function(a,r,s){var n=a,l=r,i=n[l];if(typeof i<"u"){if(typeof i!="number")return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, expected `number`."));if(i<0)return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, width must be greater or equal to 0."))}return null},Qn=Ps,Zn=Ts,Di=function(a){var r=a.className,s=a.formatHour,n=a.hourHandLength,l=n===void 0?50:n,i=a.hourHandOppositeLength,d=a.hourHandWidth,o=d===void 0?4:d,u=a.hourMarksLength,c=u===void 0?10:u,m=a.hourMarksWidth,x=m===void 0?3:m,h=a.locale,g=a.minuteHandLength,b=g===void 0?70:g,y=a.minuteHandOppositeLength,v=a.minuteHandWidth,p=v===void 0?2:v,S=a.minuteMarksLength,O=S===void 0?6:S,w=a.minuteMarksWidth,P=w===void 0?1:w,I=a.renderHourMarks,k=I===void 0?!0:I,C=a.renderMinuteHand,F=C===void 0?!0:C,L=a.renderMinuteMarks,W=L===void 0?!0:L,$=a.renderNumbers,Y=a.renderSecondHand,H=Y===void 0?!0:Y,N=a.secondHandLength,B=N===void 0?90:N,ie=a.secondHandOppositeLength,M=a.secondHandWidth,Q=M===void 0?1:M,xe=a.size,he=xe===void 0?150:xe,fe=a.useMillisecondPrecision,X=a.value;function Te(){if(!W)return null;for(var _e=[],be=1;be<=60;be+=1){var q=k&&!(be%5);q||_e.push(_.createElement(ym,{key:"minute_".concat(be),angle:be*6,length:O,name:"minute",width:P}))}return _e}function We(){if(!k)return null;for(var _e=[],be=1;be<=12;be+=1)_e.push(_.createElement(_m,{key:"hour_".concat(be),angle:be*30,formatHour:s,length:c,locale:h,name:"hour",number:$?be:void 0,width:x}));return _e}function ze(){return _.createElement("div",{className:"react-clock__face"},Te(),We())}function Fe(){var _e=X?Ge(X)*30+Rt(X)/2+wa(X)/120+(fe?ar(X)/12e4:0):0;return _.createElement(cr,{angle:_e,length:l,name:"hour",oppositeLength:i,width:o})}function Pe(){if(!F)return null;var _e=X?Ge(X)*360+Rt(X)*6+wa(X)/10+(fe?ar(X)/1e4:0):0;return _.createElement(cr,{angle:_e,length:b,name:"minute",oppositeLength:y,width:p})}function Ke(){if(!H)return null;var _e=X?Rt(X)*360+wa(X)*6+(fe?ar(X)*.006:0):0;return _.createElement(cr,{angle:_e,length:B,name:"second",oppositeLength:ie,width:Q})}return _.createElement("time",{className:ot("react-clock",r),dateTime:X instanceof Date?X.toISOString():X||void 0,style:{width:he,height:he}},ze(),Fe(),Pe(),Ke())};Di.propTypes={className:j.oneOfType([j.string,j.arrayOf(j.string)]),formatHour:j.func,hourHandLength:Ps,hourHandOppositeLength:or,hourHandWidth:Ts,hourMarksLength:Qn,hourMarksWidth:Zn,locale:j.string,minuteHandLength:Ps,minuteHandOppositeLength:or,minuteHandWidth:Ts,minuteMarksLength:Qn,minuteMarksWidth:Zn,renderHourMarks:j.bool,renderMinuteHand:j.bool,renderMinuteMarks:j.bool,renderNumbers:j.bool,renderSecondHand:j.bool,secondHandLength:Ps,secondHandOppositeLength:or,secondHandWidth:Ts,size:j.oneOfType([j.number,j.string]),value:j.oneOfType([j.string,j.instanceOf(Date)])};const Sm=Di;function He(t){return t.getBoundingClientRect()}function Xn(t,a){return{get collidedTop(){return He(t).top<He(a).top},get collidedBottom(){return He(t).bottom>He(a).bottom},get collidedLeft(){return He(t).left<He(a).left},get collidedRight(){return He(t).right>He(a).right},get overflowTop(){return He(a).top-He(t).top},get overflowBottom(){return He(t).bottom-He(a).bottom},get overflowLeft(){return He(a).left-He(t).left},get overflowRight(){return He(t).right-He(a).right}}}var Cm=!0;function Jn(t,a){if(!Cm){if(t)return;var r="Warning: "+a;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var km=globalThis&&globalThis.__extends||function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function s(){this.constructor=a}a.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),ta=globalThis&&globalThis.__assign||function(){return ta=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ta.apply(this,arguments)},Dm=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},Pi=typeof document<"u",el=Pi&&"CSS"in window&&"supports"in window.CSS&&CSS.supports("display","contents"),Pm=Pi&&"MutationObserver"in window;function Ss(t){return t.charAt(0).toUpperCase()+t.slice(1)}function tl(t){for(var a=t.parentElement;a;){var r=window.getComputedStyle(a).overflow;if(r.split(" ").every(function(s){return s==="auto"||s==="scroll"}))return a;a=a.parentElement}return document.documentElement}function Ti(t){var a=t.axis,r=t.container,s=t.element,n=t.invertAxis,l=t.scrollContainer,i=t.secondary,d=t.spacing,o=window.getComputedStyle(s),u=r.parentElement;if(!u)return;var c=Xn(u,l),m=Xn(u,document.documentElement),x=a==="x",h=x?"left":"top",g=x?"right":"bottom",b=x?"width":"height",y="overflow".concat(Ss(h)),v="overflow".concat(Ss(g)),p="scroll".concat(Ss(h)),S=Ss(b),O="offset".concat(S),w="client".concat(S),P="min-".concat(b),I=l[O]-l[w],k=typeof d=="object"?d[h]:d,C=-Math.max(c[y],m[y]+document.documentElement[p])-k,F=typeof d=="object"?d[g]:d,L=-Math.max(c[v],m[v]-document.documentElement[p])-F-I;i&&(C+=u[w],L+=u[w]);var W=s[O];function $(){s.style[h]="auto",s.style[g]=i?"0":"100%"}function Y(){s.style[h]=i?"0":"100%",s.style[g]="auto"}function H(Q,xe){var he=W<=Q;return he&&xe(),he}function N(){return H(C,$)}function B(){return H(L,Y)}function ie(){var Q=C>L,xe=o.getPropertyValue(P),he=xe?parseInt(xe,10):null;function fe(X){Jn(!he||X>=he,"<Fit />'s child will not fit anywhere with its current ".concat(P," of ").concat(he,"px."));var Te=Math.max(X,he||0);Jn(!1,"<Fit />'s child needed to have its ".concat(b," decreased to ").concat(Te,"px.")),s.style[b]="".concat(Te,"px")}Q?(fe(C),$()):(fe(L),Y())}var M;n?M=N()||B():M=B()||N(),M||ie()}function Tm(t){Ti(t)}function Om(t){Ti(ta(ta({},t),{axis:t.axis==="x"?"y":"x",secondary:!0}))}function Am(t){var a=t.invertAxis,r=t.invertSecondaryAxis,s=Dm(t,["invertAxis","invertSecondaryAxis"]);Tm(ta(ta({},s),{invertAxis:a})),Om(ta(ta({},s),{invertAxis:r}))}var Em=function(t){km(a,t);function a(){var r=t!==null&&t.apply(this,arguments)||this;return r.fit=function(){var s=r,n=s.scrollContainer,l=s.container,i=s.element;if(!(!n||!l||!i)){var d=i.clientWidth,o=i.clientHeight;if(!(r.elementWidth===d&&r.elementHeight===o)){r.elementWidth=d,r.elementHeight=o;var u=l.parentElement;if(u){var c=window.getComputedStyle(i),m=c.position;m!=="absolute"&&(i.style.position="absolute");var x=window.getComputedStyle(u),h=x.position;h!=="relative"&&h!=="absolute"&&(u.style.position="relative");var g=r.props,b=g.invertAxis,y=g.invertSecondaryAxis,v=g.mainAxis,p=v===void 0?"y":v,S=g.spacing,O=S===void 0?8:S;Am({axis:p,container:l,element:i,invertAxis:b,invertSecondaryAxis:y,scrollContainer:n,spacing:O})}}}},r}return a.prototype.componentDidMount=function(){var r=this;if(!el){var s=vr.findDOMNode(this);if(!s||!(s instanceof HTMLElement))return;this.container=s,this.element=s,this.scrollContainer=tl(s)}this.fit();var n=function(){r.fit()};if(Pm&&this.element){var l=new MutationObserver(n);l.observe(this.element,{attributes:!0,attributeFilter:["class","style"]})}},a.prototype.render=function(){var r=this,s=this.props.children,n=_.Children.only(s);return el?_.createElement("span",{ref:function(l){r.container=l;var i=l&&l.firstElementChild;!i||!(i instanceof HTMLElement)||(r.element=i,r.scrollContainer=tl(i))},style:{display:"contents"}},n):n},a.propTypes={children:j.node.isRequired,invertAxis:j.bool,invertSecondaryAxis:j.bool,mainAxis:j.oneOf(["x","y"]),spacing:j.oneOfType([j.number,j.shape({bottom:j.number.isRequired,left:j.number.isRequired,right:j.number.isRequired,top:j.number.isRequired})])},a}(f.Component);const al=Em;function Fm(t){var a=t.children;return _.createElement("span",{className:"react-datetime-picker__inputGroup__divider"},a)}var Im=["normal","small-caps"];function Nn(t){if(!t)return"";var a=window.getComputedStyle(t);if(a.font)return a.font;var r=a.fontFamily!=="";if(!r)return"";var s=Im.includes(a.fontVariant)?a.fontVariant:"normal";return"".concat(a.fontStyle," ").concat(s," ").concat(a.fontWeight," ").concat(a.fontSize," / ").concat(a.lineHeight," ").concat(a.fontFamily)}var sl;function Lm(t,a){var r=sl||(sl=document.createElement("canvas")),s=r.getContext("2d");if(!s)return null;s.font=a;var n=s.measureText(t).width;return Math.ceil(n)}function ca(t){if(typeof document>"u"||!t)return null;var a=Nn(t),r=t.value||t.placeholder,s=Lm(r,a);return s===null?null:(t.style.width="".concat(s,"px"),s)}var wn=typeof document<"u",Mm=wn?f.useLayoutEffect:f.useEffect,Wm=wn&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),zm=wn&&/Firefox/.test(navigator.userAgent);function Rm(t){var a=t.target;Wm?requestAnimationFrame(function(){return a.select()}):a.select()}function Um(t){if(document.readyState==="complete")return;function a(){ca(t)}window.addEventListener("load",a)}function Hm(t){if(!document.fonts)return;var a=Nn(t);if(!a)return;var r=document.fonts.check(a);if(r)return;function s(){ca(t)}document.fonts.addEventListener("loadingdone",s)}function Vm(t){if(t&&"selectionStart"in t&&t.selectionStart!==null&&"selectionEnd"in t&&t.selectionEnd!==null)return t.value.slice(t.selectionStart,t.selectionEnd);if("getSelection"in window){var a=window.getSelection();return a&&a.toString()}return null}function $m(t){if(t!==null)return function(r){if(!zm){var s=r.key,n=r.target,l=n.value,i=s.length===1&&/\d/.test(s),d=Vm(n);(!i||!(d||l.length<t))&&r.preventDefault()}}}function _n(t){var a=t.ariaLabel,r=t.autoFocus,s=t.className,n=t.disabled,l=t.inputRef,i=t.max,d=t.min,o=t.name,u=t.nameForClass,c=t.onChange,m=t.onKeyDown,x=t.onKeyUp,h=t.placeholder,g=h===void 0?"--":h,b=t.required,y=t.showLeadingZeros,v=t.step,p=t.value;Mm(function(){!l||!l.current||(ca(l.current),Um(l.current),Hm(l.current))},[l,p]);var S=y&&p&&Number(p)<10&&(p==="0"||!p.toString().startsWith("0")),O=i?i.toString().length:null;return _.createElement(_.Fragment,null,S?_.createElement("span",{className:"".concat(s,"__leadingZero")},"0"):null,_.createElement("input",{"aria-label":a,autoComplete:"off",autoFocus:r,className:ot("".concat(s,"__input"),"".concat(s,"__").concat(u||o),S&&"".concat(s,"__input--hasLeadingZero")),"data-input":"true",disabled:n,inputMode:"numeric",max:i,min:d,name:o,onChange:c,onFocus:Rm,onKeyDown:m,onKeyPress:$m(O),onKeyUp:function(w){ca(w.target),x&&x(w)},placeholder:g,ref:l,required:b,step:v,type:"number",value:p!==null?p:""}))}function Oi(t){return t!==null&&t!==!1&&!Number.isNaN(Number(t))}function Gs(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return Math.min.apply(Math,t.filter(Oi))}function Qs(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return Math.max.apply(Math,t.filter(Oi))}var Fr=globalThis&&globalThis.__assign||function(){return Fr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Fr.apply(this,arguments)},qm=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function Km(t){var a=t.maxDate,r=t.minDate,s=t.month,n=t.year,l=qm(t,["maxDate","minDate","month","year"]),i=function(){return s?hn(new Date(Number(n),Number(s)-1,1)):31}();function d(c){return n===re(c).toString()&&s===zt(c).toString()}var o=Gs(i,a&&d(a)&&Vt(a)),u=Qs(1,r&&d(r)&&Vt(r));return _.createElement(_n,Fr({max:o,min:u,name:"day"},l))}var Ir=globalThis&&globalThis.__assign||function(){return Ir=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Ir.apply(this,arguments)},Ym=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function Bm(t){var a=t.maxDate,r=t.minDate,s=t.year,n=Ym(t,["maxDate","minDate","year"]);function l(o){return o&&s===re(o).toString()}var i=Gs(12,a&&l(a)&&zt(a)),d=Qs(1,r&&l(r)&&zt(r));return _.createElement(_n,Ir({max:i,min:d,name:"month"},n))}var dr=new Map;function Gm(t){return function(r,s){var n=r||Ka();dr.has(n)||dr.set(n,new Map);var l=dr.get(n);return l.has(t)||l.set(t,new Intl.DateTimeFormat(n||void 0,t).format),l.get(t)(s)}}function Qm(t){var a=new Date(t);return new Date(a.setHours(12))}function Ai(t){return function(a,r){return Gm(t)(a,Qm(r))}}var Zm={month:"long"},Xm={month:"short"},Jm=Ai(Zm),ex=Ai(Xm),tx=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))};function ax(t){var a=t.ariaLabel,r=t.autoFocus,s=t.className,n=t.disabled,l=t.inputRef,i=t.locale,d=t.maxDate,o=t.minDate,u=t.onChange,c=t.onKeyDown,m=t.placeholder,x=m===void 0?"--":m,h=t.required,g=t.short,b=t.value,y=t.year;function v(I){return I&&y===re(I).toString()}var p=Gs(12,d&&v(d)&&zt(d)),S=Qs(1,o&&v(o)&&zt(o)),O=tx([],Array(12),!0).map(function(I,k){return new Date(2019,k,1)}),w="month",P=g?ex:Jm;return _.createElement("select",{"aria-label":a,autoFocus:r,className:ot("".concat(s,"__input"),"".concat(s,"__").concat(w)),"data-input":"true","data-select":"true",disabled:n,name:w,onChange:u,onKeyDown:c,ref:l,required:h,value:b!==null?b:""},!b&&_.createElement("option",{value:""},x),O.map(function(I){var k=zt(I),C=k<S||k>p;return _.createElement("option",{key:k,disabled:C,value:k},P(i,I))}))}var Lr=globalThis&&globalThis.__assign||function(){return Lr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Lr.apply(this,arguments)},sx=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function rx(t){var a=t.maxDate,r=t.minDate,s=t.placeholder,n=s===void 0?"----":s,l=t.valueType,i=sx(t,["maxDate","minDate","placeholder","valueType"]),d=Gs(275760,a&&re(a)),o=Qs(1,r&&re(r)),u=function(){return l==="century"?10:1}();return _.createElement(_n,Lr({max:d,min:o,name:"year",placeholder:n,step:u},i))}var Sn=typeof document<"u",nx=Sn?f.useLayoutEffect:f.useEffect,lx=Sn&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),ix=Sn&&/Firefox/.test(navigator.userAgent);function cx(t){var a=t.target;lx?requestAnimationFrame(function(){return a.select()}):a.select()}function ox(t){if(document.readyState==="complete")return;function a(){ca(t)}window.addEventListener("load",a)}function dx(t){if(!document.fonts)return;var a=Nn(t);if(!a)return;var r=document.fonts.check(a);if(r)return;function s(){ca(t)}document.fonts.addEventListener("loadingdone",s)}function ux(t){if(t&&"selectionStart"in t&&t.selectionStart!==null&&"selectionEnd"in t&&t.selectionEnd!==null)return t.value.slice(t.selectionStart,t.selectionEnd);if("getSelection"in window){var a=window.getSelection();return a&&a.toString()}return null}function mx(t){if(t!==null)return function(r){if(!ix){var s=r.key,n=r.target,l=n.value,i=s.length===1&&/\d/.test(s),d=ux(n);(!i||!(d||l.length<t))&&r.preventDefault()}}}function Zs(t){var a=t.ariaLabel,r=t.autoFocus,s=t.className,n=t.disabled,l=t.inputRef,i=t.max,d=t.min,o=t.name,u=t.nameForClass,c=t.onChange,m=t.onKeyDown,x=t.onKeyUp,h=t.placeholder,g=h===void 0?"--":h,b=t.required,y=t.showLeadingZeros,v=t.step,p=t.value;nx(function(){!l||!l.current||(ca(l.current),ox(l.current),dx(l.current))},[l,p]);var S=y&&p&&Number(p)<10&&(p==="0"||!p.toString().startsWith("0")),O=i?i.toString().length:null;return _.createElement(_.Fragment,null,S?_.createElement("span",{className:"".concat(s,"__leadingZero")},"0"):null,_.createElement("input",{"aria-label":a,autoComplete:"off",autoFocus:r,className:ot("".concat(s,"__input"),"".concat(s,"__").concat(u||o),S&&"".concat(s,"__input--hasLeadingZero")),"data-input":"true",disabled:n,inputMode:"numeric",max:i,min:d,name:o,onChange:c,onFocus:cx,onKeyDown:m,onKeyPress:mx(O),onKeyUp:function(w){ca(w.target),x&&x(w)},placeholder:g,ref:l,required:b,step:v,type:"number",value:p!==null?p:""}))}function ts(t){var a=Number(t)%12||12;return[a,Number(t)<12?"am":"pm"]}var ur=new Map;function xx(t){return function(r,s){var n=r||Ka();ur.has(n)||ur.set(n,new Map);var l=ur.get(n);return l.has(t)||l.set(t,new Intl.DateTimeFormat(n||void 0,t).format),l.get(t)(s)}}var hx=["9",""],rl=new RegExp("[".concat(hx.join(""),"]")),nl=xx({hour:"numeric"});function fx(t){var a=nl(t,new Date(2017,0,1,9)),r=nl(t,new Date(2017,0,1,21)),s=a.split(rl),n=s[0],l=s[1],i=r.split(rl),d=i[0],o=i[1];if(o!==void 0){if(n!==d)return[n,d].map(function(u){return u.trim()});if(l!==o)return[l,o].map(function(u){return u.trim()})}return["AM","PM"]}function Ei(t){return t!==null&&t!==!1&&!Number.isNaN(Number(t))}function Xs(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return Math.min.apply(Math,t.filter(Ei))}function Js(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return Math.max.apply(Math,t.filter(Ei))}var Mr=globalThis&&globalThis.__assign||function(){return Mr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Mr.apply(this,arguments)},px=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function gx(t){var a=t.amPm,r=t.maxTime,s=t.minTime,n=t.value,l=px(t,["amPm","maxTime","minTime","value"]),i=Xs(12,r&&function(){var u=ts(Ge(r)),c=u[0],m=u[1];return m!==a?null:c}()),d=Js(1,s&&function(){var u=ts(Ge(s)),c=u[0],m=u[1];return m!==a||c===12?null:c}()),o=n?ts(n)[0].toString():"";return _.createElement(Zs,Mr({max:i,min:d,name:"hour12",nameForClass:"hour",value:o},l))}var Wr=globalThis&&globalThis.__assign||function(){return Wr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Wr.apply(this,arguments)},vx=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function jx(t){var a=t.maxTime,r=t.minTime,s=vx(t,["maxTime","minTime"]),n=Xs(23,a&&Ge(a)),l=Js(0,r&&Ge(r));return _.createElement(Zs,Wr({max:n,min:l,name:"hour24",nameForClass:"hour"},s))}var zr=globalThis&&globalThis.__assign||function(){return zr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},zr.apply(this,arguments)},yx=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function bx(t){var a=t.hour,r=t.maxTime,s=t.minTime,n=t.showLeadingZeros,l=n===void 0?!0:n,i=yx(t,["hour","maxTime","minTime","showLeadingZeros"]);function d(c){return a===Ge(c).toString()}var o=Xs(59,r&&d(r)&&Rt(r)),u=Js(0,s&&d(s)&&Rt(s));return _.createElement(Zs,zr({max:o,min:u,name:"minute",showLeadingZeros:l},i))}var Rr=globalThis&&globalThis.__assign||function(){return Rr=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Rr.apply(this,arguments)},Nx=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};function wx(t){var a=t.hour,r=t.maxTime,s=t.minTime,n=t.minute,l=t.showLeadingZeros,i=l===void 0?!0:l,d=Nx(t,["hour","maxTime","minTime","minute","showLeadingZeros"]);function o(m){return a===Ge(m).toString()&&n===Rt(m).toString()}var u=Xs(59,r&&o(r)&&wa(r)),c=Js(0,s&&o(s)&&wa(s));return _.createElement(Zs,Rr({max:u,min:c,name:"second",showLeadingZeros:i},d))}function _x(t){var a=t.ariaLabel,r=t.autoFocus,s=t.className,n=t.disabled,l=t.inputRef,i=t.locale,d=t.maxTime,o=t.minTime,u=t.onChange,c=t.onKeyDown,m=t.required,x=t.value,h=o?ts(Ge(o))[1]==="pm":!1,g=d?ts(Ge(d))[1]==="am":!1,b="amPm",y=fx(i),v=y[0],p=y[1];return _.createElement("select",{"aria-label":a,autoFocus:r,className:ot("".concat(s,"__input"),"".concat(s,"__").concat(b)),"data-input":"true","data-select":"true",disabled:n,name:b,onChange:u,onKeyDown:c,ref:l,required:m,value:x!==null?x:""},!x&&_.createElement("option",{value:""},"--"),_.createElement("option",{disabled:h,value:"am"},v),_.createElement("option",{disabled:g,value:"pm"},p))}function Sx(t){var a=t.ariaLabel,r=t.disabled,s=t.maxDate,n=t.minDate,l=t.name,i=t.onChange,d=t.required,o=t.value,u=t.valueType,c=function(){switch(u){case"hour":return function(h){return"".concat(br(h),"T").concat(Ge(h),":00")};case"minute":return function(h){return"".concat(br(h),"T").concat(Zd(h))};case"second":return Xd;default:throw new Error("Invalid valueType")}}(),m=function(){switch(u){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}}();function x(h){h.stopPropagation()}return _.createElement("input",{"aria-label":a,disabled:r,hidden:!0,max:s?c(s):void 0,min:n?c(n):void 0,name:l,onChange:i,onFocus:x,required:d,step:m,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"datetime-local",value:o?c(o):""})}var mr=new Map;function Ls(t){return function(r,s){var n=r||Ka();mr.has(n)||mr.set(n,new Map);var l=mr.get(n);return l.has(t)||l.set(t,new Intl.DateTimeFormat(n||void 0,t).format),l.get(t)(s)}}var xr=new Map;function Cx(t){return function(a,r){var s=a||Ka();xr.has(s)||xr.set(s,new Map);var n=xr.get(s);return n.has(t)||n.set(t,new Intl.NumberFormat(s||void 0,t).format),n.get(t)(r)}}var kx={day:"numeric",month:"numeric",year:"numeric"},Dx=Ls(kx);function ll(t,a){var r=Number(t);return a==="am"&&r===12?r=0:a==="pm"&&r<12&&(r+=12),r}function Px(t){var a=Number(t)%12||12;return[a,Number(t)<12?"am":"pm"]}function Tx(t,a,r){return a&&a>t?a:r&&r<t?r:t}var Ox=["9",""],il=new RegExp("[".concat(Ox.join(""),"]")),cl=Ls({hour:"numeric"});function Ax(t){var a=cl(t,new Date(2017,0,1,9)),r=cl(t,new Date(2017,0,1,21)),s=a.split(il),n=s[0],l=s[1],i=r.split(il),d=i[0],o=i[1];if(o!==void 0){if(n!==d)return[n,d].map(function(u){return u.trim()});if(l!==o)return[l,o].map(function(u){return u.trim()})}return["AM","PM"]}var ht=globalThis&&globalThis.__assign||function(){return ht=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ht.apply(this,arguments)},ol=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))},Cs={},as=new Date;as.setFullYear(1,0,1);as.setHours(0,0,0,0);var hr=new Date(864e13),Ex=["hour","minute","second"];function Fi(t){return t instanceof Date?t:new Date(t)}function dl(t,a,r,s){return a===re(t).toString()&&r===zt(t).toString()&&s===Vt(t).toString()}function Fx(t,a){var r=Array.isArray(t)?t[a]:t;if(!r)return null;var s=Fi(r);if(isNaN(s.getTime()))throw new Error("Invalid date: ".concat(t));return s}function Ix(t,a){var r=t.value,s=t.minDate,n=t.maxDate,l=Fx(r,a);return l?Tx(l,s,n):null}var Lx=function(t){return Ix(t,0)};function Mx(t){return t.dataset.input==="true"}function ul(t,a){var r=t;do r=r[a];while(r&&!Mx(r));return r}function fr(t){t&&t.focus()}function Wx(t,a,r){var s=[],n=new RegExp(Object.keys(a).map(function(i){return"".concat(i,"+")}).join("|"),"g"),l=t.match(n);return t.split(n).reduce(function(i,d,o){var u=d&&_.createElement(Fm,{key:"separator_".concat(o)},d),c=ol(ol([],i,!0),[u],!1),m=l&&l[o];if(m){var x=a[m]||a[Object.keys(a).find(function(h){return m.match(h)})];if(!x)return c;!r&&s.includes(x)?c.push(m):(c.push(x(m,o)),s.push(x))}return c},[])}var ks=Cx({useGrouping:!1});function zx(t){var a=t.amPmAriaLabel,r=t.autoFocus,s=t.className,n=t.dayAriaLabel,l=t.dayPlaceholder,i=t.disabled,d=t.format,o=t.hourAriaLabel,u=t.hourPlaceholder,c=t.isWidgetOpen,m=t.locale,x=t.maxDate,h=t.maxDetail,g=h===void 0?"minute":h,b=t.minDate,y=t.minuteAriaLabel,v=t.minutePlaceholder,p=t.monthAriaLabel,S=t.monthPlaceholder,O=t.name,w=O===void 0?"datetime":O,P=t.nativeInputAriaLabel,I=t.onChange,k=t.onInvalidChange,C=t.required,F=t.secondAriaLabel,L=t.secondPlaceholder,W=t.showLeadingZeros,$=t.value,Y=t.yearAriaLabel,H=t.yearPlaceholder,N=f.useState(null),B=N[0],ie=N[1],M=f.useState(null),Q=M[0],xe=M[1],he=f.useState(null),fe=he[0],X=he[1],Te=f.useState(null),We=Te[0],ze=Te[1],Fe=f.useState(null),Pe=Fe[0],Ke=Fe[1],_e=f.useState(null),be=_e[0],q=_e[1],G=f.useState(null),ye=G[0],Ne=G[1],ut=f.useState(null),mt=ut[0],ua=ut[1],Ea=f.useRef(null),ma=f.useRef(null),xa=f.useRef(null),Ie=f.useRef(null),At=f.useRef(null),ha=f.useRef(null),Ye=f.useRef(null),Et=f.useRef(null),Yt=f.useRef(null),wt=f.useState(c),Ft=wt[0],fa=wt[1],Bt=f.useRef();f.useEffect(function(){fa(c)},[c]),f.useEffect(function(){var D=Lx({value:$,minDate:b,maxDate:x});D?(ie(Px(Ge(D))[1]),xe(re(D).toString()),X(zt(D).toString()),ze(Vt(D).toString()),Ke(Ge(D).toString()),q(Rt(D).toString()),Ne(wa(D).toString()),ua(Fi(D))):(ie(null),xe(null),X(null),ze(null),Ke(null),q(null),Ne(null),ua(null))},[$,b,x,Ft]);var Gt=g,Fa=function(){var D=Ex.indexOf(g),E=Cs[D]||function(){var z={hour:"numeric"};return D>=1&&(z.minute="numeric"),D>=2&&(z.second="numeric"),Cs[D]=z,z}();return Ls(E)}(),pa=function(){var D=2017,E=11,z=11,U=new Date(D,E,z),Se=Dx(m,U),Ce=["year","month","day"],Je=["y","M","d"];function Lt(Mt,ya){var Jt=Cs[Mt]||function(){var Wt,ct=(Wt={},Wt[Mt]="numeric",Wt);return Cs[Mt]=ct,ct}();return Ls(Jt)(m,ya).match(/\d{1,}/)}var nt=Se;return Ce.forEach(function(Mt,ya){var Jt=Lt(Mt,U);if(Jt){var Wt=Jt[0],ct=Je[ya];nt=nt.replace(Wt,ct)}}),nt=nt.replace("17","y"),nt}(),xt=function(){var D=21,E=9,z=13,U=14,Se=new Date(2017,0,1,D,z,U);return Fa(m,Se).replace(ks(m,E),"h").replace(ks(m,D),"H").replace(ks(m,z),"mm").replace(ks(m,U),"ss").replace(new RegExp(Ax(m).join("|")),"a")}(),It=d||"".concat(pa,"").concat(xt),ga=function(){var D=pa.match(/[^0-9a-z]/i);return D?D[0]:null}(),Ga=function(){var D=xt.match(/[^0-9a-z]/i);return D?D[0]:null}(),Qt=function(){if(x&&dl(x,Q,fe,We))return yr(x||hr)}(),Qa=function(){if(b&&dl(b,Q,fe,We))return yr(b||as)}();function va(D){if(D.target===D.currentTarget){var E=D.target.children[1];fr(E)}}function ke(D){switch(Bt.current=D.key,D.key){case"ArrowLeft":case"ArrowRight":case ga:case Ga:{D.preventDefault();var E=D.target,z=D.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",U=ul(E,z);fr(U);break}}}function De(D){var E=D.key,z=D.target,U=Bt.current===E;if(U){var Se=!isNaN(Number(E));if(Se){var Ce=z.getAttribute("max");if(Ce){var Je=z.value;if(Number(Je)*10>Number(Ce)||Je.length>=Ce.length){var Lt="nextElementSibling",nt=ul(z,Lt);fr(nt)}}}}}function Zt(){if(!I)return;function D(Ue){return!!Ue}var E=[Ea.current,At.current,xa.current,Ie.current,ma.current,ha.current,Ye.current,Et.current,Yt.current].filter(D),z=E.slice(1),U={};E.forEach(function(Ue){U[Ue.name]=Ue.type==="number"?"valueAsNumber"in Ue?Ue.valueAsNumber:Number(Ue.value):Ue.value});var Se=z.every(function(Ue){return!Ue.value});if(Se){I(null,!1);return}var Ce=E.every(function(Ue){return Ue.value}),Je=E.every(function(Ue){return Ue.validity.valid});if(Ce&&Je){var Lt=Number(U.year||new Date().getFullYear()),nt=Number(U.month||1)-1,Mt=Number(U.day||1),ya=Number(U.hour24||U.hour12&&U.amPm&&ll(U.hour12,U.amPm)||0),Jt=Number(U.minute||0),Wt=Number(U.second||0),ct=new Date;ct.setFullYear(Lt,nt,Mt),ct.setHours(ya,Jt,Wt,0),I(ct,!1);return}k&&k()}function ce(D){var E=D.target,z=E.name,U=E.value;switch(z){case"amPm":ie(U);break;case"year":xe(U);break;case"month":X(U);break;case"day":ze(U);break;case"hour12":Ke(U?ll(U,B||"am").toString():"");break;case"hour24":Ke(U);break;case"minute":q(U);break;case"second":Ne(U);break}Zt()}function Xe(D){var E=D.target.value;if(I){var z=function(){if(!E)return null;var U=E.split("T"),Se=U[0],Ce=U[1],Je=Se.split("-"),Lt=Je[0],nt=Je[1],Mt=Je[2],ya=Number(Lt),Jt=Number(nt)-1||0,Wt=Number(Mt)||1,ct=Ce.split(":"),Ue=ct[0],Wi=ct[1],zi=ct[2],Ri=Number(Ue)||0,Ui=Number(Wi)||0,Hi=Number(zi)||0,er=new Date;return er.setFullYear(ya,Jt,Wt),er.setHours(Ri,Ui,Hi,0),er}();I(z,!1)}}var at={className:s,disabled:i,maxDate:x||hr,minDate:b||as,onChange:ce,onKeyDown:ke,onKeyUp:De,required:!!(C||Ft)},K={maxTime:Qt,minTime:Qa};function J(D,E){if(D&&D.length>2)throw new Error("Unsupported token: ".concat(D));var z=D&&D.length===2;return _.createElement(Km,ht({key:"day"},at,{ariaLabel:n,autoFocus:E===0&&r,inputRef:At,month:fe,placeholder:l,showLeadingZeros:z||W,value:We,year:Q}))}function Le(D,E){if(D&&D.length>4)throw new Error("Unsupported token: ".concat(D));if(D.length>2)return _.createElement(ax,ht({key:"month"},at,{ariaLabel:p,autoFocus:E===0&&r,inputRef:Ie,locale:m,placeholder:S,short:D.length===3,value:fe,year:Q}));var z=D&&D.length===2;return _.createElement(Bm,ht({key:"month"},at,{ariaLabel:p,autoFocus:E===0&&r,inputRef:xa,placeholder:S,showLeadingZeros:z||W,value:fe,year:Q}))}function Re(D,E){return _.createElement(rx,ht({key:"year"},at,{ariaLabel:Y,autoFocus:E===0&&r,inputRef:ma,placeholder:H,value:Q,valueType:"day"}))}function we(D,E){if(D&&D.length>2)throw new Error("Unsupported token: ".concat(D));var z=D?D.length===2:!1;return _.createElement(gx,ht({key:"hour12"},at,K,{amPm:B,ariaLabel:o,autoFocus:E===0&&r,inputRef:ha,placeholder:u,showLeadingZeros:z,value:Pe}))}function st(D,E){if(D&&D.length>2)throw new Error("Unsupported token: ".concat(D));var z=D?D.length===2:!1;return _.createElement(jx,ht({key:"hour24"},at,K,{ariaLabel:o,autoFocus:E===0&&r,inputRef:Ye,placeholder:u,showLeadingZeros:z,value:Pe}))}function it(D,E){return/h/.test(D)?we(D,E):st(D,E)}function rt(D,E){if(D&&D.length>2)throw new Error("Unsupported token: ".concat(D));var z=D?D.length===2:!1;return _.createElement(bx,ht({key:"minute"},at,K,{ariaLabel:y,autoFocus:E===0&&r,hour:Pe,inputRef:Et,placeholder:v,showLeadingZeros:z,value:be}))}function Za(D,E){if(D&&D.length>2)throw new Error("Unsupported token: ".concat(D));var z=D?D.length===2:!0;return _.createElement(wx,ht({key:"second"},at,K,{ariaLabel:F,autoFocus:E===0&&r,hour:Pe,inputRef:Yt,minute:be,placeholder:L,showLeadingZeros:z,value:ye}))}function Xt(D,E){return _.createElement(_x,ht({key:"ampm"},at,K,{ariaLabel:a,autoFocus:E===0&&r,inputRef:Ea,locale:m,onChange:ce,value:B}))}function ja(){var D={d:J,M:Le,y:Re,h:it,H:it,m:rt,s:Za,a:Xt},E=typeof d<"u";return Wx(It,D,E)}function Ia(){return _.createElement(Sx,{key:"datetime",ariaLabel:P,disabled:i,maxDate:x||hr,minDate:b||as,name:w,onChange:Xe,required:C,value:mt,valueType:Gt})}return _.createElement("div",{className:s,onClick:va},Ia(),ja())}var Rx=globalThis&&globalThis.__spreadArray||function(t,a,r){if(r||arguments.length===2)for(var s=0,n=a.length,l;s<n;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))},Ux=["hour","minute","second"],Hx=Rx([],Ux,!0),Vx=function(a,r,s){var n=a,l=r,i=n[l];if(!i)return null;if(!(i instanceof Date))return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, expected instance of `Date`."));var d=a.maxDate;return d&&i>d?new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, minDate cannot be larger than maxDate.")):null},$x=function(a,r,s){var n=a,l=r,i=n[l];if(!i)return null;if(!(i instanceof Date))return new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, expected instance of `Date`."));var d=a.minDate;return d&&i<d?new Error("Invalid prop `".concat(r,"` of type `").concat(typeof i,"` supplied to `").concat(s,"`, maxDate cannot be smaller than minDate.")):null};j.oneOf(Hx);var qx=function(t){return j.arrayOf(t)},aa=globalThis&&globalThis.__assign||function(){return aa=Object.assign||function(t){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},aa.apply(this,arguments)},pr=globalThis&&globalThis.__rest||function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)a.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r},Kx=typeof document<"u",Be="react-datetime-picker",Yx=["mousedown","focusin","touchstart"],Ii=["hour","minute","second"],Li={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},Bx=_.createElement("svg",aa({},Li,{className:"".concat(Be,"__calendar-button__icon ").concat(Be,"__button__icon")}),_.createElement("rect",{fill:"none",height:"15",width:"15",x:"2",y:"2"}),_.createElement("line",{x1:"6",x2:"6",y1:"0",y2:"4"}),_.createElement("line",{x1:"13",x2:"13",y1:"0",y2:"4"})),Gx=_.createElement("svg",aa({},Li,{className:"".concat(Be,"__clear-button__icon ").concat(Be,"__button__icon")}),_.createElement("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),_.createElement("line",{x1:"15",x2:"4",y1:"4",y2:"15"})),Cn=function(a){var r=a.amPmAriaLabel,s=a.autoFocus,n=a.calendarAriaLabel,l=a.calendarIcon,i=l===void 0?Bx:l,d=a.className,o=a.clearAriaLabel,u=a.clearIcon,c=u===void 0?Gx:u,m=a.closeWidgets,x=m===void 0?!0:m,h=a["data-testid"],g=a.dayAriaLabel,b=a.dayPlaceholder,y=a.disableCalendar,v=a.disableClock,p=a.disabled,S=a.format,O=a.hourAriaLabel,w=a.hourPlaceholder,P=a.id,I=a.isCalendarOpen,k=I===void 0?null:I,C=a.isClockOpen,F=C===void 0?null:C,L=a.locale,W=a.maxDate,$=a.maxDetail,Y=$===void 0?"minute":$,H=a.minDate,N=a.minuteAriaLabel,B=a.minutePlaceholder,ie=a.monthAriaLabel,M=a.monthPlaceholder,Q=a.name,xe=Q===void 0?"datetime":Q,he=a.nativeInputAriaLabel,fe=a.onCalendarClose,X=a.onCalendarOpen,Te=a.onChange,We=a.onClockClose,ze=a.onClockOpen,Fe=a.onFocus,Pe=a.onInvalidChange,Ke=a.openWidgetsOnFocus,_e=Ke===void 0?!0:Ke,be=a.required,q=a.secondAriaLabel,G=a.secondPlaceholder,ye=a.shouldCloseWidgets,Ne=a.shouldOpenWidgets,ut=a.showLeadingZeros,mt=a.value,ua=a.yearAriaLabel,Ea=a.yearPlaceholder,ma=pr(a,["amPmAriaLabel","autoFocus","calendarAriaLabel","calendarIcon","className","clearAriaLabel","clearIcon","closeWidgets","data-testid","dayAriaLabel","dayPlaceholder","disableCalendar","disableClock","disabled","format","hourAriaLabel","hourPlaceholder","id","isCalendarOpen","isClockOpen","locale","maxDate","maxDetail","minDate","minuteAriaLabel","minutePlaceholder","monthAriaLabel","monthPlaceholder","name","nativeInputAriaLabel","onCalendarClose","onCalendarOpen","onChange","onClockClose","onClockOpen","onFocus","onInvalidChange","openWidgetsOnFocus","required","secondAriaLabel","secondPlaceholder","shouldCloseWidgets","shouldOpenWidgets","showLeadingZeros","value","yearAriaLabel","yearPlaceholder"]),xa=f.useState(k),Ie=xa[0],At=xa[1],ha=f.useState(F),Ye=ha[0],Et=ha[1],Yt=f.useRef(null),wt=f.useRef(null),Ft=f.useRef(null);f.useEffect(function(){At(k)},[k]),f.useEffect(function(){Et(F)},[F]);function fa(K){var J=K.reason;Ne&&!Ne({reason:J,widget:"calendar"})||(Et(Ye&&!1),At(!0),X&&X())}var Bt=f.useCallback(function(K){var J=K.reason;ye&&!ye({reason:J,widget:"calendar"})||(At(!1),fe&&fe())},[fe,ye]);function Gt(){Ie?Bt({reason:"buttonClick"}):fa({reason:"buttonClick"})}function Fa(K){var J=K.reason;Ne&&!Ne({reason:J,widget:"clock"})||(At(Ie&&!1),Et(!0),ze&&ze())}var pa=f.useCallback(function(K){var J=K.reason;ye&&!ye({reason:J,widget:"clock"})||(Et(!1),We&&We())},[We,ye]),xt=f.useCallback(function(K){var J=K.reason;Bt({reason:J}),pa({reason:J})},[Bt,pa]);function It(K,J){J===void 0&&(J=x),J&&xt({reason:"select"}),Te&&Te(K)}function ga(K,J){var Le=(Array.isArray(K)?K:[K])[0],Re=(Array.isArray(mt)?mt:[mt])[0];if(Re&&Le){var we=new Date(Re),st=new Date(Le);st.setHours(we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds()),It(st,J)}else It(Le,J)}function Ga(K){if(Fe&&Fe(K),!(p||!_e||K.target.dataset.select==="true"))switch(K.target.name){case"day":case"month":case"year":{if(Ie)return;fa({reason:"focus"});break}case"hour12":case"hour24":case"minute":case"second":{if(Ye)return;Fa({reason:"focus"});break}}}var Qt=f.useCallback(function(K){K.key==="Escape"&&xt({reason:"escape"})},[xt]);function Qa(){It(null)}function va(K){K.stopPropagation()}var ke=f.useCallback(function(K){var J=Yt.current,Le=wt.current,Re=Ft.current,we="composedPath"in K?K.composedPath()[0]:K.target;we&&J&&!J.contains(we)&&(!Le||!Le.contains(we))&&(!Re||!Re.contains(we))&&xt({reason:"outsideAction"})},[wt,Ft,xt,Yt]),De=f.useCallback(function(K){K===void 0&&(K=Ie||Ye),Yx.forEach(function(J){K?document.addEventListener(J,ke):document.removeEventListener(J,ke)}),K?document.addEventListener("keydown",Qt):document.removeEventListener("keydown",Qt)},[Ie,Ye,ke,Qt]);f.useEffect(function(){return De(),function(){De(!1)}},[De]);function Zt(){var K=(Array.isArray(mt)?mt:[mt])[0],J={amPmAriaLabel:r,dayAriaLabel:g,hourAriaLabel:O,minuteAriaLabel:N,monthAriaLabel:ie,nativeInputAriaLabel:he,secondAriaLabel:q,yearAriaLabel:ua},Le={dayPlaceholder:b,hourPlaceholder:w,minutePlaceholder:B,monthPlaceholder:M,secondPlaceholder:G,yearPlaceholder:Ea};return _.createElement("div",{className:"".concat(Be,"__wrapper")},_.createElement(zx,aa({},J,Le,{autoFocus:s,className:"".concat(Be,"__inputGroup"),disabled:p,format:S,isWidgetOpen:Ie||Ye,locale:L,maxDate:W,maxDetail:Y,minDate:H,name:xe,onChange:It,onInvalidChange:Pe,required:be,showLeadingZeros:ut,value:K})),c!==null&&_.createElement("button",{"aria-label":o,className:"".concat(Be,"__clear-button ").concat(Be,"__button"),disabled:p,onClick:Qa,onFocus:va,type:"button"},typeof c=="function"?_.createElement(c):c),i!==null&&!y&&_.createElement("button",{"aria-label":n,className:"".concat(Be,"__calendar-button ").concat(Be,"__button"),disabled:p,onClick:Gt,onFocus:va,type:"button"},typeof i=="function"?_.createElement(i):i))}function ce(){if(Ie===null||y)return null;var K=a.calendarClassName;a.className,a.maxDetail,a.onChange;var J=a.portalContainer,Le=a.value,Re=pr(a,["calendarClassName","className","maxDetail","onChange","portalContainer","value"]),we="".concat(Be,"__calendar"),st=ot(we,"".concat(we,"--").concat(Ie?"open":"closed")),it=_.createElement(vm,aa({className:K,onChange:function(rt){return ga(rt)},value:Le},Re));return J?vr.createPortal(_.createElement("div",{ref:wt,className:st},it),J):_.createElement(al,null,_.createElement("div",{ref:function(rt){rt&&!Ie&&rt.removeAttribute("style")},className:st},it))}function Xe(){if(Ye===null||v)return null;var K=a.clockClassName;a.className;var J=a.maxDetail,Le=J===void 0?"minute":J;a.onChange;var Re=a.portalContainer,we=a.value,st=pr(a,["clockClassName","className","maxDetail","onChange","portalContainer","value"]),it="".concat(Be,"__clock"),rt=ot(it,"".concat(it,"--").concat(Ye?"open":"closed")),Za=(Array.isArray(we)?we:[we])[0],Xt=Ii.indexOf(Le),ja=_.createElement(Sm,aa({className:K,renderMinuteHand:Xt>0,renderSecondHand:Xt>1,value:Za},st));return Re?vr.createPortal(_.createElement("div",{ref:Ft,className:rt},ja),Re):_.createElement(al,null,_.createElement("div",{ref:function(Ia){Ia&&!Ye&&Ia.removeAttribute("style")},className:rt},ja))}var at=f.useMemo(function(){return ed(ma)},[ma]);return _.createElement("div",aa({className:ot(Be,"".concat(Be,"--").concat(Ie||Ye?"open":"closed"),"".concat(Be,"--").concat(p?"disabled":"enabled"),d),"data-testid":h,id:P},at,{onFocus:Ga,ref:Yt}),Zt(),ce(),Xe())},ml=j.oneOfType([j.string,j.instanceOf(Date)]),Qx=j.oneOfType([ml,qx(ml)]);Cn.propTypes={amPmAriaLabel:j.string,autoFocus:j.bool,calendarAriaLabel:j.string,calendarClassName:j.oneOfType([j.string,j.arrayOf(j.string)]),calendarIcon:j.oneOfType([j.node,j.func]),className:j.oneOfType([j.string,j.arrayOf(j.string)]),clearAriaLabel:j.string,clearIcon:j.oneOfType([j.node,j.func]),clockClassName:j.oneOfType([j.string,j.arrayOf(j.string)]),closeWidgets:j.bool,"data-testid":j.string,dayAriaLabel:j.string,dayPlaceholder:j.string,disableCalendar:j.bool,disableClock:j.bool,disabled:j.bool,format:j.string,hourAriaLabel:j.string,hourPlaceholder:j.string,id:j.string,isCalendarOpen:j.bool,isClockOpen:j.bool,locale:j.string,maxDate:$x,maxDetail:j.oneOf(Ii),minDate:Vx,minuteAriaLabel:j.string,minutePlaceholder:j.string,monthAriaLabel:j.string,monthPlaceholder:j.string,name:j.string,nativeInputAriaLabel:j.string,onCalendarClose:j.func,onCalendarOpen:j.func,onChange:j.func,onClockClose:j.func,onClockOpen:j.func,onFocus:j.func,openWidgetsOnFocus:j.bool,required:j.bool,secondAriaLabel:j.string,secondPlaceholder:j.string,showLeadingZeros:j.bool,value:Qx,yearAriaLabel:j.string,yearPlaceholder:j.string};Kx&&(Cn.propTypes.portalContainer=j.instanceOf(HTMLElement));const us=Cn,Zx=({onClose:t})=>{const{transfer:a,lastId:r,isChanged:s,isSubmitting:n,error:l,success:i,dateDisplay:d,handleSubmit:o,handleChange:u,handleChangeSelect:c,handleChangeDateTime:m}=Qc(),{warehouses:x}=$t(),{auth:h}=je();return i&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:g=>{g.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Transfer ID"}),e.jsx(Z,{name:"id",value:r,type:"number",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Created by"}),e.jsx(Z,{name:"created_by",placeholder:"User ID",value:h.user.firstname+" "+h.user.lastname,disabled:!0,readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-row grid-cols-12 gap-3 justify-center",children:[e.jsxs("div",{className:"flex flex-col col-span-4 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Source"}),e.jsxs(oe,{onValueChange:g=>c("source",Number(g)),required:!0,name:"source",children:[e.jsx(de,{name:"source",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:"Choose source location..."})}),e.jsx(me,{className:"bg-white font-medium",children:x.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):x.map((g,b)=>e.jsxs(V,{value:g.id.toString(),className:"text-sm font-medium text-slate-700",children:[g.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+g.code+"  "+g.location})]},b))})]})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Destination"}),e.jsxs(oe,{onValueChange:g=>c("destination",Number(g)),required:!0,name:"destination",children:[e.jsx(de,{name:"destination",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:"Choose source location..."})}),e.jsx(me,{className:"bg-white font-medium",children:x.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):x.map((g,b)=>e.jsxs(V,{value:g.id.toString(),className:"text-sm font-medium text-slate-700",children:[g.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+g.code+"  "+g.location})]},g.code))})]})]})]}),e.jsx("div",{className:"flex flex-row gap-3 grid-cols-12 justify-center",children:e.jsxs("div",{className:"flex flex-col col-span-10 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Transfer Schedule"}),e.jsx(us,{onChange:g=>m("transfer_schedule",g),format:"yyyy-M-d H:m",minDate:new Date,value:d,required:!0})]})}),e.jsx("span",{className:"flex flex-col grid-cols-12 text-sm font-bold uppercase text-center",children:"(for PM times, add 12 to the hour)"}),e.jsx("div",{className:"flex flex-row gap-3 grid-cols-12",children:e.jsxs("div",{className:"flex flex-col gap-1 col-span-12 w-full",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Notes:"}),e.jsx(hs,{name:"notes",onChange:u,value:a.notes||"",placeholder:"Add notes here...."})]})}),e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-10 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:s?"green":null,disabled:!s,onClick:o,children:n?"Submitting":"Add Transfer"})}),e.jsxs("div",{className:"flex flex-col col-span-5 items-start",children:[i&&e.jsx("div",{className:"font-bold text-green-700",children:i}),l&&e.jsx("div",{className:"font-bold text-red-700",children:l}),n?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})]})})})},Xx=({onClose:t})=>{var I,k,C,F,L,W,$,Y,H;const{transfer:a,lastId:r,isChanged:s,isSubmitting:n,error:l,success:i,dateDisplay:d,dateDisplayArrived:o,handleSubmit:u,handleChange:c,handleChangeSelect:m,handleChangeDateTime:x}=Rl(),{selectedTransfer:h,transferProducts:g}=gt(),{warehouses:b}=$t(),{users:y}=_l(),{auth:v}=je(),p=e.jsxs(e.Fragment,{children:[e.jsx(oe,{onValueChange:N=>m("approval_status",N),name:"approval_status",value:a.approval_status||"",children:e.jsxs(de,{name:"approval_status",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:[e.jsx(ue,{placeholder:a.approval_status?a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1):"Choose status..."}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{value:"pending",className:"text-sm font-medium text-slate-700",children:"Pending"},"pending"),e.jsx(V,{value:"approved",className:"text-sm font-medium text-slate-700",children:"Approved"},"approved"),e.jsx(V,{value:"rejected",className:"text-sm font-medium text-slate-700",children:"Rejected"},"rejected")]})]})}),g.filter(N=>N.transfer_id===a.id).length===0&&e.jsxs("div",{className:"flex align-center group",children:[e.jsx(an,{size:30,strokeWidth:2,className:"self-center text-yellow-600"}),e.jsx("span",{className:"text-nowrap absolute left-1/2 mx-auto -translate-x-10 -translate-y-7 rounded-md bg-gray-800 px-1 text-sm text-gray-100 transition-opacity opacity-0 group-hover:opacity-100",children:"No products have been added yet."})]})]}),S=e.jsxs(oe,{onValueChange:N=>m("source",Number(N)),name:"source",children:[e.jsx(de,{name:"source",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsxs(e.Fragment,{children:[(I=b[a.source-1])==null?void 0:I.name,e.jsxs("span",{className:"truncate text-xs text-slate-700/60",children:[" ",""," ",(k=b[a.source-1])==null?void 0:k.code," ",""," ",(C=b[a.source-1])==null?void 0:C.location]})]})})}),e.jsx(me,{className:"bg-white font-medium",children:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):b.map((N,B)=>e.jsxs(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${N.id===a.source&&"selected"}`,children:[N.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+N.code+"  "+N.location})]},B))})]}),O=e.jsxs(oe,{onValueChange:N=>m("destination",Number(N)),name:"destination",children:[e.jsx(de,{name:"destination",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsxs(e.Fragment,{children:[(F=b[a.destination-1])==null?void 0:F.name,e.jsxs("span",{className:"truncate text-xs text-slate-700/60",children:[" ",""," ",(L=b[a.destination-1])==null?void 0:L.code," ",""," ",(W=b[a.destination-1])==null?void 0:W.location]})]})})}),e.jsx(me,{className:"bg-white font-medium",children:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):b.map((N,B)=>e.jsxs(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${N.id===a.destination&&"selected"}`,children:[N.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+N.code+"  "+N.location})]},N.code))})]}),w=e.jsx(oe,{onValueChange:N=>m("transfer_status",N),name:"transfer_status",value:a.transfer_status||"",children:e.jsxs(de,{name:"transfer_status",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:[e.jsx(ue,{placeholder:a.transfer_status?a.transfer_status.charAt(0).toUpperCase()+a.transfer_status.slice(1):"Choose status..."}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{value:"loading",className:"text-sm font-medium text-slate-700",children:"Loading"},"loading"),e.jsx(V,{value:"en route",className:"text-sm font-medium text-slate-700",children:"En route"},"en route"),e.jsx(V,{value:"arrived",className:"text-sm font-medium text-slate-700",children:"Arrived"},"arrived")]})]})}),P=e.jsxs(oe,{onValueChange:N=>m("received_by",Number(N)),name:"received_by",children:[e.jsx(de,{name:"received_by",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:y.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsx(e.Fragment,{children:a.received_by?y[Number(a.received_by)-1].firstname+" "+y[Number(a.received_by)-1].lastname:"Choose user..."})})}),e.jsx(me,{className:"bg-white font-medium",children:y.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):y.map((N,B)=>e.jsx(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${N.id===a.received_by&&"selected"}`,children:N.firstname+" "+N.lastname},B))})]});return i&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:N=>{N.preventDefault()},children:[e.jsxs("div",{className:"flex max-w-4xl flex-col gap-4",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer Code"}),e.jsx("p",{className:"text-sm",children:a.code?a.code:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Source"}),S]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Destination"}),O]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4 pb-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsx("p",{className:"text-sm",children:h.created_by.firstname+" "+h.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Approval status"}),e.jsxs("p",{className:"text-sm flex flex-row gap-2",children:[(($=a.approval_status)==null?void 0:$.toLowerCase())==="approved"&&e.jsxs(e.Fragment,{children:[a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1),e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"})]}),((Y=a.approval_status)==null?void 0:Y.toLowerCase())==="rejected"&&e.jsxs(e.Fragment,{children:[a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1),e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"})]}),v.rolePermissions.some(N=>N.permission_id===22)?((H=a.approval_status)==null?void 0:H.toLowerCase())==="pending"&&p:e.jsxs(e.Fragment,{children:[a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1),e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})]})]})]}),a.approved_by&&a.approval_status!="pending"&&e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-600",children:[a.approval_status==="approved"&&"Approved by",a.approval_status==="rejected"&&"Rejected by"]}),e.jsx("p",{className:"text-sm flex flex-row",children:y.length>0?y[a.approved_by-1].firstname+" "+y[a.approved_by-1].lastname:e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})})})]})]}),a.approval_status=="approved"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-8 gap-4",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer status"}),e.jsx("p",{className:"text-sm",children:w})]}),e.jsxs("div",{className:"col-span-5 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer schedule"}),e.jsx("div",{className:"text-sm",children:e.jsx(us,{onChange:N=>x("transfer_schedule",N),value:d,format:"yyyy-M-d H:mm",minDate:d,required:!0})})]}),a.transfer_status==="arrived"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Received by"}),e.jsx("p",{className:"text-sm",children:P})]}),e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsx("div",{className:"text-sm",children:e.jsx(us,{onChange:N=>x("date_received",N),value:o,format:"yyyy-M-d H:mm",minDate:d})})]})]})]}),e.jsx("span",{className:"flex flex-col grid-cols-12 text-sm font-bold uppercase text-center",children:"(for PM times, add 12 to the hour)"})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsx("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"col-span-12 w-full flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(hs,{name:"notes",value:a.notes||"",placeholder:"Add notes here....",onChange:c})]})})]}),e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-10 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:s?"green":null,disabled:!s,onClick:u,children:n?"Submitting":"Edit Transfer"})}),e.jsxs("div",{className:"flex flex-col col-span-5 items-start",children:[i&&e.jsx("div",{className:"font-bold text-green-700",children:i}),l&&e.jsx("div",{className:"font-bold text-red-700",children:l}),n?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})})]})})},Jx=({openModal:t})=>{const{transfers:a,transferProducts:r,isFetching:s,selectedTransfer:n,setSelectedTransfer:l,selectedProduct:i,setSelectedProduct:d}=gt();je();const o=r.filter(m=>m.transfer_id===n.id),u=()=>{t({},"add")},c=[{id:"select",header:({table:m})=>e.jsx("input",{type:"checkbox",checked:m.getIsAllPageRowsSelected(),onChange:x=>m.toggleAllPageRowsSelected(!!x.target.checked),"aria-label":"Select all"}),cell:({row:m})=>e.jsx("input",{type:"checkbox",checked:m.getIsSelected(),onChange:x=>m.toggleSelected(!!x.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{id:"product_name",sortingFn:"text",enableSorting:!0,header:({column:m})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>m.toggleSorting(m.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["PRODUCT NAME ",m.getIsSorted()==="asc"?e.jsx(ee,{}):m.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:m})=>e.jsx("div",{className:"flex flex-row text-xs justify-center font-normal uppercase",children:m.original.product.name})},{accessorKey:"bundles_count",header:()=>e.jsx("div",{className:"text-center",children:"BUNDLES COUNT"}),cell:({row:m})=>e.jsx("div",{className:"text-center",children:m.original.bundles_count})},{accessorKey:"bundles_unit",header:()=>e.jsx("div",{className:"text-center",children:"BUNDLES UNIT"}),cell:({row:m})=>e.jsx("div",{className:"text-center",children:m.original.bundles_unit})},{accessorKey:"quantity_per_bundle",header:()=>e.jsx("div",{className:"text-center",children:"QUANTITY PER BUNDLE"}),cell:({row:m})=>e.jsx("div",{className:"text-center",children:m.original.quantity_per_bundle})},{accessorKey:"unit",header:()=>e.jsx("div",{className:"text-center",children:"UNIT"}),cell:({row:m})=>e.jsx("div",{className:"text-center",children:m.original.unit})},{accessorKey:"total_quantity",header:()=>e.jsx("div",{className:"text-center",children:"TOTAL QUANTITY"}),cell:({row:m})=>e.jsxs("div",{className:"text-center",children:[m.original.total_quantity," ",m.original.unit]})},{id:"actions",header:()=>e.jsx("div",{}),cell:({row:m})=>(m.original,n.transfer_status!="arrived"&&n.approval_status!="rejected"&&e.jsx("div",{className:"flex flex-row text-xs justify-center font-normal uppercase",children:e.jsx(A,{fill:"yellow",textColor:"black",children:"Edit Product"})}))}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:o,columns:c,filterWhat:"product_name",dataType:"Transfer Products",openModal:n.transfer_status!="arrived"&&n.approval_status!="rejected"?u:void 0,isLoading:s})})},eh=({onClose:t})=>{const{product:a,allProducts:r,allInventoryProducts:s,filteredProductsSrc:n,bundlesLimit:l,quantityLimit:i,damagedCount:d,isChanged:o,isSubmitting:u,error:c,success:m,handleSubmit:x,handleChange:h,handleChangeSelect:g}=Zc();je();const b=a.capital_price?a.capital_price:0,y=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(b);return m&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:v=>{v.preventDefault()},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-5",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-3 justify-center",children:[e.jsxs("div",{className:"flex flex-col col-span-3 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Transfer Product ID"}),e.jsx(Z,{name:"id",value:a.id,type:"number",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-2 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Transfer ID"}),e.jsx(Z,{name:"created_by",placeholder:"User ID",value:a.transfer_id,disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Product to transfer:"}),e.jsxs(oe,{onValueChange:v=>g("product_id",Number(v.split("-")[0]),Number(v.split("-")[1])),required:!0,name:"product_id",children:[e.jsx(de,{name:"product_id",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:"Choose product..."})}),e.jsx(me,{className:"bg-white font-medium",children:n.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):n.map((v,p)=>e.jsx(V,{value:v.product.id?v.product.id.toString()+"-"+p.toString():"",className:"text-sm font-medium text-slate-700",children:v.product.name},p))})]})]}),e.jsxs("div",{className:"flex flex-col col-span-3 gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"Capital Price:"}),e.jsx(Z,{name:"capital_price",type:"string",value:y,onChange:h,disabled:!0,readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"BUNDLES COUNT"}),e.jsx(Z,{name:"bundles_count",type:"number",value:a.bundles_count||"",placeholder:`Available stocks: ${l}`,max:l,onChange:h,required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"BUNDLES UNIT"}),e.jsx(Z,{name:"bundles_unit",type:"string",value:a.bundles_unit||"",placeholder:"box, bundle, etc.",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"QUANTITY PER BUNDLE"}),e.jsx(Z,{name:"quantity_per_bundle",type:"number",value:a.quantity_per_bundle||"",placeholder:"Quantity per bundle",onChange:h,disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"UNIT"}),e.jsx(Z,{name:"unit",type:"string",value:a.unit||"",placeholder:"box, pieces, etc.",disabled:!0,readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-bold uppercase",children:"TOTAL QUANTITY"}),e.jsx(Z,{name:"total_quantity",type:"string",value:a.total_quantity&&a.unit?a.total_quantity.toString()+" "+a.unit.toString():"",placeholder:`Available stocks: ${i}`,onChange:h,disabled:!0,readOnly:!0})]}),a.total_quantity!=0&&d!=0&&a.total_quantity==i&&e.jsxs("div",{className:"grid content-center group",children:[e.jsx(an,{size:30,strokeWidth:2,className:"self-center text-yellow-600"}),e.jsxs("span",{className:"text-nowrap absolute left-1/2 mx-auto -translate-x-10 -translate-y-2 rounded-md bg-gray-800 px-1 text-sm text-gray-100 transition-opacity opacity-0 group-hover:opacity-100",children:["Some damaged goods (",d," ",a.unit,") are included in the transfer."]})]})]}),e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-8 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:o?"green":null,disabled:!o,onClick:x,children:u?"Submitting":"Add Transfer"})}),e.jsxs("div",{className:"flex flex-col col-span-4 items-start",children:[m&&e.jsx("div",{className:"font-bold text-green-700",children:m}),c&&e.jsx("div",{className:"font-bold text-red-700",children:c}),u?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-2 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})]})})})},th=({onClose:t})=>{const{transfers:a,transferProducts:r,isFetching:s,selectedTransfer:n,setSelectedTransfer:l}=gt(),{isOpen:i,openModal:d,closeModal:o}=Ee(),[u,c]=f.useState("");je(),r.filter(x=>x.transfer_id===n.id);const m=(x,h)=>{d(),c(h)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx(Jx,{openModal:m})}),e.jsx(Ve,{title:u==="edit"?"Edit Transfer Product":"Add Transfer Product",isOpen:i,onClose:o,children:e.jsx(e.Fragment,{children:u==="add"&&e.jsx(eh,{onClose:o})})})]})},uf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Transfer",children:e.jsxs(Sl,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(Eo,{openModal:l})})}),e.jsx(Ve,{title:s==="details"?"Transfer Details":s==="edit"?"Edit Transfer":s==="add"?"Add Transfer":"Transfer Products",isOpen:t,onClose:r,closeOnOverlayClick:s==="details",children:e.jsxs(e.Fragment,{children:[s==="details"&&e.jsx(Fo,{onClose:r}),s==="edit"&&e.jsx(Xx,{onClose:r}),s==="add"&&e.jsx(Zx,{onClose:r}),s==="products"&&e.jsx(th,{onClose:r})]})})]})})})};function ah({columns:t,data:a}){var s;const r=Vc({data:a,columns:t,getCoreRowModel:$c(),defaultColumn:{size:200,minSize:50,maxSize:500}});return e.jsx("div",{className:"rounded-md border",children:e.jsxs($r,{children:[e.jsx(qr,{children:r.getHeaderGroups().map(n=>e.jsx(Na,{children:n.headers.map(l=>e.jsx(Kr,{style:{width:l.index===0?250:500},children:l.isPlaceholder?null:On(l.column.columnDef.header,l.getContext())},l.id))},n.id))}),e.jsx(Yr,{children:((s=r.getRowModel().rows)==null?void 0:s.length)&&r.getRowModel().rows.map(n=>e.jsx(Na,{children:n.getVisibleCells().map(l=>e.jsx(Me,{children:On(l.column.columnDef.cell,l.getContext())},l.id))},n.id))})]})})}const sh=({})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center",children:[e.jsx(ro,{width:150,height:150,color:"#888888",strokeWidth:-1}),e.jsx("span",{className:"max-w-[300px] text-center text-[#888]",children:"Start entering products / product code / serial number / brand"})]})}),rh=({})=>{const{invoiceItemsQueue:t,quantityHandler:a,formatCurrency:r,handleInvoiceItemsChange:s,handleRemoveInvoiceItem:n}=lt(),{data:l}=Br(),{data:i}=Pa(),d=[{id:"orderItem",enableResizing:!1,header:()=>e.jsx("div",{className:"flex justify-center",children:"Item #"}),cell:({row:o})=>e.jsx("div",{className:"flex justify-center",children:o.index+1}),size:250},{accessorKey:"name",header:()=>e.jsx("div",{className:"justify-center",children:"Product Name"}),cell:({row:o})=>e.jsx("div",{className:"flex ",children:o.original.product_id.name})},{accessorKey:"quantity",header:()=>e.jsx("div",{className:"flex justify-center",children:"Quantity"}),cell:({row:o})=>{const u=o.index,c=l.find(m=>m.product.id===o.original.product_id.id);return e.jsx("div",{className:"flex justify-center ",children:e.jsxs("div",{className:"flex flex-row border drop-shadow-sm",children:[e.jsx(ne,{className:"rounded-sm bg-red-300 hover:bg-red-500 disabled:opacity-100",onClick:()=>{a(u,o.original.quantity-1,(c==null?void 0:c.remaining_stocks_count)??0)},disabled:o.original.quantity<=1,children:e.jsx("span",{children:"-"})}),e.jsx(R,{id:"quantity",className:"w-20 rounded-none text-center drop-shadow-none",type:"number",value:o.original.quantity||"",onChange:m=>{a(u,Number(m.target.value),c?c.remaining_stocks_count??0:0)},disabled:!(c!=null&&c.remaining_stocks_count)}),e.jsx(ne,{className:"rounded-sm bg-slate-500 hover:bg-slate-700 disabled:bg-slate-200",onClick:()=>{a(u,o.original.quantity+1,(c==null?void 0:c.remaining_stocks_count)??0)},disabled:o.original.quantity>=((c==null?void 0:c.remaining_stocks_count)??0),children:e.jsx("span",{children:"+"})})]})})}},{accessorKey:"price",header:()=>e.jsx("div",{className:"justify-center",children:"Product Price"}),cell:({row:o})=>{const u=i.find(c=>c.product.id===o.original.product_id.id);return e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{children:r(o.original.product_price)}),u!=null&&u.sale_discount?e.jsxs("span",{className:"text-sm font-light",children:["(",r((u==null?void 0:u.sale_discount)??0),")"]}):null]})}},{accessorKey:"item_discount",header:()=>e.jsx("div",{className:"justify-center",children:"Item Discount"}),cell:({row:o})=>e.jsx("div",{children:e.jsx(R,{id:"item_discount",value:o.original.item_discount,type:"number",onChange:u=>{s(o.index,"item_discount",Number(u.target.value))}})},o.index)},{id:"total_price",accessorKey:"total_price",header:()=>e.jsx("div",{className:"justify-center",children:"Subtotal"}),cell:({row:o})=>e.jsx("div",{className:"",children:e.jsx("span",{children:r(o.original.total_price)})}),size:250},{id:"actions",cell:({row:o})=>{const u=o.index;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsx(ne,{className:"bg-red-500 hover:bg-red-700",onClick:()=>{n(u)},children:e.jsx(no,{color:"#FFF"})})})}}];return e.jsx(e.Fragment,{children:t.length===0?e.jsx(sh,{}):e.jsx(ah,{data:t,columns:d})})},nh=()=>{const t=Qe(),[a,r]=f.useState({}),s=(d,o)=>{r(u=>({...u,[d]:o}))},n=async d=>(console.log("Submitting: ",d),await i(d)),l={onSuccess:async()=>{await t.invalidateQueries({queryKey:["customers"]}),r({})},onError:d=>{console.error("Error adding customer:",d.message)}},{mutateAsync:i}=ge({mutationKey:["addCustomer"],mutationFn:mc,...l});return{value:a,setValue:r,handleChange:s,handleSubmit:n}},lh=({onClose:t})=>{const{value:a,setValue:r,handleChange:s,handleSubmit:n}=nh(),{setSelectedCustomer:l}=Ws();f.useEffect(()=>{r(c=>({...c}))},[]);const[i,d]=f.useState(!1),[o,u]=f.useState(null);return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async c=>{d(!i),c.preventDefault();const m=await n(a);(m==null?void 0:m.status)===201?(d(!i),l(m.data.data),t(),console.log(m.data)):(d(!i),u("Failed to add inventory"))},children:e.jsxs("div",{className:"flex max-w-4xl flex-col gap-2 ",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(T,{className:"text-sm font-semibold uppercase",htmlFor:"firstname",children:"First Name"}),e.jsx(R,{id:"firstname",name:"firstname",required:!0,type:"text",placeholder:"First Name",onChange:c=>s("firstname",c.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(T,{className:"text-sm font-semibold uppercase",htmlFor:"lastname",children:"Last Name"}),e.jsx(R,{id:"lastname",name:"lastname",required:!0,type:"text",placeholder:"Last Name",onChange:c=>s("lastname",c.target.value)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(T,{className:"text-sm font-semibold uppercase",htmlFor:"address",children:"Address"}),e.jsxs("div",{className:"relative flex flex-col ",children:[e.jsx(ao,{color:"#2D2D2D",className:"absolute top-0 translate-x-3 translate-y-1/2",size:20}),e.jsx(R,{id:"address",name:"address",type:"text",placeholder:"Address",defaultValue:"",className:"pl-10",onChange:c=>s("address",c.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(T,{className:"text-sm font-semibold uppercase",htmlFor:"contact_no",children:"Contact Number"}),e.jsxs("div",{className:"relative flex flex-col",children:[e.jsx(so,{color:"#2D2D2D",className:"absolute top-0 translate-x-3 translate-y-1/2",size:20}),e.jsx(R,{required:!0,id:"contact_no",name:"contact_no",type:"text",inputMode:"numeric",placeholder:"Contact Number",className:"pl-10",defaultValue:"",max:11,maxLength:11,onChange:c=>s("contact_no",c.target.value)})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-end gap-4",children:[e.jsx(A,{onClick:()=>t(),type:"reset",className:'hover:text-white"  py-2 text-sm font-bold text-slate-700',children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:i||Object.keys(a).length<=2,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:i?"Submitting...":"Add Customer"})]}),o&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-semibold text-red-600",children:o})})]})})})},ih=({})=>{const{data:t,isLoading:a,selectedCustomer:r,setSelectedCustomer:s,openSearchCustomer:n,setOpenSearchCustomer:l}=Ws(),[i,d]=f.useState(""),{invoice:o,setInvoice:u}=lt();f.useEffect(()=>{r&&d("")},[r,n]);const{openModal:c,isOpen:m,closeModal:x}=Ee();return e.jsxs(e.Fragment,{children:[e.jsxs(xc,{open:n,onOpenChange:l,children:[e.jsx(ia,{value:i,onValueChange:d,placeholder:a?"Loading Customers":r.id?`${r.firstname} ${r.lastname}`:"Enter Customer Name"}),e.jsx(Cl,{children:i?e.jsxs(e.Fragment,{children:[e.jsxs(Ca,{className:"flex flex-col gap-2 py-4 pb-1 text-center text-sm",children:[e.jsx("span",{className:"font-bold uppercase",children:"Customer Not Found"}),e.jsxs(ne,{className:"flex flex-row gap-4",onClick:()=>{c(),l(!1)},children:[e.jsx(lo,{color:"#fff"}),e.jsx("span",{className:"text-white",children:"Add Customer"})]})]}),t.map((h,g)=>e.jsx(St,{className:"",value:h.id+""+h.firstname+" "+h.lastname,onSelect:()=>{s(h),l(!1),d(""),u({...o,customer_id:h.id})},children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{children:h.firstname}),e.jsx("span",{children:h.lastname})]})},g))]}):null})]}),e.jsx(Ve,{isOpen:m,onClose:x,title:"Add Customer",children:e.jsx(lh,{onClose:x})})]})},ch=({})=>{const{selectedCustomer:t,setOpenSearchCustomer:a}=Ws();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-1 rounded-md bg-white p-3",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx(T,{className:"text-lg font-bold uppercase text-slate-900",children:"Customer Info"}),e.jsx(ne,{onClick:()=>a(!0),size:"icon",children:e.jsx(hc,{size:18})})]}),Object.keys(t).length===0?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-slate-900",children:"Full Name: "}),e.jsx("span",{className:"font-medium uppercase text-slate-950",children:t.firstname+" "+t.lastname})]}),e.jsx("div",{children:e.jsxs(T,{className:"text-slate-900",children:["Address: ",t.address]})}),e.jsx("div",{children:e.jsxs(T,{className:"text-slate-900",children:["Contact Number: ",t.contact_no]})})]})})]})})},oh=()=>{const{formatCurrency:t,invoiceItemsQueue:a}=lt(),r=a.reduce((s,n)=>s+n.total_price,0);return e.jsx("div",{className:"flex flex-col gap-2 ",children:e.jsxs(Dt,{children:[e.jsx(Pt,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:"justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Hl,{}),e.jsx("span",{children:"Total Items"})]}),e.jsx("div",{children:e.jsx("span",{className:"justify-between text-base",children:a.length})})]})}),e.jsx(Tt,{className:"",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{children:a.map((s,n)=>{const l=s.total_price?Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s.total_price):"";return e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsxs("div",{className:"flex w-5 flex-row justify-between",children:[e.jsx("span",{className:"text-sm",children:s.quantity}),e.jsx("span",{className:"text-sm",children:"x"})]}),e.jsx("span",{className:"text-sm",children:s.product_id.name})]}),e.jsx("span",{className:"text-sm",children:l})]},n)})}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Amount:"}),e.jsx("span",{className:"border-t border-t-slate-800 text-sm",children:r?t(r):"0.00"})]})]})})]})})},dh=()=>{const{invoice:t,invoiceItemsQueue:a}=lt();function r(){return t.paid_amount===0?0:(t.paid_amount??0)-a.reduce((s,n)=>s+n.total_price,0)+(t.total_discount??0)}return e.jsx(e.Fragment,{children:e.jsxs(ne,{variant:"outline",className:"justify-between hover:cursor-default hover:bg-white",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(eo,{}),e.jsx("span",{children:"Change"})]}),e.jsx("div",{children:e.jsx("span",{className:"justify-between text-base",children:Ct(Number(r()))})})]})})},uh=()=>{const{invoice:t,handleChange:a,invoiceItemsQueue:r}=lt(),s=f.useRef(null);return e.jsx(e.Fragment,{children:e.jsxs(ne,{className:"flex w-full flex-row justify-between border-0 bg-white pr-0 hover:bg-white disabled:bg-white disabled:opacity-100",onClick:()=>{s.current.focus()},disabled:r.length<=0,children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Ul,{color:"black",className:"",size:24}),e.jsx("span",{className:"text-black ",children:"Paid Amount"})]}),e.jsx(R,{className:"w-3/4 border-0 text-end text-base font-medium text-black focus-visible:ring-0 focus-visible:ring-offset-0 disabled:border-0",ref:s,id:"paid_amount",name:"paid_amount",type:"text",placeholder:"0.00",disabled:r.length<=0,onBlur:n=>{let l=n.target.value?parseFloat(n.target.value.replace(/[^\d.]/g,"")):0;l=Number(l.toFixed(2)),n.target.value=`${Ct(l)}`,a("paid_amount",l)},onChange:n=>{a("paid_amount",Number(n.target.value)),a("change_amount",Number(Number(Number(n.target.value)-r.reduce((l,i)=>l+i.total_price,0)).toFixed(2))),console.log("change:",t.change_amount)},onFocus:n=>{n.target.value=n.target.value.replace(/[^\d.]/g,"")}})]})})},mh=()=>{const{invoiceItemsQueue:t,invoice:a}=lt(),r=t.reduce((s,n)=>s+n.total_price,0)-(a.total_discount??0);return e.jsx(e.Fragment,{children:e.jsxs(ne,{variant:"outline",className:"justify-between hover:cursor-default",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(fc,{}),e.jsx("span",{children:"Total Amount"})]}),e.jsx("div",{children:e.jsx("span",{className:"justify-between text-base",children:r?Ct(r):"0.00"})})]})})},xh=()=>{const{invoice:t,handleChange:a,invoiceItemsQueue:r}=lt(),s=f.useRef(null);return e.jsx(e.Fragment,{children:e.jsxs(ne,{className:"flex w-full flex-row justify-between border-0 bg-white pr-0 hover:bg-white disabled:bg-white disabled:opacity-100",onClick:()=>{s.current.focus()},disabled:r.length<=0,children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Ul,{color:"black",className:"",size:24}),e.jsx("span",{className:"text-black ",children:"Discount Amount"})]}),e.jsx(R,{className:"w-3/4 border-0 text-end text-base font-medium text-black focus-visible:ring-0 focus-visible:ring-offset-0 disabled:border-0",ref:s,id:"total_discount",name:"total_discount",type:"text",placeholder:"0.00",disabled:r.length<=0,onBlur:n=>{let l=n.target.value?parseFloat(n.target.value.replace(/[^\d.]/g,"")):0;l=Number(l.toFixed(2)),n.target.value=`${Ct(l)}`,a("total_discount",l)},onChange:n=>{a("total_discount",Number(n.target.value)),a("change_amount",Number(n.target.value)-r.reduce((l,i)=>l+i.total_price,0)),a("status",Number(n.target.value)>0?"pending":"approved"),console.log("change:",t.change_amount)},onFocus:n=>{n.target.value=n.target.value.replace(/[^\d.]/g,"")}})]})})},hh=()=>{const{handleChange:t,invoice:a}=lt();return f.useEffect(()=>{a.type==="exit"&&t("payment_method","exit")},[a.type]),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(T,{htmlFor:"payment_method",className:"text-lg uppercase text-white",children:"Payment Type"}),e.jsx(Hr,{id:"type",defaultValue:"payment",onValueChange:r=>{t("type",r)},children:e.jsxs(Vr,{className:"flex flex-row gap-1",children:[e.jsx(Ua,{value:"payment",className:`data-[state=active]:bg-primary w-full rounded-md
                                text-slate-800 hover:bg-slate-200 data-[state=active]:text-white`,children:"Payment"}),e.jsx(Ua,{value:"exit",className:`data-[state=active]:bg-primary w-full rounded-md
                                text-slate-800 hover:bg-slate-200 data-[state=active]:text-white`,children:"Exit"})]})}),a.type==="payment"&&e.jsx(e.Fragment,{children:e.jsxs(oe,{onValueChange:r=>{t("payment_method",r)},children:[e.jsx(de,{className:"font-medium focus:ring-0 focus:ring-offset-0",children:e.jsx(ue,{placeholder:"Select a payment method"})}),e.jsx(me,{children:e.jsxs(pc,{children:[e.jsx(V,{className:"font-medium",value:"cash",children:"Cash"}),e.jsx(V,{className:"font-medium",value:"purchase_order",children:"Purchase Order"}),e.jsx(V,{className:"font-medium",value:"check",children:"Check"}),e.jsx(V,{className:"font-medium",value:"voucher",children:"Voucher"}),e.jsx(V,{className:"font-medium",value:"e-wallet",children:"E-Wallet"})]})})]})})]}),e.jsx(xs,{children:e.jsxs(ba,{children:[e.jsx(sa,{asChild:!0,children:e.jsxs("div",{className:"relative flex flex-col",children:[e.jsx(to,{color:"black",className:"absolute top-0 translate-x-4 translate-y-2",size:24}),e.jsx(R,{id:"reference_no",name:"reference_no",type:"text",placeholder:"Reference Number",onChange:r=>{t("reference_no",Number(r.target.value))},disabled:a.payment_method!=="check"&&a.payment_method!=="voucher"&&a.payment_method!=="e-wallet"&&a.payment_method!=="purchase_order",className:"pl-[3rem] text-base font-medium disabled:opacity-100"})]})}),e.jsx(ra,{align:"center",className:"bg-pos-primary-background",side:"left",sideOffset:2,children:e.jsx("span",{className:"p-2 text-white",children:"Reference Number"})})]})})]})},fh=()=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(hh,{}),e.jsx(mh,{}),e.jsx(xh,{}),e.jsx(uh,{}),e.jsx(dh,{})]}),ph=()=>{const t=Qe();je(),lt();const[a,r]=f.useState({}),s=(u,c)=>{r(m=>({...m,[u]:c}))},n=u=>{r(c=>({...c,...u}))},l={onSuccess:async()=>{await t.invalidateQueries({queryKey:["invoices"]}),r({}),et.success("Submitted successfully!")},onError:u=>{console.error("Invoices Data failed",u.message)}},{mutateAsync:i}=ge({mutationKey:["addInvoice"],mutationFn:gc,...l}),{mutateAsync:d}=ge({mutationKey:["updateInvoice"],mutationFn:vc,...l}),{mutateAsync:o}=ge({mutationKey:["removeInvoice"],mutationFn:jc,...l});return{value:a,setValue:r,selectChange:n,handleChange:s,addInvoiceMutation:i,updateInvoiceMutation:d,removeInvoiceMutation:o}},gh=({})=>{const{auth:t}=je(),{setFilter:a,selectedWarehouse:r,setSelectedWarehouse:s}=kl(),{invoiceItemsQueue:n,invoice:l,setInvoice:i}=lt(),{value:d,addInvoiceMutation:o}=ph(),{selectedCustomer:u}=Ws();async function c(){console.log("Invoice:",l),console.log("InvoiceItems:",n);let b=l;b.invoice_items=n.map(y=>({...y,product_id:y.product_id.id})),await o(b)}const{openModal:m,isOpen:x,closeModal:h}=Ee(),g=Ee();return f.useEffect(()=>{var b,y,v,p;t.role==="admin"?m():((b=t.role)==null?void 0:b.split("_")[1])==="CDO"?(console.log((y=t.role)==null?void 0:y.split("_")),a({approval_status:"approved",warehouse_id:1}),s("CDO"),i({...l,warehouse_id:1})):((v=t.role)==null?void 0:v.split("_")[1])==="ILI"&&(console.log((p=t.role)==null?void 0:p.split("_")),a({approval_status:"approved",warehouse_id:2}),s("Iligan"),i({...l,warehouse_id:2}))},[t.role]),e.jsxs("div",{className:"bg-pos-primary-background flex w-full max-w-[350px] flex-col gap-2 p-4",children:[t.role==="admin"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row items-center justify-between rounded-md bg-white p-1 px-3",children:[e.jsxs(Xa,{className:"text-sm font-medium uppercase text-slate-900",children:["Warehouse: ",r]}),e.jsx(ne,{onClick:m,size:"icon",className:"h-8",children:e.jsx(bs,{size:18})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row items-center justify-between rounded-md bg-white p-2",children:[e.jsxs(Xa,{className:"flex flex-row items-center gap-2 text-sm font-medium uppercase text-slate-900",children:[e.jsx(bs,{size:18}),r+" BRANCH"]}),e.jsx(Xa,{className:"text-sm font-medium uppercase text-slate-900",children:t.user.firstname+" "+t.user.lastname})]})}),e.jsx(ih,{}),e.jsx(ch,{}),e.jsx(oh,{}),e.jsx(fh,{}),e.jsx(ne,{onClick:()=>{et.info("Coming Soon!")},children:"Print Invoice"}),e.jsx(ne,{onClick:()=>{c()},disabled:Object.keys(u).length===0||n.length===0||l.paid_amount===0||l.payment_method==="",children:"Submit"}),e.jsx(Ve,{title:"",isOpen:g.isOpen,onClose:g.closeModal,closeOnOverlayClick:!0,children:e.jsx("div",{children:e.jsx("div",{children:"Test"})})}),t.role==="admin"?e.jsx(e.Fragment,{children:e.jsx(Ve,{isOpen:x,onClose:h,title:"Select Warehouse",closeOnOverlayClick:!1,children:e.jsxs("div",{className:"flex flex-row gap-6",children:[e.jsx(ne,{onClick:()=>{a({approval_status:"approved",warehouse_id:1}),h(),s("CDO"),i({...l,warehouse_id:1})},className:"h-20 ",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(bs,{}),e.jsx(Xa,{children:"CDO Warehouse"})]})}),e.jsx(ne,{onClick:()=>{a({approval_status:"approved",warehouse_id:2}),h(),s("Iligan"),i({...l,warehouse_id:2})},className:"h-20 ",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(bs,{}),e.jsx(Xa,{children:"Iligan Warehouse"})]})})]})})}):null]})},vh=({})=>{const[t,a]=f.useState(""),{isLoading:r,productListing:s}=kl(),{invoiceItemsQueue:n,setInvoiceItemsQueue:l}=lt();return e.jsx("div",{className:"relative z-20 pb-10",children:e.jsx("div",{className:"absolute box-content flex w-full ",children:e.jsxs(Sa,{className:"rounded-lg border p-1 shadow-md",children:[e.jsx(ia,{value:t,onValueChange:a,placeholder:r?"Loading Products":"Enter Serial Number / Brand / Product Name",disabled:s.length===0}),e.jsx(Cl,{className:"",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Ca,{children:"Product Not Found"}),s.map((i,d)=>e.jsx(St,{className:"",value:i.type==="retail"?`${i.product.id} ${i.id} ${i.product.name} ${i.product.serial_no} (Retail)`:`${i.product.id} ${i.id} ${i.product.name} ${i.product.serial_no} (Wholesale)`,onSelect:()=>{const o=n.findIndex(u=>u.product_price_id===i.id);if(o!==-1){const u=[...n];u[o].quantity++,l(u)}else l([...n,{unit:"",discount_approval_status:null,approved_by:null,item_discount:0,invoice_id:null,product_id:{id:i.product.id,name:i.product.name},product_price_id:i.id,product_price:i.cost,total_price:i.price,quantity:1,source_inventory:i.warehouse.id}]);a("")},children:e.jsxs("div",{className:"flex flex-1 flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[i.type==="retail"?e.jsx(Jc,{strokeWidth:1}):e.jsx(Dl,{strokeWidth:1}),e.jsx("span",{children:i.product.name}),e.jsx("span",{className:"text-xs text-gray-600 ",children:`(${i.type} ${i.warehouse.code}) ${i.stocks_quantity}`})]}),e.jsx("div",{children:e.jsxs("span",{children:[" ",i.price]})})]})},d))]}):null})]})})})},mf=({})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row",children:[e.jsx(Ml,{}),e.jsxs("div",{id:"main",className:"flex w-screen flex-row",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[e.jsx(vh,{}),e.jsx(rh,{})]}),e.jsx(gh,{})]})]})}),jh=({openModal:t})=>{const{transactions:a,isFetching:r,progress:s}=yc(),n=[{id:"select",header:({table:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsAllPageRowsSelected(),onChange:i=>l.toggleAllPageRowsSelected(!!i.target.checked),"aria-label":"Select all"}),cell:({row:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsSelected(),onChange:i=>l.toggleSelected(!!i.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"Product ID"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.id})},{accessorKey:"price",header:()=>e.jsx("div",{className:"text-center",children:"Price"}),cell:({row:l})=>{const i=parseFloat(l.getValue("amount")),d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"product_name",sortingFn:"text",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["PRODUCT NAME ",l.getIsSorted()==="asc"?e.jsx(ee,{}):l.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.product_name})},{accessorKey:"dimensions",header:()=>e.jsx("div",{className:"text-center",children:"DIMENSIONS"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.dimensions})},{accessorKey:"serial",header:()=>e.jsx("div",{className:"text-center",children:"SERIAL"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.serial})},{accessorKey:"sku",header:()=>e.jsx("div",{className:"text-center",children:"SKU"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.sku})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-center",children:"INVENTORY STATUS"}),cell:({row:l})=>{const i=l.getValue("status"),d=i==="LOW"?"bg-red-500":i==="MEDIUM"?"bg-amber-500":"bg-lime-600";return e.jsx("div",{className:`flex w-full flex-1 flex-col text-center ${d}`,children:l.getValue("status")})}},{accessorKey:"type",header:()=>e.jsx("div",{className:"text-center",children:"ORDER TYPE"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.type})},{accessorKey:"quantity",header:()=>e.jsx("div",{className:"text-center",children:"QUANTITY"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.quantity})}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:n,filterWhat:"serial",dataType:"Transaction",openModal:()=>t,isLoading:r})})},xf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d),console.log("action",d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Transaction",children:e.jsx(bc,{children:e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(jh,{openModal:l})})})})})})},yh=({openModal:t})=>{const{transfers:a,transferProducts:r,isFetching:s,progress:n,setSelectedTransfer:l}=gt(),i=r.map(h=>({transfer_id:h.transfer_id})),o=a.filter(h=>{if(i.some(g=>g.transfer_id===h.id))return h}).filter(h=>{if(h.approval_status==="pending")return h}),{auth:u}=je(),c=h=>{l(h),t(h,"details")},m=h=>{l(h),t(h,"edit")},x=[{id:"select",header:({table:h})=>e.jsx("input",{type:"checkbox",checked:h.getIsAllPageRowsSelected(),onChange:g=>h.toggleAllPageRowsSelected(!!g.target.checked),"aria-label":"Select all"}),cell:({row:h})=>e.jsx("input",{type:"checkbox",checked:h.getIsSelected(),onChange:g=>h.toggleSelected(!!g.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"code",sortingFn:"alphanumeric",enableSorting:!0,header:({column:h})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>h.toggleSorting(h.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center",children:["TRANSFER CODE ",h.getIsSorted()==="asc"?e.jsx(ee,{}):h.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:h})=>e.jsx("div",{className:"text-center",children:h.original.code?h.original.code:"N/A"})},{accessorKey:"source",header:()=>e.jsx("div",{className:"text-center",children:"SOURCE-DESTINATION"}),cell:({row:h})=>{const g=h.original.source,b=h.original.destination;return e.jsxs("div",{className:"text-center",children:[g.code,"-",b.code]})}},{accessorKey:"transfer_status",sortingFn:"text",enableSorting:!0,header:({column:h})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>h.toggleSorting(h.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center z-10",children:["TRANSFER STATUS ",h.getIsSorted()==="asc"?e.jsx(ee,{}):h.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:h})=>e.jsx("div",{className:"text-center",children:h.original.transfer_status?h.original.transfer_status:"N/A"})},{accessorKey:"transfer_schedule",sortingFn:"datetime",enableSorting:!0,header:({column:h})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>h.toggleSorting(h.getIsSorted()==="asc"),className:"flex flex-row bg-transparent text-black items-center z-10",children:["SCHEDULE ",h.getIsSorted()==="asc"?e.jsx(ee,{}):h.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:h})=>{const g=h.getValue("transfer_schedule");if(g.toString()!=="0000-00-00 00:00:00"){const b={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},y=new Date(g).toLocaleDateString([],b);return e.jsx("div",{className:"text-center",children:y})}else return e.jsx("div",{className:"text-center",children:"N/A"})}},{accessorKey:"approval_status",header:()=>e.jsx("div",{className:"text-center",children:"APPROVAL STATUS"}),cell:({row:h})=>e.jsx("div",{className:"flex mx-auto items-center justify-center",children:h.original.approval_status.toLowerCase()==="approved"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):h.original.approval_status.toLowerCase()==="rejected"?e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})})},{id:"actions",header:()=>e.jsx("div",{}),cell:({row:h})=>{var b;const g=h.original;return e.jsx("div",{className:"flex flex-row text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>c(g),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]}),((b=u.role)==null?void 0:b.toLowerCase())!="encoder"&&e.jsxs(pe,{onClick:()=>m(g),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:g.transfer_status!="arrived"&&g.approval_status!="rejected"?e.jsx(Ot,{size:16,strokeWidth:2.25}):e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]})]})]})})}}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:o,columns:x,filterWhat:"approval_status",dataType:"",openModal:void 0,isLoading:s})})},bh=({onClose:t})=>{const{selectedTransfer:a}=gt();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-4xl flex-col gap-4",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer Code"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.code?a.code:"N/A"})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Source"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.source.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Destination"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.destination.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer status"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.transfer_status?a.transfer_status.charAt(0).toUpperCase()+a.transfer_status.slice(1):"N/A"})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Transfer schedule"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.transfer_schedule.toString()==="0000-00-00 00:00:00"?"N/A":Ae(a.transfer_schedule)})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Received by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.received_by?a.received_by.firstname+" "+a.received_by.lastname:"N/A"})]}),e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Date received"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.date_received?Ae(a.date_received):"N/A"})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.created_by.firstname+" "+a.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(a.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approval status"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approved by"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.approved_by?a.approved_by.firstname+" "+a.approved_by.firstname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Updated at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(a.updated_at)})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsx("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.notes?a.notes:"N/A"})]})})]})})},Nh=({onClose:t})=>{var I,k,C,F,L,W,$,Y,H;const{transfer:a,lastId:r,isChanged:s,isSubmitting:n,error:l,success:i,dateDisplay:d,dateDisplayArrived:o,handleSubmit:u,handleChange:c,handleChangeSelect:m,handleChangeDateTime:x}=Rl(),{selectedTransfer:h,transferProducts:g}=gt(),{warehouses:b}=$t(),{users:y}=_l(),{auth:v}=je(),p=e.jsxs(e.Fragment,{children:[e.jsx(oe,{onValueChange:N=>m("approval_status",N),name:"approval_status",value:h.approval_status||"",children:e.jsxs(de,{name:"approval_status",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:[e.jsx(ue,{placeholder:h.approval_status?h.approval_status.charAt(0).toUpperCase()+h.approval_status.slice(1):"Choose status..."}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{value:"pending",className:"text-sm font-medium text-slate-700",children:"Pending"},"pending"),e.jsx(V,{value:"approved",className:"text-sm font-medium text-slate-700",children:"Approved"},"approved"),e.jsx(V,{value:"rejected",className:"text-sm font-medium text-slate-700",children:"Rejected"},"rejected")]})]})}),g.filter(N=>N.transfer_id===h.id).length===0&&e.jsxs("div",{className:"flex align-center group",children:[e.jsx(an,{size:30,strokeWidth:2,className:"self-center text-yellow-600"}),e.jsx("span",{className:"text-nowrap absolute left-1/2 mx-auto -translate-x-10 -translate-y-7 rounded-md bg-gray-800 px-1 text-sm text-gray-100 transition-opacity opacity-0 group-hover:opacity-100",children:"No products have been added yet."})]})]}),S=e.jsxs(oe,{onValueChange:N=>m("source",Number(N)),name:"source",children:[e.jsx(de,{name:"source",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsxs(e.Fragment,{children:[(I=b[h.source.id-1])==null?void 0:I.name,e.jsxs("span",{className:"truncate text-xs text-slate-700/60",children:[" ",""," ",(k=b[h.source.id-1])==null?void 0:k.code," ",""," ",(C=b[h.source.id-1])==null?void 0:C.location]})]})})}),e.jsx(me,{className:"bg-white font-medium",children:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):b.map((N,B)=>e.jsxs(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${N.id===h.source.id&&"selected"}`,children:[N.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+N.code+"  "+N.location})]},B))})]}),O=e.jsxs(oe,{onValueChange:N=>m("destination",Number(N)),name:"destination",children:[e.jsx(de,{name:"destination",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsxs(e.Fragment,{children:[(F=b[h.destination.id-1])==null?void 0:F.name,e.jsxs("span",{className:"truncate text-xs text-slate-700/60",children:[" ",""," ",(L=b[h.destination.id-1])==null?void 0:L.code," ",""," ",(W=b[h.destination.id-1])==null?void 0:W.location]})]})})}),e.jsx(me,{className:"bg-white font-medium",children:b.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):b.map((N,B)=>e.jsxs(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${N.id===h.destination.id&&"selected"}`,children:[N.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+N.code+"  "+N.location})]},N.code))})]}),w=e.jsx(oe,{onValueChange:N=>m("transfer_status",N),name:"transfer_status",value:h.transfer_status||"",children:e.jsxs(de,{name:"transfer_status",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:[e.jsx(ue,{placeholder:h.transfer_status?h.transfer_status.charAt(0).toUpperCase()+h.transfer_status.slice(1):"Choose status..."}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{value:"loading",className:"text-sm font-medium text-slate-700",children:"Loading"},"loading"),e.jsx(V,{value:"en route",className:"text-sm font-medium text-slate-700",children:"En route"},"en route"),e.jsx(V,{value:"arrived",className:"text-sm font-medium text-slate-700",children:"Arrived"},"arrived")]})]})}),P=e.jsxs(oe,{onValueChange:N=>m("received_by",Number(N)),name:"received_by",children:[e.jsx(de,{name:"received_by",className:"flex flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:y.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):e.jsx(e.Fragment,{children:h.received_by?y[Number(h.received_by)-1].firstname+" "+y[Number(h.received_by)-1].lastname:"Choose user..."})})}),e.jsx(me,{className:"bg-white font-medium",children:y.length<=0?e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}):y.map((N,B)=>e.jsx(V,{value:N.id.toString(),className:`text-sm font-medium text-slate-700 
								${h.received_by&&N.id===h.received_by.id&&"selected"}`,children:N.firstname+" "+N.lastname},B))})]});return i&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:N=>{N.preventDefault()},children:[e.jsxs("div",{className:"flex max-w-3xl flex-col gap-4",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer Code"}),e.jsx("p",{className:"text-sm",children:a.code?a.code:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Source"}),S]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Destination"}),O]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4 pb-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsx("p",{className:"text-sm",children:h.created_by.firstname+" "+h.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Approval status"}),e.jsxs("p",{className:"text-sm flex flex-row gap-2",children:[(($=a.approval_status)==null?void 0:$.toLowerCase())==="approved"&&e.jsxs(e.Fragment,{children:[a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1),e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"})]}),((Y=a.approval_status)==null?void 0:Y.toLowerCase())==="rejected"&&e.jsxs(e.Fragment,{children:[a.approval_status.charAt(0).toUpperCase()+a.approval_status.slice(1),e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"})]}),v.rolePermissions.some(N=>N.permission_id===22)?((H=h.approval_status)==null?void 0:H.toLowerCase())==="pending"&&p:e.jsxs(e.Fragment,{children:[h.approval_status.charAt(0).toUpperCase()+h.approval_status.slice(1),e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})]})]})]}),a.approved_by&&a.approval_status!="pending"&&e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-600",children:[a.approval_status==="approved"&&"Approved by",a.approval_status==="rejected"&&"Rejected by"]}),e.jsx("p",{className:"text-sm flex flex-row",children:y.length>0?y[a.approved_by-1].firstname+" "+y[a.approved_by-1].lastname:e.jsx("div",{className:"flex h-12 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})})})]})]}),a.approval_status=="approved"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-8 gap-4",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer status"}),e.jsx("p",{className:"text-sm",children:w})]}),e.jsxs("div",{className:"col-span-5 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer schedule"}),e.jsx("div",{className:"text-sm",children:e.jsx(us,{onChange:N=>x("transfer_schedule",N),value:d,format:"yyyy-M-d H:mm",minDate:d,required:!0})})]}),a.transfer_status==="arrived"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Received by"}),e.jsx("p",{className:"text-sm",children:P})]}),e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsx("div",{className:"text-sm",children:e.jsx(us,{onChange:N=>x("date_received",N),value:o,format:"yyyy-M-d H:mm",minDate:d})})]})]})]}),e.jsx("span",{className:"flex flex-col grid-cols-12 text-sm font-bold uppercase text-center",children:"(for PM times, add 12 to the hour)"})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsx("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"col-span-12 w-full flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(hs,{name:"notes",value:a.notes||"",placeholder:"Add notes here....",onChange:c})]})})]}),e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx("div",{className:"flex flex-row justify-center gap-1",children:e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-10 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-2 gap-3",children:e.jsx(A,{type:"submit",fill:s?"green":null,disabled:!s,onClick:u,children:n?"Submitting":"Edit Transfer"})}),e.jsxs("div",{className:"flex flex-col col-span-5 items-start",children:[i&&e.jsx("div",{className:"font-bold text-green-700",children:i}),l&&e.jsx("div",{className:"font-bold text-red-700",children:l}),n?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})})})]})})},hf=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d),console.log("action",d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Pending Transfer",children:e.jsxs(Sl,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(yh,{openModal:l})})}),e.jsx(Ve,{title:s==="details"?"Transfer Details":"Edit Transfer",isOpen:t,onClose:r,closeOnOverlayClick:s==="details",children:e.jsxs(e.Fragment,{children:[s==="details"&&e.jsx(bh,{onClose:r}),s==="edit"&&e.jsx(Nh,{onClose:r})]})})]})})})},wh=({openModal:t})=>{const{invoices:a,isFetching:r,users:s,userSales:n,setSelectedInvoice:l}=Pl(),i=o=>{l(o.invoices),t(o,"details")},d=[{id:"select",header:({table:o})=>e.jsx("input",{type:"checkbox",checked:o.getIsAllPageRowsSelected(),onChange:u=>o.toggleAllPageRowsSelected(!!u.target.checked),"aria-label":"Select all"}),cell:({row:o})=>e.jsx("input",{type:"checkbox",checked:o.getIsSelected(),onChange:u=>o.toggleSelected(!!u.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"issued_by",sortingFn:"text",enableSorting:!0,header:({column:o})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{o.toggleSorting(o.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["FULL NAME ",o.getIsSorted()==="asc"?e.jsx(ee,{}):o.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:o})=>e.jsx("div",{className:"text-center",children:o.original.invoices[0].issued_by.firstname+" "+o.original.invoices[0].issued_by.lastname})},{id:"total_sales",sortingFn:"basic",enableSorting:!0,header:({column:o})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{o.toggleSorting(o.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["NUMBER OF SALES ",o.getIsSorted()==="asc"?e.jsx(ee,{}):o.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:o})=>e.jsx("div",{className:"text-center",children:o.original.invoices.length})},{id:"amount_sales",sortingFn:"basic",enableSorting:!0,header:({column:o})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{o.toggleSorting(o.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["TOTAL AMOUNT OF SALES ",o.getIsSorted()==="asc"?e.jsx(ee,{}):o.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:o})=>{const c=o.original.invoices.filter(x=>x.status==="approved").reduce((x,h)=>x+h.paid_amount,0),m=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c);return e.jsx("div",{className:"text-center",children:m})}},{id:"actions",header:()=>e.jsx("div",{}),cell:({row:o})=>{const u=o.original;return e.jsx("div",{className:"flex flex-row text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>i(u),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]})]})]})})}}];return e.jsx(e.Fragment,{children:e.jsx(qe,{data:n,columns:d,filterWhat:"",hideFilter:!0,dataType:"",openModal:void 0,isLoading:r})})},_h=({onClose:t})=>{const{selectedInvoice:a,isFetching:r}=Pl(),s=a[0],n=[{id:"select",header:({table:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsAllPageRowsSelected(),onChange:i=>l.toggleAllPageRowsSelected(!!i.target.checked),"aria-label":"Select all"}),cell:({row:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsSelected(),onChange:i=>l.toggleSelected(!!i.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"or_no",sortingFn:"alphanumeric",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{l.toggleSorting(l.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["OR NUMBER ",l.getIsSorted()==="asc"?e.jsx(ee,{}):l.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.or_no})},{accessorKey:"created_at",sortingFn:"datetime",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{l.toggleSorting(l.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["CREATED AT ",l.getIsSorted()==="asc"?e.jsx(ee,{}):l.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:l})=>{const i=l.getValue("created_at");if(i.toString()!=="0000-00-00 00:00:00"){const d={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},o=new Date(i).toLocaleDateString([],d);return e.jsx("div",{className:"text-center",children:o})}else return e.jsx("div",{className:"text-center",children:"N/A"})}},{accessorKey:"warehouse",header:()=>e.jsx("div",{className:"text-center",children:"WAREHOUSE CODE"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.warehouse.code})},{id:"customer",header:()=>e.jsx("div",{className:"text-center",children:"CUSTOMER NAME"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.customer.firstname+" "+l.original.customer.lastname})},{accessorKey:"type",sortingFn:"text",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{l.toggleSorting(l.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["TRANSACTION TYPE ",l.getIsSorted()==="asc"?e.jsx(ee,{}):l.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.type})},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-center",children:"STATUS"}),cell:({row:l})=>e.jsx("div",{className:"flex mx-auto items-center justify-center",children:l.original.status.toLowerCase()==="approved"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):l.original.status.toLowerCase()==="rejected"?e.jsx(Ht,{size:20,strokeWidth:2,className:"text-red-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-amber-500"})})},{accessorKey:"subtotal",header:()=>e.jsx("div",{className:"text-center",children:" SUBTOTAL "}),cell:({row:l})=>{const i=l.original.subtotal,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"total_discount",header:()=>e.jsx("div",{className:"text-center",children:" TOTAL DISCOUNT "}),cell:({row:l})=>{const i=l.original.total_discount,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"total_tax",header:()=>e.jsx("div",{className:"text-center",children:" TOTAL TAX "}),cell:({row:l})=>{const i=l.original.total_tax,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"delivery_charge",header:()=>e.jsx("div",{className:"text-center",children:" DELIVERY CHARGE "}),cell:({row:l})=>{const i=l.original.delivery_charge,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"total_amount_due",header:()=>e.jsx("div",{className:"text-center",children:" TOTAL AMOUNT DUE "}),cell:({row:l})=>{const i=l.original.total_amount_due,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"paid_amount",header:()=>e.jsx("div",{className:"text-center",children:" PAID AMOUNT "}),cell:({row:l})=>{const i=l.original.paid_amount,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"change_amount",header:()=>e.jsx("div",{className:"text-center",children:" CHANGE AMOUNT "}),cell:({row:l})=>{const i=l.original.change_amount,d=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return e.jsx("div",{className:"text-center",children:d})}},{accessorKey:"payment_method",header:()=>e.jsx("div",{className:"text-center",children:" PAYMENT METHOD "}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.payment_method||"N/A"})},{accessorKey:"reference_no",header:({column:l})=>e.jsx("div",{className:"text-center",children:"REF #"}),cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.original.reference_no||"--"})}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-4xl max-h-96 flex-col gap-4",children:[e.jsxs("p",{className:"text-lg font-semibold",children:["Issuer: ",s.issued_by.firstname+" "+s.issued_by.lastname]}),e.jsx("div",{className:"overflow-x-hidden",children:e.jsx(qe,{data:a,columns:n,filterWhat:"or_no",dataType:"",openModal:void 0,isLoading:r})})]})})},ff=()=>{const{isOpen:t,openModal:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{a(),n(d)};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"User Sales",children:e.jsxs(Nc,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(wh,{openModal:l})})}),e.jsx(Ve,{isOpen:t,onClose:r,title:s==="details"?"Invoice Details":"",closeOnOverlayClick:s==="details",children:e.jsx(e.Fragment,{children:s==="details"&&e.jsx(_h,{onClose:r})})})]})})})},Sh=()=>{const{roles:t,roleSelect:a,permissions:r,allPermissions:s,permissionChange:n,roleId:l,isChanged:i,isSubmitting:d,error:o,success:u,handleChange:c,handleChangeSelect:m,handleSubmit:x}=ho(),{auth:h}=je(),g=s.filter(p=>Object.keys(p).some(S=>!p.title.includes("view".toLowerCase())&&p.title.includes("users".toLowerCase()))),b=s.filter(p=>Object.keys(p).some(S=>!p.title.includes("view".toLowerCase())&&!p.title.includes("transfer".toLowerCase())&&p.title.includes("product".toLowerCase())||p.title.includes("catalog".toLowerCase()))),y=s.filter(p=>Object.keys(p).some(S=>!p.title.includes("view".toLowerCase())&&p.title.includes("transfer".toLowerCase()))),v=s.filter(p=>Object.keys(p).some(S=>p.title.includes("view".toLowerCase())));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-auto flex h-full max-h-full w-full flex-row divide-x",children:[e.jsxs("div",{className:"flex w-60 flex-none flex-col p-2 pt-8",children:[e.jsx("h3",{className:"ml-4 pb-1 text-xs font-semibold text-slate-500/80",children:"Roles"}),e.jsx("div",{className:"w-full",children:t?t.map(p=>p.title!=="super_admin"&&e.jsx(ne,{variant:"ghost",className:`w-full justify-start capitalize text-slate-700 ${(a==null?void 0:a.title)===p.title&&"bg-slate-300/40"}`,onClick:()=>m("roles",p.title),children:p.title.split("_").join(" ")},p.id+p.title)):e.jsx("div",{className:"flex h-16 w-full items-center justify-center text-slate-500",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})})}),e.jsx("p",{className:"ml-4 pt-6 text-xs font-semibold text-slate-500/80",children:"After saving changes, affected users must log out and log back in to apply the changes."}),(a==null?void 0:a.title)===h.role&&e.jsx("p",{className:"ml-4 pt-6 text-xs font-semibold text-red-500/80",children:"You are editing your current role. Review your changes carefully."}),e.jsxs("div",{className:"mt-auto w-full space-y-3",children:[e.jsxs("div",{className:"text-sm font-semibold",children:[u&&e.jsx("p",{className:"text-green-600",children:u}),o&&e.jsx("p",{className:"text-red-600",children:o})]}),i&&e.jsx(ne,{type:"submit",className:"w-full disabled:cursor-not-allowed",disabled:!!d,onClick:x,children:d?"Saving...":"Save changes"})]})]}),a?e.jsx(Ut,{className:"w-full",type:"auto",style:{"--border":"216 12% 84%"},children:e.jsxs("div",{className:`mx-auto flex w-full max-w-[700px] flex-1 flex-col gap-8 p-6 pt-8 ${!a||d?"pointer-events-none opacity-50":null}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"User Management"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:g.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):g.map(p=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:p.title,className:`${!((a==null?void 0:a.title)==="super_admin"||(a==null?void 0:a.title)==="admin")&&"cursor-pointer"} text-sm capitalize text-slate-700`,children:p.title.split("_").join(" ")}),e.jsx(ft,{id:p.title,name:p.title,value:p.id,disabled:(a==null?void 0:a.title)==="super_admin"||(a==null?void 0:a.title)==="admin",className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(S=>S.permission_id===p.id),onCheckedChange:S=>c(S,p.id)})]},p.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Products"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:b.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):b.map(p=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:p.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:p.title.split("_").join(" ")}),e.jsx(ft,{id:p.title,name:p.title,value:p.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(S=>S.permission_id===p.id),onCheckedChange:S=>c(S,p.id)})]},p.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Transfers"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:y.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):y.map(p=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:p.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:p.title.split("_").join(" ")}),e.jsx(ft,{id:p.title,name:p.title,value:p.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(S=>S.permission_id===p.id),onCheckedChange:S=>c(S,p.id)})]},p.id))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"ml-4 text-sm font-semibold text-slate-500/80",children:"Views"}),e.jsx("div",{className:"w-full divide-y rounded-lg border",children:v.length===0?e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(se,{size:28,strokeWidth:2,className:"animate-spin"})}):v.map(p=>e.jsxs("div",{className:"flex w-full flex-row items-center justify-between p-4",children:[e.jsx(T,{htmlFor:p.title,className:"cursor-pointer text-sm capitalize text-slate-700",children:p.title.split("_").join(" ")}),e.jsx(ft,{id:p.title,name:p.title,value:p.id,className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",checked:n.some(S=>S.permission_id===p.id),onCheckedChange:S=>c(S,p.id)})]},p.id))})]})]})}):e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("p",{className:"text-lg font-medium text-slate-700/50",children:"Select a role to view and modify permissions"})})]})})},pf=()=>e.jsx(e.Fragment,{children:e.jsx($e,{title:"Role Permissions",children:e.jsx(yl,{children:e.jsx("div",{className:"flex h-full max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(Sh,{})})})})})}),Ch=({handleViewItems:t,handleViewDetails:a,handleEditInventory:r})=>[{id:"select",header:({table:n})=>e.jsx("input",{type:"checkbox",checked:n.getIsAllPageRowsSelected(),onChange:l=>n.toggleAllPageRowsSelected(!!l.target.checked),"aria-label":"Select all"}),cell:({row:n})=>e.jsx("input",{type:"checkbox",checked:n.getIsSelected(),onChange:l=>n.toggleSelected(!!l.target.checked),"aria-label":"Select row",className:"justify-center"})},{accessorKey:"code",sortingFn:"text",enableSorting:!0,header:({column:n})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Code"," ",n.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):n.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"warehouse.code",sortingFn:"text",enableSorting:!0,header:({column:n})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["WHS"," ",n.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):n.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"date_received",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Received"})},{accessorKey:"transfer_id",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Transer Id"}),cell:({row:n})=>e.jsx("div",{className:"uppercase",children:e.jsx("span",{children:n.original.transfer_id?n.original.transfer_id:""})})},{accessorKey:"created_by",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Created by"}),cell:({row:n})=>e.jsx("div",{className:"uppercase",children:e.jsxs("span",{className:"max-w-[25ch] truncate",children:[n.original.created_by.firstname," ",n.original.created_by.lastname]})})},{accessorKey:"notes",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Notes"}),cell:({row:n})=>e.jsx("div",{children:e.jsx("p",{className:"max-w-[25ch] truncate",children:n.original.notes?n.original.notes:""})})},{id:"actions",cell:({row:n})=>{const l=n.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>{t(l)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Dl,{size:16,strokeWidth:2})}),e.jsx("span",{children:"View items"})]}),e.jsxs(pe,{onClick:()=>{a(l)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]}),e.jsxs(pe,{onClick:()=>{r(l)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]})]})]})})},enableGlobalFilter:!1}],kh=({openModal:t,filterWarehouse:a,setTotalInventories:r})=>{const[s,n]=f.useState([]),{data:l,isLoading:i,setSelectedInventory:d}=Gr(),o=Qr();f.useEffect(()=>{n(a?l.filter(h=>h.warehouse.id===a):l),r(l.length)},[l,a]);const u=()=>{t({},"add")},c=h=>{d(h),t(h,"edit")},m=h=>{d(h),o(`/inventory/items/${h.id}`)},x=h=>{d(h),t(h,"view_details")};return e.jsx(e.Fragment,{children:e.jsx(qe,{columns:Ch({handleViewItems:m,handleViewDetails:x,handleEditInventory:c}),data:s,filterWhat:"code",dataType:"Inventory",openModal:u,isLoading:i})})},Dh=({FormValue:t,handleChange:a})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid w-full grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"date_received",className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsxs(Dt,{children:[e.jsx(Pt,{id:"date_received",name:"date_received",asChild:!0,children:e.jsxs(ne,{variant:"outline",className:"flex w-full flex-row items-center justify-start gap-2 bg-white text-sm font-normal",children:[e.jsx(sn,{size:18,strokeWidth:1.5}),t.date_received?t.date_received:"Choose date..."]})}),e.jsx(Tt,{className:"w-auto p-0",children:e.jsx(Zr,{mode:"single",initialFocus:!0,required:!0,onDayClick:r=>{const s=new Date(r),n=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`;a("date_received",n)},selected:t.date_received?new Date(t.date_received):new Date})})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"notes",className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(R,{id:"notes",name:"notes",type:"text",defaultValue:t.notes?t.notes:void 0,maxLength:1e3,placeholder:"Notes...",onChange:r=>a("notes",r.target.value)})]})]})}),Ph=({FormValue:t,handleChange:a})=>{const{transfers:r,isFetching:s}=Xr(),[n,l]=f.useState(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid w-full grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"transfer_id",className:"text-sm font-bold text-gray-600",children:"Transfer Item"}),e.jsxs(Dt,{open:n,onOpenChange:l,children:[e.jsx(Pt,{className:"relative my-2 w-full",asChild:!0,children:e.jsxs(ne,{role:"combobox",className:"my-0 w-full justify-between text-sm text-slate-700",variant:"outline",children:[t.transfer_id?(()=>{const i=r.find(d=>d.id===t.transfer_id);return e.jsx("div",{className:"flex items-baseline gap-4",children:e.jsx("span",{children:i==null?void 0:i.code})})})():"Select a transfer item...",e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"w-[462px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{children:[e.jsx(ia,{id:"transfer_id",name:"transfer_id",placeholder:"Transfer code..."}),s&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx(Ca,{children:"No match found"}),e.jsx(Ut,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(ea,{children:r.map(i=>e.jsxs(St,{value:i.id.toString()+i.code,onSelect:()=>{a("transfer_id",i.id),l(!1)},className:"cursor-pointer justify-between rounded-sm",children:[e.jsx("span",{children:i.code}),e.jsxs("span",{className:"text-xs font-semibold text-slate-700/50",children:[i.approval_status,"  ",i.source.code,"->",i.destination.code,"  ",i.transfer_status]})]},i.id))})})]})})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"date_received",className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsxs(Dt,{children:[e.jsx(Pt,{id:"date_received",name:"date_received",asChild:!0,children:e.jsxs(ne,{variant:"outline",className:"flex w-full flex-row items-center justify-start gap-2 bg-white text-sm font-normal",children:[e.jsx(sn,{size:18,strokeWidth:1.5}),t.date_received?t.date_received:"Choose date..."]})}),e.jsx(Tt,{className:"w-auto p-0",children:e.jsx(Zr,{mode:"single",initialFocus:!0,required:!0,onDayClick:i=>{const d=new Date(i),o=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}-${d.getDate().toString().padStart(2,"0")}`;a("date_received",o)},selected:t.date_received?new Date(t.date_received):new Date})})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"notes",className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(R,{id:"notes",name:"notes",type:"text",defaultValue:t.notes?t.notes:void 0,maxLength:1e3,placeholder:"Notes...",onChange:i=>a("notes",i.target.value)})]})]})})},Mi=(t,a,r)=>{const s=r||new Date,n=("0"+(s.getMonth()+1)).slice(-2)+("0"+s.getDate()).slice(-2)+s.getFullYear(),l=t.slice(0,3),i=a.toString().padStart(4,"0");return`${l}-${n}-${i}`.toUpperCase()},Th=({onClose:t,totalInventories:a,warehouses:r})=>{const{auth:s}=je(),{value:n,setValue:l,handleChange:i,handleSubmit:d}=zl(),[o,u]=f.useState(!1),[c,m]=f.useState(null);f.useEffect(()=>{i("created_by",s.user.id),i("type","supplier")},[]);const[x,h]=f.useState();return f.useEffect(()=>{if(x){const g=Mi(x,a+1);i("code",g)}},[x]),e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:async g=>{if(g.preventDefault(),n.date_received===void 0)m("Please select a date for date received.");else{u(!o);const b=await d({action:"add",data:n});(b==null?void 0:b.status)===201?(u(!o),t()):(u(!o),m("Failed to add inventory"))}},children:[e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"code",className:"text-sm font-bold text-gray-600",children:"Code"}),e.jsx(R,{id:"code",name:"code",type:"text",value:n.code||"",readOnly:!0,placeholder:"Code..."})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"warehouse",className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsxs(oe,{onValueChange:g=>{var b;i("warehouse_id",Number(g)),h((b=r.find(y=>y.id===Number(g)))==null?void 0:b.code)},required:!0,children:[e.jsx(de,{name:"warehouse",className:"flex max-w-[30ch] flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:"Choose warehouse..."})}),e.jsx(me,{className:"bg-white font-medium",children:r.map((g,b)=>e.jsxs(V,{value:g.id.toString(),className:"text-sm font-medium text-slate-700",children:[g.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+g.code+"  "+g.location})]},b))})]})]})]}),e.jsx("hr",{className:"col-span-12 my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"type",className:"text-sm font-bold text-gray-600",children:"Type"}),e.jsxs(Hr,{id:"type",defaultValue:n.type?n.type:"supplier",className:"w-full space-y-4",onValueChange:g=>{const{date_received:b,transfer_id:y,...v}=n;l(v),i("type",g)},children:[e.jsxs(Vr,{className:"grid h-fit w-full grid-flow-row grid-cols-2 rounded-md bg-slate-200/50",children:[e.jsx(Ua,{value:"supplier",className:"rounded-md py-1 text-sm font-semibold text-slate-700",children:"Supplier"}),e.jsx(Ua,{value:"transfer",className:"rounded-md py-1 text-sm font-semibold text-slate-700 disabled:cursor-not-allowed disabled:opacity-50",children:"Transfer"})]}),e.jsx(Os,{value:"supplier",children:e.jsx(Dh,{FormValue:n,handleChange:i})}),e.jsx(Os,{value:"transfer",children:e.jsx(Ph,{FormValue:n,handleChange:i})})]})]})]}),e.jsx("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{fill:"default",type:"reset",onClick:()=>t(),className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:o||Object.keys(n).length<=2||!x,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:o?"Submitting...":"Add inventory"})]})}),c&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-semibold text-red-600",children:c})})]})})},Oh=({onClose:t})=>{const{selectedInventory:a}=Gr(),{transfers:r,isFetching:s}=Xr(),n=r.find(l=>l.id===a.transfer_id);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-2",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-5",children:[e.jsxs("div",{className:"col-span-5 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Code"}),e.jsx("p",{className:"text-sm",children:a.code})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Type"}),e.jsx("p",{className:"text-sm capitalize",children:a.type})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{className:"col-span-5 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsxs("p",{className:"text-sm",children:[a.warehouse.name," (",a.warehouse.code,")"]})]}),a.type==="transfer"&&e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Transfer Code"}),e.jsx("p",{className:"text-sm capitalize",children:s?"Loading...":n==null?void 0:n.code})]}),e.jsxs("div",{className:`flex flex-col justify-center gap-1 ${a.type==="supplier"?"col-span-7":"col-span-3"}`,children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsx("p",{className:"text-sm capitalize",children:a.date_received?a.date_received:""})]}),e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm capitalize",children:a.notes?a.notes:""})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-5",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsxs("p",{className:"text-sm capitalize",children:[a.created_by.firstname," ",a.created_by.lastname]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created at"}),e.jsx("p",{className:"text-sm capitalize",children:Ae(a.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Updated at"}),e.jsx("p",{className:"text-sm capitalize",children:a.updated_at?Ae(a.updated_at):""})]})]})]})})},Ah=({onClose:t,warehouses:a})=>{const{selectedInventory:r}=Gr(),{value:s,handleChange:n,handleSubmit:l}=zl(),{transfers:i,isFetching:d}=Xr(),[o,u]=f.useState(!1),[c,m]=f.useState(!1),[x,h]=f.useState(null),g=v=>i.find(p=>v===p.id),[b,y]=f.useState();return f.useEffect(()=>{if(b){const v=Mi(b,r.id,new Date(r.created_at));n("code",v)}},[b]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async v=>{m(!c),v.preventDefault();const p=await l({action:"update",id:r.id,data:s});(p==null?void 0:p.status)===200?(m(!c),t()):(m(!c),h("Failed to update inventory item"))},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"code",className:"text-sm font-bold text-gray-600",children:"Code"}),e.jsx(R,{id:"code",name:"code",type:"text",value:s.code||r.code||"",readOnly:!0,placeholder:"Code..."})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"warehouse",className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsxs(oe,{onValueChange:v=>{var p;n("warehouse_id",Number(v)),y((p=a.find(S=>S.id===Number(v)))==null?void 0:p.code)},defaultValue:r.warehouse.id.toString(),required:!0,children:[e.jsx(de,{name:"warehouse",className:"flex max-w-[30ch] flex-row items-center gap-3 truncate bg-white text-sm",children:e.jsx(ue,{placeholder:"Choose warehouse..."})}),e.jsx(me,{className:"bg-white font-medium",children:a.map((v,p)=>e.jsxs(V,{value:v.id.toString(),className:"text-sm font-medium text-slate-700",children:[v.name,e.jsx("span",{className:"truncate text-xs text-slate-700/60",children:"  "+v.code+"  "+v.location})]},p))})]})]})]}),e.jsx("hr",{className:"col-span-12 my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"type",className:"text-sm font-bold text-gray-600",children:"Type"}),e.jsxs(oe,{defaultValue:r.type,onValueChange:v=>n("type",v),children:[e.jsx(de,{name:"type",className:"flex max-w-[30ch] flex-row items-center gap-3 truncate bg-white text-sm capitalize",children:e.jsx(ue,{placeholder:"Choose type..."})}),e.jsxs(me,{className:"bg-white font-medium",children:[e.jsx(V,{value:"supplier",className:"text-sm font-medium text-slate-700",children:"Supplier"}),e.jsx(V,{value:"transfer",className:"text-sm font-medium text-slate-700",children:"Transfer"})]})]})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"date_received",className:"text-sm font-bold text-gray-600",children:"Date received"}),e.jsxs(Dt,{children:[e.jsx(Pt,{id:"date_received",name:"date_received",asChild:!0,children:e.jsxs(ne,{variant:"outline",className:"flex w-full flex-row items-center justify-start gap-2 bg-white text-sm font-normal",children:[e.jsx(sn,{size:18,strokeWidth:1.5}),s.date_received?s.date_received:r.date_received]})}),e.jsx(Tt,{className:"w-auto p-0",children:e.jsx(Zr,{mode:"single",initialFocus:!0,required:!0,month:s.date_received?new Date(s.date_received):new Date(r.date_received),onDayClick:v=>{const p=new Date(v),S=`${p.getFullYear()}-${(p.getMonth()+1).toString().padStart(2,"0")}-${p.getDate().toString().padStart(2,"0")}`;n("date_received",S)},selected:s.date_received?new Date(s.date_received):new Date(r.date_received)})})]})]}),(r.type==="transfer"||s.type==="transfer")&&e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"transfer_id",className:"text-sm font-bold text-gray-600",children:"Transfer Item"}),e.jsxs(Dt,{open:o,onOpenChange:u,children:[e.jsx(Pt,{className:"relative my-2 w-full",asChild:!0,children:e.jsxs(ne,{role:"combobox",className:"my-0 w-full justify-between text-sm text-slate-700",variant:"outline",children:[i?s.transfer_id?(()=>{const v=g(s.transfer_id);return e.jsx("div",{className:"flex items-baseline gap-4",children:v==null?void 0:v.code})})():r.transfer_id?(()=>{const v=g(r.transfer_id);return e.jsx("div",{className:"flex items-baseline gap-4",children:v?v.code:"Loading..."})})():"Select inventory item...":"Loading...",e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"w-[462px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{children:[e.jsx(ia,{id:"transfer_id",name:"transfer_id",placeholder:"Transfer code..."}),d&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx(Ca,{children:"No match found"}),e.jsx(Ut,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(ea,{children:i.map(v=>e.jsxs(St,{value:v.id.toString()+v.code,onSelect:()=>{n("transfer_id",v.id),u(!1)},className:"cursor-pointer justify-between rounded-sm",children:[e.jsx("span",{children:v.code}),e.jsxs("span",{className:"text-xs font-semibold text-slate-700/50",children:[v.approval_status,"  ",v.source.code,"->",v.destination.code,"  ",v.transfer_status]})]},v.id))})})]})})]})]}),e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"notes",className:"text-sm font-bold text-gray-600",children:"Notes"}),e.jsx(R,{id:"notes",name:"notes",type:"text",defaultValue:s.notes?s.notes:r.notes?r.notes:void 0,maxLength:1e3,placeholder:"Notes...",onChange:v=>n("notes",v.target.value)})]})]}),e.jsx("div",{className:"flex w-full flex-row pt-4",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4 whitespace-nowrap",children:[e.jsx(A,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-gray-700 hover:text-white",onClick:t,children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:c||Object.keys(s).length===0,className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:c?"Applying changes...":"Apply changes"})]})}),x&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:x})})]})})})},gf=()=>{const{warehouses:t}=$t(),[a,r]=f.useState(0),[s,n]=f.useState(0),{openModal:l,isOpen:i,closeModal:d}=Ee(),[o,u]=f.useState(""),c=(m,x)=>{u(x),l()};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Inventory",children:e.jsxs(wc,{children:[e.jsxs("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:[e.jsxs("div",{className:"ml-auto flex flex-row items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Filter warehouse:"," "]}),e.jsxs(oe,{defaultValue:"0",onValueChange:m=>r(Number(m)),children:[e.jsx(de,{className:"w-[300px] text-sm font-medium",children:e.jsx(ue,{placeholder:"All"})}),e.jsxs(me,{className:"text-sm font-medium capitalize",children:[e.jsx(V,{value:"0",children:"All"},"all"),t.map(m=>e.jsxs(V,{value:m.id.toString(),children:[m.name," (",m.code,")"]},m.id))]})]})]}),e.jsx("div",{className:"w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(kh,{filterWarehouse:a>0?a:void 0,openModal:c,setTotalInventories:n})})]}),e.jsx(Ve,{isOpen:i,onClose:d,title:o==="add"?"Add Inventory":o==="view_details"?"Details":o==="edit"?"Edit Inventory":"",closeOnOverlayClick:o==="view_details",children:e.jsxs(e.Fragment,{children:[o==="add"&&e.jsx(Th,{warehouses:t,totalInventories:s,onClose:d}),o==="view_details"&&e.jsx(Oh,{onClose:d}),o==="edit"&&e.jsx(Ah,{warehouses:t,onClose:d})]})})]})})})},Eh=({handleEditInventoryProduct:t,handleToggleStatus:a})=>[{id:"select",header:({table:s})=>e.jsx("input",{type:"checkbox",checked:s.getIsAllPageRowsSelected(),onChange:n=>s.toggleAllPageRowsSelected(!!n.target.checked),"aria-label":"Select all"}),cell:({row:s})=>e.jsx("input",{type:"checkbox",checked:s.getIsSelected(),onChange:n=>s.toggleSelected(!!n.target.checked),"aria-label":"Select row",className:"justify-center"})},{id:"product",accessorKey:"product.name",sortingFn:"text",enableSorting:!0,header:({column:s})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"flex flex-row items-center whitespace-nowrap bg-transparent uppercase text-slate-700",children:["Name"," ",s.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):s.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"supplier_id.name",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Supplier"})},{accessorKey:"capital_price",header:()=>e.jsx("div",{className:"justify-center whitespace-nowrap uppercase",children:"Cap. Price"}),cell:({row:s})=>{const n=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s.original.capital_price);return e.jsx("div",{className:"flex items-center uppercase",children:e.jsx("span",{children:s.original.capital_price?n:""})})}},{accessorKey:"unit",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Unit"})},{accessorKey:"stocks_count",header:()=>e.jsx("div",{className:"justify-center whitespace-nowrap uppercase",children:"Stocks"})},{accessorKey:"damage_count",header:()=>e.jsx("div",{className:"justify-center whitespace-nowrap uppercase",children:"Damaged"})},{accessorKey:"total_count",header:()=>e.jsx("div",{className:"justify-center whitespace-nowrap uppercase",children:"Total"})},{accessorKey:"transferred_stocks_count",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Transferred"})},{accessorKey:"sold_count",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Sold"})},{accessorKey:"miscellaneous_count",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Misc"})},{accessorKey:"remaining_stocks_count",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Remaining"})},{accessorKey:"status",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Status"}),cell:({row:s})=>e.jsx(ba,{children:e.jsxs("div",{className:"group relative flex w-fit items-center",children:[e.jsx(sa,{children:s.original.status?e.jsx(ka,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-gray-600"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium normal-case",children:s.original.status?"Approved":"Pending"})})]})})},{id:"actions",cell:({row:s})=>{const n=s.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>{t(n)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]}),e.jsxs(pe,{onClick:()=>a(n.id,+!n.status),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:n.status?e.jsx(kt,{size:16,strokeWidth:2.25}):e.jsx(ka,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:n.status?"Set pending":"Set approved"})]})]})]})})},enableGlobalFilter:!1}],Fh=({id:t,openModal:a})=>{const{data:r,isLoading:s}=_c(t),{setSelectedInventoryProduct:n}=Br(),{handleSubmit:l}=zs(),i=()=>{a({},"add")},d=u=>{n(u),a(u,"edit")},o=(u,c)=>{l({action:"update",id:u,data:{status:c}})};return e.jsx("div",{className:"w-full rounded-lg border bg-white",children:e.jsx(xs,{children:e.jsx(qe,{columns:Eh({handleEditInventoryProduct:d,handleToggleStatus:o}),data:r||[],filterWhat:"product",dataType:"Items",openModal:i,isLoading:s})})})},Ih=({setInventoryProductsQueue:t,inventoryId:a,products:r,productsLoading:s,suppliers:n,suppliersLoading:l,currentId:i,handleNavigation:d,selectedProduct:o})=>{var w,P,I,k;const{auth:u}=je(),{value:c,handleChange:m}=zs(),[x,h]=f.useState(!1),[g,b]=f.useState(!1),[y,v]=f.useState(null),p=Qr();f.useEffect(()=>{var C,F;m("inventory_id",a),m("unit","pcs"),(C=u.role)!=null&&C.includes("admin")&&m("status",1),o&&(m("product_id",o.data.product_id),m("status",o.data.status),m("supplier_id",o.data.supplier_id),m("capital_price",o.data.capital_price),m("unit",o.data.unit),m("stocks_count",o.data.stocks_count),m("damage_count",o.data.damage_count),m("total_count",o.data.total_count)),!o&&!((F=u.role)!=null&&F.includes("admin"))&&m("capital_price",0)},[]);const[S,O]=f.useState();return f.useEffect(()=>{const C=Wl(c.stocks_count||0,c.damage_count||0);O(C),m("total_count",C)},[c.damage_count,c.stocks_count,S]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:C=>{C.preventDefault(),c.product_id===void 0?v("Please select a product first."):c.supplier_id===void 0?v("Please select a supplier first."):(t(o?F=>[...F.filter(L=>L.id!==o.id),{id:o.id,data:c}]:F=>[...F,{id:i+1,data:c}]),d())},children:e.jsxs("div",{className:"flex w-full flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-12 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"product_id",className:"text-sm font-bold text-gray-600",children:"Product"}),e.jsxs(Dt,{open:x,onOpenChange:h,children:[e.jsx(Pt,{id:"product_id",className:"relative w-full",asChild:!0,autoFocus:!0,children:e.jsxs(ne,{role:"combobox",className:"w-full justify-between text-sm font-bold text-slate-700",variant:"outline",children:[c.product_id?e.jsx(e.Fragment,{children:(()=>{const C=r.find(F=>F.id===c.product_id);return e.jsxs("div",{className:"flex w-full items-baseline gap-4 capitalize",children:[e.jsxs("span",{className:"max-w-full truncate",children:[C==null?void 0:C.name," ",(C==null?void 0:C.brand)&&`(${C.brand})`]}),e.jsx("span",{className:"font-baseline text-xs text-slate-700/50",children:C==null?void 0:C.serial_no})]})})()}):e.jsx("span",{children:"Select a product..."}),e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"min-w-[642px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{children:[e.jsx(ia,{placeholder:"Product name or serial number..."}),s&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx(Ca,{children:"No match found"}),e.jsxs(Ut,{className:"max-h-[200px] overflow-y-scroll",children:[e.jsx(ea,{forceMount:!0,children:e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",onSelect:()=>{p("/products"),b(!1)},forceMount:!0,children:[e.jsx("span",{children:"Add new product..."}),e.jsx(kn,{size:16,strokeWidth:2.25,className:"text-slate-700/50"})]},"create-new-product")}),e.jsx(Dn,{}),e.jsx(ea,{children:r.map((C,F)=>e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",value:C.name+C.serial_no+C.brand,onSelect:()=>{m("product_id",C.id),h(!1)},children:[e.jsxs("span",{className:"max-w-[50%] truncate",children:[C.name," ",C.brand&&`(${C.brand})`]}),e.jsx("span",{className:"max-w-[49%] truncate text-xs font-semibold text-slate-700/50",children:C.serial_no+"  "+C.size+"  "+C.color})]},F))})]})]})})]})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"supplier_id",className:"text-sm font-bold text-gray-600",children:"Supplier"}),e.jsxs(Dt,{open:g,onOpenChange:b,children:[e.jsx(Pt,{id:"supplier_id",className:"relative w-full",asChild:!0,children:e.jsxs(ne,{role:"combobox",className:"w-full justify-between text-sm font-bold text-slate-700",variant:"outline",children:[c.supplier_id?e.jsx(e.Fragment,{children:(()=>{const C=n.find(F=>F.id===c.supplier_id);return e.jsxs("div",{className:"flex w-full items-baseline gap-4 capitalize",children:[e.jsx("span",{className:"max-w-full truncate",children:C==null?void 0:C.name}),e.jsx("span",{className:"font-baseline text-xs text-slate-700/50",children:C==null?void 0:C.address})]})})()}):e.jsx("span",{children:"Select a supplier..."}),e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"min-w-[315px] p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{children:[e.jsx(ia,{placeholder:"Supplier name or address..."}),l&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx(Ca,{children:"No match found"}),e.jsxs(Ut,{className:"max-h-[200px] overflow-y-scroll",children:[e.jsx(ea,{forceMount:!0,children:e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",onSelect:()=>{p("/supplier"),b(!1)},children:[e.jsx("span",{children:"Add new supplier..."}),e.jsx(kn,{size:16,strokeWidth:2.25,className:"text-slate-700/50"})]},"create-new-supplier")}),e.jsx(Dn,{}),e.jsx(ea,{children:n.map((C,F)=>e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",onSelect:()=>{m("supplier_id",C.id),b(!1)},children:[e.jsx("span",{children:C.name}),e.jsx("span",{className:"text-xs font-semibold text-slate-700/50",children:C.address})]},F))})]})]})})]})]}),(u.role==="admin"||u.role==="super_admin")&&e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"status",className:"text-sm font-bold text-gray-600",children:"Status"}),e.jsxs(oe,{value:(w=c.status)==null?void 0:w.toString(),required:!0,onValueChange:C=>m("status",Number(C)),children:[e.jsx(de,{name:"status",id:"status",className:"w-full px-4 text-sm font-bold text-slate-700",children:e.jsx(ue,{placeholder:"Select status..."})}),e.jsxs(me,{className:"text-sm font-medium",children:[e.jsx(V,{value:"1",children:"Approved"}),e.jsx(V,{value:"0",children:"Pending"})]})]})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-3",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(R,{id:"capital_price",name:"capital_price",type:"number",min:0,step:.01,required:!0,className:"pl-8",placeholder:"0.00",disabled:!((P=u.role)!=null&&P.includes("admin")),value:c.capital_price||"",onBlur:C=>{c.capital_price!==void 0&&(C.target.value=Number(C.target.value).toFixed(2))},onChange:C=>{m("capital_price",Number(Number(C.target.value).toFixed(2)))}}),e.jsx("span",{className:"absolute bottom-0 left-0 pb-[0.65rem] pl-3 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(R,{id:"unit",name:"unit",type:"text",maxLength:40,required:!0,value:c.unit||"",onChange:C=>m("unit",C.target.value)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"stocks_count",className:"text-sm font-bold text-gray-600",children:"Stocks count"}),e.jsx(R,{id:"stocks_count",name:"stocks_count",type:"number",min:0,max:9999999,step:1,value:(I=c.stocks_count)==null?void 0:I.toFixed(0),required:!0,onChange:C=>{m("stocks_count",Number(Number(C.target.value).toFixed(0)))}})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"damage_count",className:"text-sm font-bold text-gray-600",children:"Damage count"}),e.jsx(R,{id:"damage_count",name:"damage_count",type:"number",min:0,max:c.stocks_count??0,step:1,required:!0,value:(k=c.damage_count)==null?void 0:k.toFixed(0),onChange:C=>m("damage_count",Number(Number(C.target.value).toFixed(0)))})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"total_count",className:"text-sm font-bold text-gray-600",children:"Total count"}),e.jsx(R,{id:"total_count",name:"total_count",type:"number",min:0,max:9999999,step:1,readOnly:!0,value:S??"0",className:`${S&&S<0&&"text-red-600"}`})]})]}),e.jsx("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:e.jsx("div",{className:"ml-auto flex flex-row gap-4",children:e.jsx(A,{type:"submit",fill:"green",disabled:c.product_id===void 0||c.supplier_id===void 0,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:o?"Save changes":"Add item to queue"})})}),y&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:y})})]})})})},Lh=["","Product name","Supplier","Status","Capital price","Unit","Stocks","Damaged","Total"],Mh=({data:t,products:a,suppliers:r,handleEditItem:s,handleRemoveItem:n,handleSubmit:l,onClose:i})=>{const[d,o]=f.useState(!1),[u,c]=f.useState(null),m=()=>{o(!0),l({action:"batch-add",data:t.map(x=>x==null?void 0:x.data)}).then(()=>{et.success("Items added to inventory"),o(!1),i()}).catch(()=>{et.error("Error adding items to inventory"),c("Error adding items to inventory"),o(!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative flex h-full flex-col",children:e.jsxs(xs,{children:[e.jsxs(Ut,{type:"always",className:"flex-1 rounded-md border border-gray-200 bg-white",style:{"--border":"216 12% 84%"},children:[t.length<=0&&e.jsx("div",{className:"absolute z-10 flex h-full w-full items-center justify-center",children:e.jsx("p",{className:"text-lg font-medium text-gray-500/50",children:"No items in queue"})}),e.jsx(Pn,{orientation:"horizontal",className:"z-50 h-3"}),e.jsx(Pn,{orientation:"vertical",className:"z-50 h-3",style:{"--border":"216 12% 84%"},asChild:!0}),e.jsxs($r,{children:[e.jsx(qr,{children:e.jsx(Na,{id:"tHeaderRow",className:"hover:bg-white",children:Lh.map(x=>e.jsx(Kr,{className:"whitespace-nowrap px-5 py-3 text-center text-xs font-bold uppercase",children:x},x+"_head"))},"tHeaderRow")}),e.jsx(Yr,{className:"[&>*:nth-child(even)]:bg-white [&>*:nth-child(odd)]:bg-gray-50",children:t.length>0&&t.map(x=>{var h,g;return e.jsxs(Na,{className:"text-sm font-medium text-gray-700",children:[e.jsx(Me,{className:"p-3 pr-0",children:e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-200/70 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white font-medium",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>{x!=null&&x.id&&s(x)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2})}),e.jsx("span",{children:"Edit"})]},(x==null?void 0:x.id)+"edit"),e.jsxs(pe,{onClick:()=>{x!=null&&x.id&&n(x.id)},className:"flex flex-row items-center gap-3 rounded-md p-2 focus:bg-red-50 focus:text-red-700",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Uc,{size:16,strokeWidth:2})}),e.jsx("span",{children:"Remove"})]},(x==null?void 0:x.id)+"remove")]})]})})},(x==null?void 0:x.id)+"action"),e.jsx(Me,{className:"max-w-[200px] truncate px-5 py-3",children:x!=null&&x.data.product_id?(h=a.find(b=>b.id===x.data.product_id))==null?void 0:h.name:x==null?void 0:x.data.product_id},(x==null?void 0:x.id)+"product_id"),e.jsx(Me,{className:"max-w-[200px] truncate px-5 py-3",children:x!=null&&x.data.supplier_id?(g=r.find(b=>b.id===x.data.supplier_id))==null?void 0:g.name:x==null?void 0:x.data.supplier_id},(x==null?void 0:x.id)+"supplier_id"),e.jsx(Me,{className:"px-5 py-3",children:e.jsxs(Sc,{children:[e.jsx(sa,{children:x!=null&&x.data.status?e.jsx(ka,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(kt,{size:20,strokeWidth:2,className:"text-gray-600"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium normal-case",children:x.data.status?"Approved":"Pending"})})]})},(x==null?void 0:x.id)+"status"),e.jsx(Me,{className:"px-5 py-3",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format((x==null?void 0:x.data.capital_price)||0)},(x==null?void 0:x.id)+"capital_price"),e.jsx(Me,{className:"px-5 py-3",children:x==null?void 0:x.data.unit},(x==null?void 0:x.id)+"unit"),e.jsx(Me,{className:"px-5 py-3",children:x==null?void 0:x.data.stocks_count},(x==null?void 0:x.id)+"stocks_count"),e.jsx(Me,{className:"px-5 py-3",children:x==null?void 0:x.data.damage_count},(x==null?void 0:x.id)+"damage_count"),e.jsx(Me,{className:"px-5 py-3",children:x==null?void 0:x.data.total_count},(x==null?void 0:x.id)+"total_count")]},(x==null?void 0:x.id)+"row")})})]})]}),e.jsxs("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:[u&&e.jsx("div",{className:"flex w-full flex-row items-center justify-start gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:u})}),e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{fill:"default",type:"reset",onClick:()=>i(),className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:t.length<=0||d,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",onClick:x=>{x.preventDefault(),m()},children:t.length<=1?"Add item to inventory":`Add ${t.length} items to inventory`})]})]})]})})})},Wh={hidden:{opacity:0,x:"-100%"},animate:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}},exit:{opacity:0,x:"-100%",transition:{duration:.3,ease:"easeInOut"}}},zh={hidden:{opacity:0,x:"100%"},animate:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}},exit:{opacity:0,x:"100%",transition:{duration:.3,ease:"easeInOut"}}},Rh=({onClose:t,inventoryId:a})=>{const{auth:r}=je(),{data:s,isLoading:n}=hl(),{suppliers:l,isFetching:i}=Tl(),{handleSubmit:d}=zs(),[o,u]=f.useState([]),[c,m]=f.useState({}),[x,h]=f.useState("main"),g=()=>{m({}),h(x==="main"?"form":"main")},b=v=>{m(v),h("form")},y=v=>{u(p=>p.filter(S=>S.id!==v))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:x==="main"?"ml-auto":"",children:e.jsx(ne,{className:"flex flex-row items-center gap-2 bg-gray-200 text-sm font-bold text-gray-700 hover:bg-gray-300 hover:text-gray-700",onClick:()=>{g()},children:e.jsxs(e.Fragment,{children:[x==="main"?e.jsx(qc,{size:20,strokeWidth:2.5}):e.jsx(Ol,{size:20,strokeWidth:2.5}),x==="main"?"Add an item":"Back"]})})}),e.jsx("div",{className:`relative min-w-[850px] overflow-x-clip transition-all duration-300 
					${x==="form"?r.role==="admin"||r.role==="super_admin"?"min-h-[400px]":"min-h-[336px]":"min-h-[600px]"}`,children:e.jsx(Cc,{initial:!1,children:x==="main"?e.jsx(Tn.div,{variants:Wh,initial:"hidden",animate:"animate",exit:"exit",className:"absolute h-full w-full overflow-x-auto antialiased",children:e.jsx(Mh,{data:o,products:s,suppliers:l,handleEditItem:b,handleRemoveItem:y,handleSubmit:d,onClose:t})},"main"):e.jsx(Tn.div,{variants:zh,initial:"hidden",animate:"animate",exit:"exit",className:"absolute max-h-[406px] w-full p-1",children:e.jsx(Ih,{setInventoryProductsQueue:u,inventoryId:a,products:s,productsLoading:n,suppliers:l,suppliersLoading:i,currentId:o.reduce((v,p)=>p.id>v?p.id:v,0),handleNavigation:g,selectedProduct:Object.keys(c).length?c:void 0})},"form")})})]})})},Uh=({onClose:t})=>{var y;const{auth:a}=je(),{selectedInventoryProduct:r}=Br(),{value:s,handleChange:n,handleSubmit:l}=zs(),{suppliers:i,isFetching:d}=Tl(),[o,u]=f.useState(!1),[c,m]=f.useState(!1),[x,h]=f.useState(null),[g,b]=f.useState();return f.useEffect(()=>{const v=Wl(s.stocks_count??r.stocks_count,s.damage_count??r.damage_count);b(v),n("total_count",v)},[s.damage_count,s.stocks_count,g]),e.jsx(e.Fragment,{children:e.jsx("form",{action:"",onSubmit:async v=>{m(!c),v.preventDefault();const p=await l({action:"update",id:r.id,data:s});typeof p=="object"&&"status"in p&&p.status===200?(m(!c),t()):(m(!c),h("Failed to update item"))},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:`${a.role==="admin"||a.role==="super_admin"?"col-span-12":"col-span-6"} flex flex-col justify-center gap-1`,children:[e.jsx(T,{htmlFor:"product",className:"text-sm font-bold text-gray-600",children:"Product"}),e.jsx(R,{id:"product",name:"product",type:"text",readOnly:!0,value:r==null?void 0:r.product.name})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"supplier_id",className:"text-sm font-bold text-gray-600",children:"Supplier"}),e.jsxs(Dt,{open:o,onOpenChange:u,children:[e.jsx(Pt,{id:"supplier_id",className:"relative w-full",asChild:!0,children:e.jsxs(ne,{role:"combobox",className:"w-full justify-between text-sm font-bold text-slate-700",variant:"outline",children:[s.supplier_id?e.jsx(e.Fragment,{children:(()=>{const v=i.find(p=>p.id===s.supplier_id);return e.jsxs("div",{className:"flex w-full items-baseline gap-4 capitalize",children:[e.jsx("span",{className:"max-w-full truncate",children:v==null?void 0:v.name}),e.jsx("span",{className:"font-baseline text-xs text-slate-700/50",children:v==null?void 0:v.address})]})})()}):e.jsx("span",{children:r.supplier_id.name}),e.jsx(Ha,{size:14,strokeWidth:2,className:"h-4 w-4 opacity-70"})]})}),e.jsx(Tt,{className:"p-0 text-sm font-medium text-slate-700",children:e.jsxs(Sa,{children:[e.jsx(ia,{placeholder:"Supplier name or address..."}),i===void 0&&d&&e.jsx("div",{className:"flex h-16 w-full items-center justify-center",children:e.jsx(se,{size:22,strokeWidth:2.5,className:"animate-spin text-slate-700/50"})}),e.jsx(Ca,{children:"No match found"}),e.jsx(Ut,{className:"max-h-[200px] overflow-y-scroll",children:e.jsx(ea,{children:i.map((v,p)=>e.jsxs(St,{className:"cursor-pointer justify-between rounded-sm",onSelect:()=>{n("supplier_id",v.id),u(!1)},children:[e.jsx("span",{children:v.name}),e.jsx("span",{className:"text-xs font-semibold text-slate-700/50",children:v.address})]},p))})})]})})]})]}),(a.role==="admin"||a.role==="super_admin")&&e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"status",className:"text-sm font-bold text-gray-600",children:"Status"}),e.jsxs(oe,{value:s.status?s.status.toString():r.status.toString(),required:!0,onValueChange:v=>n("status",v),children:[e.jsx(de,{name:"status",id:"status",className:"w-full px-4 text-sm font-bold text-slate-700",children:e.jsx(ue,{placeholder:"Select status..."})}),e.jsxs(me,{className:"text-sm font-medium",children:[e.jsx(V,{value:"1",children:"Approved"}),e.jsx(V,{value:"0",children:"Pending"})]})]})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-3",children:[e.jsxs("div",{className:"relative col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(R,{id:"capital_price",name:"capital_price",type:"number",min:0,step:.01,required:!0,className:"pl-8",placeholder:"0.00",readOnly:a.role!=="admin",defaultValue:r==null?void 0:r.capital_price.toFixed(2),onBlur:v=>{v.target.value=Number(v.target.value).toFixed(2)},onChange:v=>{const p=Number(v.target.value).toFixed(2);n("capital_price",Number(p))}}),e.jsx("span",{className:"absolute bottom-0 left-0 pb-[0.65rem] pl-3 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(R,{id:"unit",name:"unit",type:"text",maxLength:40,required:!0,defaultValue:r==null?void 0:r.unit,onChange:v=>n("unit",v.target.value)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"stocks_count",className:"text-sm font-bold text-gray-600",children:"Stocks count"}),e.jsx(R,{id:"stocks_count",name:"stocks_count",type:"number",min:0,max:9999999,step:1,value:((y=s.stocks_count)==null?void 0:y.toFixed(0))??(r==null?void 0:r.stocks_count)??0,onChange:v=>{n("stocks_count",Number(Number(v.target.value).toFixed(0)))}})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"damage_count",className:"text-sm font-bold text-gray-600",children:"Damage count"}),e.jsx(R,{id:"damage_count",name:"damage_count",type:"number",min:0,max:s.stocks_count??r.stocks_count,step:1,required:!0,value:s.damage_count!==void 0?s.damage_count:(r==null?void 0:r.damage_count)||"",onBlur:v=>{v.target.value=Number(v.target.value).toFixed(0)},onChange:v=>n("damage_count",Number(Number(v.target.value).toFixed(0)))})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"total_count",className:"text-sm font-bold text-gray-600",children:"Total count"}),e.jsx(R,{id:"total_count",name:"total_count",type:"number",min:0,max:9999999,step:1,value:g||0,className:`${g&&g<0&&"text-red-600"}`,readOnly:!0})]})]}),e.jsx("div",{className:"flex w-full justify-between whitespace-nowrap pt-6",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{fill:"default",type:"reset",onClick:()=>t(),className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:c,className:"max-w-fit flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:c?"Applying...":"Apply changes"})]})}),x&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm font-bold text-red-600",children:x})})]})})})},vf=()=>{const{id:t}=kc(),{data:a,isLoading:r}=Dc(Number(t)),s=Qr(),n=()=>{s(-1)},{openModal:l,isOpen:i,closeModal:d}=Ee(),[o,u]=f.useState(""),c=(m,x)=>{u(x),l()};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Inventory items",children:e.jsxs(Pc,{children:[e.jsxs("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:[e.jsxs("div",{className:"text-primary-dark-gray flex flex-row items-center gap-6 text-sm font-medium",children:[e.jsxs(ne,{onClick:()=>n(),className:"flex flex-row items-center gap-3 whitespace-nowrap bg-gray-200 pr-6 font-bold text-gray-700 hover:bg-gray-300 hover:text-gray-700",children:[e.jsx(Ol,{size:22,strokeWidth:2.25}),e.jsx("span",{children:"Go back"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("h2",{className:"font-bold",children:"Inventory code:"}),e.jsx("span",{children:r?"Loading...":a==null?void 0:a.code})]})]}),e.jsx("div",{className:"h-full w-full overflow-x-hidden rounded-lg",children:e.jsx(Fh,{id:Number(t),openModal:c})})]}),e.jsx(Ve,{isOpen:i,onClose:d,title:o==="add"?"Add Items":o==="edit"?"Edit Item":"",children:e.jsxs(e.Fragment,{children:[o==="add"&&e.jsx(Rh,{inventoryId:Number(t),onClose:d}),o==="edit"&&e.jsx(Uh,{onClose:d})]})})]})})})},Hh=()=>{const t=Qe(),{selectedExpenses:a}=Jr(),[r,s]=f.useState({id:a.id,title:a.title,date_of_operation:a.date_of_operation,amount:a.amount,notes:a.notes,created_by:a.created_by.id,created_at:a.created_at,updated_at:a.updated_at}),[n,l]=f.useState(!1),[i,d]=f.useState(!1),[o,u]=f.useState(null),[c,m]=f.useState(null),x=()=>Object.keys(r).map(p=>({text:p})).length>=8?r.amount?r.title?[!0,""]:[!1,"Please fill up all fields (notes are optional)"]:[!1,"Please fill up all fields (notes are optional)"]:[!1,"Please fill up all fields (notes are optional)"],h=v=>{l(!0),m(null),u(null),s(p=>({...p,[v.target.name]:v.target.value}))},g=async()=>{const v=x();d(!0),v[0]?await y(r):(u(v[1]),d(!1))},b={onSuccess:async()=>{await t.invalidateQueries({queryKey:["expenses"]}),d(!1),l(!1),m("Expenses info has been edited")},onError:v=>{console.error(v),u(v.message),d(!1)}},{mutateAsync:y}=ge({mutationKey:["editExpenses"],mutationFn:Tc,...b});return{expensesEdit:r,isChanged:n,isSubmitting:i,error:o,success:c,handleSubmit:g,handleChange:h,editExpensesMutation:y}},Vh=()=>{const t=Qe(),{expenses:a,dateToday:r}=Jr(),s=a.length+1,{auth:n}=je(),[l,i]=f.useState({id:s,title:"",date_of_operation:r,amount:0,notes:"",created_by:n.id,created_at:"",updated_at:""}),[d,o]=f.useState(!1),[u,c]=f.useState(!1),[m,x]=f.useState(null),[h,g]=f.useState(null),b=()=>Object.keys(l).map(w=>({text:w})).length>=5?l.amount?l.title?[!0,""]:[!1,"Please fill up all fields (notes are optional)"]:[!1,"Please fill up all fields (notes are optional)"]:[!1,"Please fill up all fields (notes are optional)"],y=O=>{o(!0),g(null),x(null),i(w=>({...w,[O.target.name]:O.target.value}))},v=async()=>{const O=b();c(!0),O[0]?await S(l):(x(O[1]),c(!1))},p={onSuccess:async()=>{await t.invalidateQueries({queryKey:["expenses"]}),c(!1),o(!1),g("Expenses info has been added")},onError:O=>{console.error(O),x(O.message),c(!1)}},{mutateAsync:S}=ge({mutationKey:["addExpenses"],mutationFn:Oc,...p});return{dateToday:r,expensesAdd:l,isChanged:d,isSubmitting:u,error:m,success:h,handleSubmit:v,handleChange:y,addExpensesMutation:S}},$h=({openModal:t})=>{const{expenses:a,isFetching:r,selectedExpenses:s,setSelectedExpenses:n,dateToday:l}=Jr(),i=()=>{t({},"add")},d=c=>{n(c[0]),t(c,"edit")},o=[{id:"select",header:({table:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsAllPageRowsSelected(),onChange:m=>c.toggleAllPageRowsSelected(!!m.target.checked),"aria-label":"Select all"}),cell:({row:c})=>e.jsx("input",{type:"checkbox",checked:c.getIsSelected(),onChange:m=>c.toggleSelected(!!m.target.checked),"aria-label":"Select row",className:"justify-center"}),enableSorting:!1,enableHiding:!1},{accessorKey:"date_of_operation",sortingFn:"datetime",enableSorting:!0,header:({column:c})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>{c.toggleSorting(c.getIsSorted()==="asc")},className:"bg-transparent text-black flex flex-row items-center ml-auto mr-auto",children:["DATE OF OPERATION ",c.getIsSorted()==="asc"?e.jsx(ee,{}):c.getIsSorted()==="desc"?e.jsx(te,{}):e.jsx(ae,{})]})}),cell:({row:c})=>{const m=c.getValue("date_of_operation");if(m.toString()!=="0000-00-00"){const x={year:"numeric",month:"long",day:"numeric"},h=new Date(m).toLocaleDateString([],x);return e.jsx("div",{className:"text-center",children:h})}else return e.jsx("div",{className:"text-center",children:"N/A"})}},{accessorKey:"title",header:({column:c})=>e.jsx("div",{className:"text-center",children:" TITLE "}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.title})},{accessorKey:"amount",header:({column:c})=>e.jsx("div",{className:"text-center",children:" AMOUNT "}),cell:({row:c})=>{const m=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c.original.amount);return e.jsx("div",{className:"text-center",children:m})}},{accessorKey:"notes",header:({column:c})=>e.jsx("div",{className:"text-center",children:" NOTES "}),cell:({row:c})=>e.jsx("div",{className:"text-center",children:c.original.notes})},{accessorKey:"created_by",header:({column:c})=>e.jsx("div",{className:"text-center",children:" CREATED BY "}),cell:({row:c})=>e.jsxs("div",{className:"text-center",children:[c.original.created_by.firstname," ",c.original.created_by.lastname]})},{id:"actions",header:()=>e.jsx("div",{className:"flex flex-row justify-center",children:"ACTIONS"}),cell:({row:c})=>{const m=c.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(A,{fill:"empty",textColor:"black",onClick:()=>d([m]),className:"flex flex-row items-center gap-2",children:[e.jsx(tn,{})," Edit"]})})}}],u=a.some(c=>c.date_of_operation===l);return e.jsx(e.Fragment,{children:e.jsx(qe,{data:a,columns:o,filterWhat:"notes",dataType:"Today's Expenses",openModal:u?void 0:i,isLoading:r})})},qh=({onClose:t})=>{const{expensesEdit:a,isChanged:r,isSubmitting:s,error:n,success:l,handleSubmit:i,handleChange:d}=Hh();return l&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async o=>{o.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"lastname",children:"Date of Operation"}),e.jsx(Z,{type:"text",name:"date_of_operation",placeholder:"2024-04-06",className:"inputbox rounded-md",value:a.date_of_operation,disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"firstname",children:"Title"}),e.jsx(Z,{type:"text",name:"title",placeholder:"Title",className:"inputbox rounded-md bg-slate-100",value:a.title,onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Amount"}),e.jsx(Z,{type:"number",name:"amount",placeholder:"500.00",className:"inputbox rounded-md bg-slate-100",value:a.amount,onChange:d,required:!0})]})]}),e.jsx("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"flex flex-col col-span-12 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Notes"}),e.jsx(hs,{name:"notes",placeholder:"Notes here....",className:"text-base rounded-md bg-slate-100",value:a.notes,onChange:d})]})}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-3 gap-3",children:e.jsx(A,{type:"submit",fill:r?"green":null,disabled:!r,onClick:i,children:s?"Submitting":"Edit Expenses"})}),e.jsxs("div",{className:"flex flex-col col-span-6 items-start",children:[l&&e.jsx("div",{className:"font-bold text-green-700",children:l}),n&&e.jsx("div",{className:"font-bold text-red-700",children:n}),s?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})]})})})},Kh=({onClose:t})=>{const{expensesAdd:a,isChanged:r,isSubmitting:s,error:n,success:l,handleSubmit:i,handleChange:d,dateToday:o}=Vh();return l&&setTimeout(()=>{t()},1e3),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async u=>{u.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:[e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"lastname",children:"Date of Operation"}),e.jsx(Z,{type:"text",name:"date_of_operation",placeholder:"2024-04-06",className:"inputbox rounded-md",value:o,disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"firstname",children:"Title"}),e.jsx(Z,{type:"text",name:"title",placeholder:"Title",className:"inputbox rounded-md bg-slate-100",value:a.title||"",onChange:d,required:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-4 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Amount"}),e.jsx(Z,{type:"number",name:"amount",placeholder:"500.00",className:"inputbox rounded-md bg-slate-100",value:a.amount||"",onChange:d,required:!0})]})]}),e.jsx("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4",children:e.jsxs("div",{className:"flex flex-col col-span-12 gap-3",children:[e.jsx("label",{htmlFor:"email",children:"Notes"}),e.jsx(hs,{name:"notes",placeholder:"Notes here....",className:"text-base rounded-md bg-slate-100",value:a.notes||"",onChange:d})]})}),e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-4 text-center",children:[e.jsx("div",{className:"flex flex-col col-span-3 gap-3",children:e.jsx(A,{type:"submit",fill:r?"green":null,disabled:!r,onClick:i,children:s?"Submitting":"Add Expenses"})}),e.jsxs("div",{className:"flex flex-col col-span-6 items-start",children:[l&&e.jsx("div",{className:"font-bold text-green-700",children:l}),n&&e.jsx("div",{className:"font-bold text-red-700",children:n}),s?e.jsx("div",{className:"flex flex-col flex-wrap items-start",children:e.jsx(qt,{width:30,height:30})}):""]}),e.jsx("div",{className:"flex flex-col col-span-3 gap-3 items-end",children:e.jsx(A,{type:"reset",fill:"red",onClick:t,children:"Cancel"})})]})]})})})},jf=()=>{const{openModal:t,isOpen:a,closeModal:r}=Ee(),[s,n]=f.useState(""),l=(i,d)=>{n(d),t()};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Expenses",children:e.jsxs(Ac,{children:[e.jsx("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:e.jsx("div",{className:"w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx($h,{openModal:l})})}),e.jsx(Ve,{isOpen:a,onClose:r,title:s==="add"?"Add Expenses":"Edit Expenses",children:e.jsxs(e.Fragment,{children:[s==="edit"&&e.jsx(qh,{onClose:r}),s==="add"&&e.jsx(Kh,{onClose:r})]})})]})})})},Ds=({title:t,date:a,children:r,formatAmount:s,filter:n})=>e.jsx(e.Fragment,{children:e.jsxs(Al,{className:"w-full min-w-[320px] max-w-[460px]",children:[e.jsxs(El,{className:"flex flex-row items-center justify-between gap-4 pb-2",children:[e.jsx(Fl,{className:"text-xl font-bold",children:t}),a&&e.jsx(e.Fragment,{children:e.jsx(Il,{className:"!mt-1 font-bold uppercase",children:Kc()})})]}),e.jsxs(Ll,{className:"py-2 pt-0",children:[s&&e.jsx("span",{className:"text-lg font-medium",children:Ct(2e5)}),r&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-lg font-medium",children:r})})]}),e.jsx(Ec,{children:e.jsxs("div",{className:"flex w-full flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Xc,{className:"text-green-500",size:20}),e.jsx("span",{className:"text-sm font-bold text-green-500",children:"20%"})]}),n&&e.jsx(e.Fragment,{children:e.jsxs(oe,{children:[e.jsx(de,{className:"max-w-[50%]",children:e.jsx(ue,{placeholder:"filter by"})}),e.jsx(me,{children:n.map((l,i)=>e.jsx(V,{value:l,children:l},i))})]})})]})})]})}),Yh=()=>e.jsx(e.Fragment,{children:e.jsxs(Al,{className:"flex-1",children:[e.jsxs(El,{className:"flex flex-row items-center justify-between gap-4 pb-2",children:[e.jsx(Fl,{className:"font-bold",children:"Products"}),e.jsx(Il,{className:"!mt-1 font-bold uppercase"})]}),e.jsx(Ll,{className:"py-2 pt-0",children:e.jsx(Bh,{})})]})}),Bh=({})=>{const t=[31,69],a={series:[31,69],labels:["New Products","Returning Products"],dataLabels:{enabled:!0}};return e.jsx(e.Fragment,{children:e.jsx(Fc,{series:t,options:a,type:"donut",height:200,width:"100%"})})},yf=()=>{const t=["Monthly","Quarterly","Yearly"];return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Reports",children:e.jsxs("div",{className:"flex h-full w-full flex-col justify-between gap-5",children:[e.jsxs("div",{className:"flex w-full flex-row justify-between gap-5 ",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(Ds,{title:"Sales Revenue",date:!0,formatAmount:!0,filter:t}),e.jsx(Ds,{title:"Expected Profit",formatAmount:!0,filter:t})]}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(Ds,{title:"Total Collectibles",date:!0,formatAmount:!0,filter:t}),e.jsx(Ds,{title:"Total Capital",formatAmount:!0,filter:t})]})]}),e.jsx(Yh,{})]}),e.jsx(Bc,{})]})})})},Gh=()=>{const t=["","Product name","Price","Qty","Total"],{selectedInvoiceCode:a}=lt(),{data:r}=Pa();return console.log(a),e.jsx(e.Fragment,{children:e.jsxs($r,{children:[e.jsxs(Ic,{children:["Select items the customer wants to return for invoice"," "]}),e.jsx(qr,{children:e.jsx(Na,{id:"tHeaderRow",className:"hover:bg-white",children:t.map(s=>e.jsx(Kr,{className:"whitespace-nowrap px-5 py-3 text-left text-xs font-bold uppercase",children:s},s+"_head"))},"tHeaderRow")}),e.jsx(Yr,{children:a.invoice_items.length>0&&a.invoice_items.map((s,n)=>e.jsxs(Na,{className:"text-sm font-medium text-gray-700",children:[e.jsx(Me,{className:"p-3 pr-0",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4",name:"return",id:"return"})}),e.jsx(Me,{className:"text-sm font-medium text-gray-700",children:s==null?void 0:s.product.name},(s==null?void 0:s.product.name)+"Product Name"),e.jsx(Me,{children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{children:Ct(r.find(l=>l.id===s.product_price_id).cost)}),r.find(l=>l.id===s.product_price_id).on_sale?e.jsxs("span",{className:"text-muted-foreground",children:["(",Ct(r.find(l=>l.id===s.product_price_id).sale_discount),")"]}):null]})}),e.jsx(Me,{children:s==null?void 0:s.quantity}),e.jsx(Me,{children:Ct(s==null?void 0:s.total_price)})]},(s==null?void 0:s.id)+"row"))}),e.jsx(Lc,{children:e.jsxs(Na,{children:[e.jsx(Me,{colSpan:4,className:"text-right",children:"Total:"}),e.jsx(Me,{children:Ct(a.paid_amount)})]})})]})})},bf=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row",children:[e.jsx(Ml,{}),e.jsx("div",{id:"main",className:"flex w-screen flex-row",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex w-full flex-row justify-between",children:e.jsx("h1",{className:"text-primary-dark-gray text-2xl font-bold",children:"Return Item"})}),e.jsx(Gh,{})]})})]})}),Qh=()=>{const{selectedProductPrice:t}=en();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-4 font-medium",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Brand"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.brand||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Serial number"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.serial_no})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Unit"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.unit})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Size"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.size})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Color"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.product.color})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Warehouse"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.warehouse.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Capital price"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.capital_price)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Markup percent"}),e.jsxs("p",{className:"text-sm text-gray-800",children:[le(t.markup_price/t.capital_price*100,{precision:3}).value,"%"]})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Markup price"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.markup_price)})]}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-center	gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Cost"}),e.jsx("p",{className:"text-sm text-gray-800",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.cost)})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Sale discount"}),e.jsx("p",{className:"text-sm",children:t.on_sale===1?Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.sale_discount):""}),e.jsxs("div",{className:"absolute bottom-0 right-0 flex flex-none flex-row items-center justify-end gap-1 pb-[0.1rem] pr-1",children:[t.on_sale===1?e.jsx(dt,{size:14,strokeWidth:3.5,className:"text-green-600"}):e.jsx(Ms,{size:14,strokeWidth:3.5,className:"text-gray-600"}),e.jsx("div",{className:"text-xs font-semibold leading-4 text-gray-900",children:"On Sale"})]})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Price"}),e.jsx("p",{className:"text-sm",children:Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t.price)})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Active status"}),e.jsxs("span",{className:"flex flex-row items-center gap-2",children:[t.active_status==="active"?e.jsx(ka,{size:16,strokeWidth:2.5,className:"text-green-600"}):e.jsx(ss,{size:16,strokeWidth:2.5,className:"text-gray-600"}),e.jsx("p",{className:"text-sm capitalize text-gray-800",children:t.active_status})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created by"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.created_by.firstname+" "+t.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Created at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(t.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approval status"}),e.jsx("p",{className:"text-sm capitalize",children:t.approval_status})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Approved by"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.approved_by?t.approved_by.firstname+" "+t.approved_by.firstname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Updated at"}),e.jsx("p",{className:"text-sm text-gray-800",children:Ae(t.updated_at)})]})]})]})})},Zh=({onClose:t})=>{var S,O;const{auth:a}=je(),{selectedProductPrice:r}=en(),{value:s,handleChange:n,handleSubmit:l}=fs(),[i,d]=f.useState(!1),[o,u]=f.useState(null),[c,m]=f.useState(r.capital_price),[x,h]=f.useState(rs(r.capital_price,r.markup_price,3)),[g,b]=f.useState(r.markup_price),y=w=>{const P=w.target.value;m(le(P).value),n("capital_price",le(P).value),b(Va(le(P).value,x||0))},v=w=>{const P=Number(w.target.value);h(P),b(Va(c,P))},p=w=>{const P=le(w.target.value).value;b(P),h(rs(c,P,3))};return f.useEffect(()=>{n("capital_price",c),n("markup_price",g),n("cost",$a(c,g))},[c,x,g]),f.useEffect(()=>{n("price",rn(s.cost??r.cost,s.sale_discount??r.sale_discount))},[s.cost,s.sale_discount]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:async w=>{d(!i),w.preventDefault(),l({action:"update",id:r.id,data:s}).then(()=>{d(!i),et.success("Product price edited successfully"),t()}).catch(()=>{d(!i),u("Failed to add product listing"),et.error("Failed to add product listing")})},children:e.jsxs("div",{className:"flex max-w-2xl flex-col gap-3",children:[e.jsxs("div",{className:"mt-3 grid w-full grid-flow-row grid-cols-12 gap-x-4 gap-y-5 font-medium text-gray-700",children:[e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Name"}),e.jsx("p",{className:"text-sm",children:r.product.name})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Brand"}),e.jsx("p",{className:"text-sm",children:r.product.brand||e.jsx("span",{className:"opacity-60",children:"No brand"})})]}),e.jsxs("div",{className:"col-span-6 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Serial Number"}),e.jsx("p",{className:"text-sm",children:r.product.serial_no})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"unit",className:"text-sm font-bold text-gray-600",children:"Unit"}),e.jsx(R,{id:"unit",name:"unit",type:"text",maxLength:20,required:!0,value:s.unit||r.unit,onChange:w=>{n("unit",w.target.value)}})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Size"}),e.jsx("p",{className:"text-sm",children:r.product.size})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Color"}),e.jsx("p",{className:"text-sm",children:r.product.color})]}),e.jsxs("div",{className:"col-span-3 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Warehouse"}),e.jsx("p",{className:"text-sm",children:r.warehouse.name})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-6 gap-3",children:[e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"capital_price",className:"text-sm font-bold text-gray-600",children:"Capital price"}),e.jsx(R,{id:"capital_price",name:"capital_price",type:"number",inputMode:"numeric",min:0,step:.01,required:!0,className:"pl-7",value:c||"",onChange:y,onBlur:w=>{w.target.value=Number(c).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_percent",className:"text-sm font-bold text-gray-600",children:"Markup percent"}),e.jsx(R,{id:"markup_percent",name:"markup_percent",type:"number",inputMode:"numeric",min:0,max:1e3,step:.001,required:!0,value:x||"",onChange:v,onBlur:w=>{w.target.value=le(x,{precision:3}).value.toString()}}),e.jsx("span",{className:"absolute bottom-0 right-0 mr-2 -translate-y-1/2 text-sm font-semibold text-gray-500",children:"%"})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"markup_price",className:"text-sm font-bold text-gray-600",children:"Markup price"}),e.jsx(R,{id:"markup_price",name:"markup_price",type:"number",min:0,max:1e3,step:.01,className:"pl-7",value:g||"",onChange:p,onBlur:w=>{w.target.value=Number(g).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"cost",className:"text-sm font-bold text-gray-600",children:"Cost"}),e.jsx(R,{id:"cost",name:"cost",type:"number",min:0,required:!0,className:"pl-7",readOnly:!0,value:$a(c,g).toFixed(2)||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 pb-[0.65rem] pl-3 text-sm font-semibold text-gray-500",children:""})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"sale_discount",className:"text-sm font-bold text-gray-600",children:"Sale discount"}),e.jsx(R,{id:"sale_discount",name:"sale_discount",type:"number",inputMode:"numeric",min:0,step:.01,max:s.cost!==void 0?s.cost:r.cost,disabled:s.on_sale===void 0?r.on_sale===0:s.on_sale===0,required:!0,className:"pl-7",value:s.sale_discount??((S=r.sale_discount)==null?void 0:S.toFixed(2))??"",onChange:w=>{n("sale_discount",le(w.target.value).value)},onBlur:w=>{w.target.value=Number(s.sale_discount!==void 0?s.sale_discount:r.sale_discount).toFixed(2)}}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""}),e.jsxs("div",{className:"absolute right-0 top-1/2 mr-2 flex flex-none translate-y-1/4 flex-row items-center justify-start gap-2",children:[e.jsx(R,{name:"on_sale",id:"on_sale",type:"checkbox",checked:s.on_sale===void 0?r.on_sale===1:s.on_sale===1,className:"h-4 w-fit",onChange:w=>{const P=document.getElementById("sale_discount");n("on_sale",w.target.checked?1:0),!w.target.checked&&(n("sale_discount",0),P&&(P.value="0.00"))}}),e.jsx(T,{htmlFor:"on_sale",className:"text-xs font-bold text-slate-700",children:"On Sale"})]})]}),e.jsxs("div",{className:"relative col-span-2 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"price",className:"text-sm font-bold text-gray-600",children:"Price"}),e.jsx(R,{id:"price",name:"price",type:"number",min:0,step:.01,required:!0,readOnly:!0,className:"pl-7",value:((O=s.price)==null?void 0:O.toFixed(2))||r.price.toFixed(2)||"0.00"}),e.jsx("span",{className:"absolute bottom-0 left-0 ml-3 -translate-y-1/2 text-sm font-semibold text-gray-500",children:""})]})]}),e.jsx("hr",{className:"my-2 h-px w-full border-0 bg-gray-200"}),e.jsxs("div",{className:"grid w-full grid-flow-row grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4 flex flex-row items-center justify-start	gap-3",children:[e.jsx(ft,{id:"active_status",name:"active_status",checked:s.active_status?s.active_status==="active":r.active_status==="active",className:"data-[state=checked]:bg-primary-green data-[state=unchecked]:bg-gray-300",onCheckedChange:w=>{n("active_status",w?"active":"inactive")}}),e.jsx(T,{htmlFor:"active_status",className:"text-sm font-bold text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created by"}),e.jsx("p",{className:"text-sm",children:r.created_by.firstname+" "+r.created_by.lastname})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Created at"}),e.jsx("p",{className:"text-sm",children:Ae(r.created_at)})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx(T,{htmlFor:"approval_status",className:"text-sm font-bold text-gray-600",children:"Approval status"}),e.jsxs(oe,{onValueChange:w=>{n("approval_status",w),w==="approved"?n("approved_by",a.user.id):n("approved_by","")},value:s.approval_status||r.approval_status||"",required:!0,children:[e.jsx(de,{name:"approval_status",className:"flex flex-row items-center gap-3 bg-white text-sm capitalize",children:e.jsx(ue,{placeholder:s.approval_status||r.approval_status||"Select status..."})}),e.jsxs(me,{className:"bg-white",children:[e.jsx(V,{className:"rounded-md",value:"pending",children:"Pending"},"pending"),e.jsx(V,{className:"rounded-md",value:"approved",children:"Approved"},"approved"),e.jsx(V,{className:"rounded-md",value:"rejected",children:"Rejected"},"rejected")]})]})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Approved by"}),e.jsx("p",{className:"text-sm",children:r.approved_by?r.approved_by.firstname+" "+r.approved_by.lastname:"N/A"})]}),e.jsxs("div",{className:"col-span-4 flex flex-col justify-center gap-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-600",children:"Updated at"}),e.jsx("p",{className:"text-sm",children:Ae(r.updated_at)})]})]}),e.jsx("div",{className:"col-span-12 flex w-full justify-between whitespace-nowrap pt-4",children:e.jsxs("div",{className:"ml-auto flex flex-row gap-4",children:[e.jsx(A,{type:"reset",fill:"default",className:"flex-1 py-2 text-sm font-bold text-slate-700 hover:text-white",onClick:t,children:"Cancel"}),e.jsx(A,{type:"submit",fill:"green",disabled:i,className:"flex-1 py-2 text-sm font-bold text-white disabled:cursor-not-allowed disabled:opacity-50",children:i?"Applying changes...":"Apply changes"})]})}),o&&e.jsx("div",{className:"flex w-full flex-row justify-center gap-4",children:e.jsx("p",{className:"text-sm text-red-600",children:o})})]})})})},Xh=({handleProdPriceDetails:t,handleEditProdPrice:a,handleApproveProdPrice:r,handleRejectProdPrice:s})=>[{id:"select",header:({table:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsAllPageRowsSelected(),onChange:i=>l.toggleAllPageRowsSelected(!!i.target.checked),"aria-label":"Select all"}),cell:({row:l})=>e.jsx("input",{type:"checkbox",checked:l.getIsSelected(),onChange:i=>l.toggleSelected(!!i.target.checked),"aria-label":"Select row",className:"justify-center"})},{id:"name",accessorKey:"product.name",sortingFn:"text",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Name"," ",l.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):l.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"brand",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Brand"})},{accessorKey:"warehouse.code",sortingFn:"basic",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),className:"flex flex-row items-center bg-transparent uppercase text-slate-700",children:["WHS"," ",l.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):l.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})})},{accessorKey:"unit",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Unit"})},{accessorKey:"capital_price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Capital"}),cell:({row:l})=>{const i=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l.original.capital_price);return e.jsx("div",{className:"flex items-center uppercase",children:e.jsx("span",{children:l.original.capital_price?i:""})})}},{accessorKey:"markup_price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Markup"}),cell:({row:l})=>{const i=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l.original.markup_price||0),d=le(l.original.markup_price/l.original.capital_price*100,{precision:3}).value;return e.jsxs("div",{className:"flex items-center uppercase",children:[e.jsx("span",{children:i}),e.jsxs("span",{className:"text-gray-500",children:["(",d,"%)"]})]})}},{accessorKey:"sale_discount",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Discount"}),cell:({row:l})=>{const i=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l.original.sale_discount||0);return e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:l.original.on_sale?i:e.jsx("div",{className:"group relative flex w-fit items-center",children:e.jsxs(ba,{children:[e.jsx(sa,{children:e.jsx(Ms,{size:20,strokeWidth:2,className:"text-gray-700"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium normal-case",children:"Not on sale"})})]})})})})}},{accessorKey:"price",header:()=>e.jsx("div",{className:"justify-center uppercase",children:"Price"}),cell:({row:l})=>{const i=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l.original.price);return e.jsx("div",{className:"flex items-center uppercase",children:e.jsx("span",{children:l.original.price?i:""})})}},{accessorKey:"active_status",sortingFn:"basic",enableSorting:!0,header:({column:l})=>e.jsx("div",{children:e.jsxs(A,{onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),className:"ml-auto mr-auto flex flex-row items-center bg-transparent uppercase text-slate-700",children:["Active"," ",l.getIsSorted()==="asc"?e.jsx(ee,{size:18,strokeWidth:2}):l.getIsSorted()==="desc"?e.jsx(te,{size:18,strokeWidth:2}):e.jsx(ae,{size:18,strokeWidth:2})]})}),cell:({row:l})=>{const i=l.original.active_status;return e.jsx("div",{className:"group relative mx-auto flex w-fit items-center justify-center",children:e.jsxs(ba,{children:[e.jsx(sa,{children:i==="active"?e.jsx(dt,{size:20,strokeWidth:2,className:"text-green-600"}):e.jsx(ss,{size:20,strokeWidth:2,className:"text-gray-600"})}),e.jsx(ra,{children:e.jsx("p",{className:"text-sm font-medium capitalize",children:i})})]})})},enableGlobalFilter:!1},{id:"actions",cell:({row:l})=>{const i=l.original;return e.jsx("div",{className:"flex flex-row justify-center text-xs font-normal uppercase",children:e.jsxs(vt,{children:[e.jsx(jt,{className:"overflow-clip rounded-full bg-gray-100 p-1.5 hover:bg-gray-300",children:e.jsx(Nt,{size:16,strokeWidth:2.25})}),e.jsxs(yt,{className:"relative z-50 w-44 bg-white",children:[e.jsx(bt,{children:"Actions"}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>t(i),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(pt,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Details"})]}),e.jsxs(pe,{onClick:()=>a(i),className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ot,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Edit"})]}),e.jsx(tt,{className:"bg-gray-200"}),e.jsxs(pe,{onClick:()=>{r(i.id)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(ka,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Approve"})]}),e.jsxs(pe,{onClick:()=>{s(i.id)},className:"flex flex-row items-center gap-3 rounded-md p-2 hover:bg-gray-200",children:[e.jsx("span",{className:"flex w-6 items-center justify-center",children:e.jsx(Ht,{size:16,strokeWidth:2.25})}),e.jsx("span",{children:"Reject"})]})]})]})})},enableGlobalFilter:!1}],Jh=({openModal:t,isModalOpen:a,filterWarehouse:r})=>{const{data:s,isLoading:n,setSelectedProductPrice:l}=en(),i=m=>{l(m),t(m,"details")},d=m=>{l(m),t(m,"edit")},{handleSubmit:o}=fs(),u=m=>{o({action:"update",id:m,data:{approval_status:"approved"}}).then(()=>et.success("Product price approved")).catch(()=>et.error("Failed to approve product price"))},c=m=>{o({action:"update",id:m,data:{approval_status:"rejected"}}).then(()=>et.success("Product price rejected")).catch(()=>et.error("Failed to reject product price"))};return e.jsx(e.Fragment,{children:e.jsx(xs,{children:e.jsx(qe,{columns:Xh({handleProdPriceDetails:i,handleEditProdPrice:d,handleApproveProdPrice:u,handleRejectProdPrice:c}),data:r?s.filter(m=>m.warehouse.id===r):s,filterWhat:"name",dataType:"Listing",isLoading:n})})})},Nf=()=>{const{warehouses:t}=$t(),[a,r]=f.useState(0),{isOpen:s,openModal:n,closeModal:l}=Ee(),[i,d]=f.useState(""),o=(u,c)=>{d(c),n()};return e.jsx(e.Fragment,{children:e.jsx($e,{title:"Pending Listing",children:e.jsxs(Mc,{children:[e.jsxs("div",{className:"flex max-h-full flex-1 flex-col gap-5 rounded-lg border border-black/10 bg-white p-5",children:[e.jsxs("div",{className:"ml-auto flex flex-row items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Filter warehouse:"," "]}),e.jsxs(oe,{defaultValue:"0",onValueChange:u=>r(Number(u)),children:[e.jsx(de,{className:"w-[300px] text-sm font-medium",children:e.jsx(ue,{placeholder:"All"})}),e.jsxs(me,{className:"text-sm font-medium capitalize",children:[e.jsx(V,{value:"0",children:"All"},"all"),t.map(u=>e.jsxs(V,{value:u.id.toString(),children:[u.name," (",u.code,")"]},u.id))]})]})]}),e.jsx("div",{className:"w-full overflow-x-hidden rounded-lg border border-black/10",children:e.jsx(Jh,{openModal:o,isModalOpen:s,filterWarehouse:a})})]}),e.jsx(Ve,{title:i==="details"?"Price Details":i==="edit"?"Edit Price":"",isOpen:s,onClose:l,closeOnOverlayClick:i==="details"||i==="toggle_active_stat",children:e.jsxs(e.Fragment,{children:[i==="details"&&e.jsx(Qh,{}),i==="edit"&&e.jsx(Zh,{onClose:l})]})})]})})})};export{jf as ExpensesPage,gf as Inventory,vf as InventoryItemsPage,nf as Invoice,Sf as Login,Nf as PendingProductPrice,hf as PendingTransfer,mf as PointOfSalePage,bf as PosReturnsPage,df as ProductPrices,of as Products,yf as Reports,pf as RolePermissions,cf as Supplier,xf as Transaction,uf as Transfer,lf as UserInfo,ff as UserSales,rf as Warehouse};
